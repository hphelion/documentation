<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE topic   PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >


<topic id="jow1426183480976" xml:lang="en-us">


<!-- Modification History


        


-->


    <title >Configuring a Compute Host to Provide Local  Storage</title>


    <shortdesc >You can configure a compute host to provide local storage for use by


        VMs. </shortdesc>


    <prolog>


        <author >Jim Owens</author>


    </prolog>


    <body>


        <section id="section_N10022_N1001F_N10001" >


            <p >Local storage can be used to provide improved disk access


                performance for VMs instantiated on the host.</p>


            <note conref="jow1426942555025.xml#jow1426942555025/note_local_storage_ephemeral" id="note_N1002C_N10022_N1001F_N10001" />


            <p >To provide local storage on a compute host, add a local volume group


                called <b >nova-local</b> to the host. This


                automatically includes the host in the <b >local_storage_hosts</b> host aggregate. The Nova scheduler draws from


                this host aggregate to instantiate VMs that require local storage. </p>


            <p >To populate the <b >nova-local</b>


                group with storage resources, you must also add physical volumes created on local


                disks.</p>


            <p >As an alternative to the web administration interface, you can use


                the CLI to configure the host for local storage. For more information, see <xref href="jow1426181291481.xml" /> and <xref href="jow1426182435441.xml" />.</p>


        </section>


        <ol>


            <li conref="jow1426453628262.xml#jow1426453628262/lock_host" id="li_N1002A_N10027_N1001F_N10001" >


                <p />


            </li>


            <li conref="jow1426453628262.xml#jow1426453628262/open_details_locked_host" id="li_N10033_N10027_N1001F_N10001" >


                <p />


            </li>


            <li id="li_N1002B_N10028_N1001C_N10001" >


                <p >Select the <uicontrol >Storage</uicontrol> tab.</p>


                


                    <p >For a compute node, the storage tab displays three lists:</p>


                    <dl>


                        <dlentry >


                            <dt >Disks</dt>


                            <dd >


                                <p >Physical disks installed in the compute node.</p>


                            </dd>


                        </dlentry>


                        <dlentry >


                            <dt >Local Volume Groups</dt>


                            <dd >


                                <p >Groups of physical volumes available for VM


                                    storage.</p>


                            </dd>


                        </dlentry>


                        <dlentry >


                            <dt >Physical Volumes</dt>


                            <dd >


                                <p >Partitions that have been initialized for logical


                                    volume management (LVM) and assigned to a local volume


                                    group.</p>


                            </dd>


                        </dlentry>


                    </dl>


                    <fig id="fig_atv_4s5_jr" >


                        <image href="jow1426459038579.image" id="image_rhh_ps5_jr"  width="6in">


                            <alt >Compute Node Storage tab</alt>


                        </image>


                    </fig>


                


            </li>


            <li id="li_N10042_N10027_N1001F_N10001" >


                <p >If required, add the <b >nova-local</b> group to the <b >Local


                        Volume Groups</b> list.</p>


                


                    <p >The <b >Local Volume


                            Groups</b> list displays groups of physical volumes designated


                        for use as local storage.</p>


                    <p >The default group for use by VMs is called <b >nova-local</b>. If this group is not listed,


                        you can create it by clicking <b >Add Local Volume


                            Group</b>, and then accepting the defaults in the dialog box


                        that appears.</p>


                    <fig id="fig_wrr_vs5_jr" >


                        <image href="jow1426459253956.image" id="image_ask_bt5_jr"  width="5in">


                            <alt >Create Local Volume Group</alt>


                        </image>


                    </fig>


                


                


                    <p >The <b >nova-local</b> group is shown in the list.</p>


                    <fig id="fig_i4s_p1z_jr" >


                        <image href="jow1426510376255.image" id="image_w1l_z1z_jr"  width="6in">


                            <alt >Local Volume Groups</alt>


                        </image>


                    </fig>


                


            </li>


            <li id="li_N10107_N10027_N1001F_N10001" >


                <p >Add a physical volume to the <b >nova-local</b> group.</p>


                


                    <p >The <b >Physical


                            Volumes</b> list displays LVM volumes that have been created


                        and added to a Local Volume Group. To add a new one, click <b >Add Physical Volume</b> and complete the


                        dialog box that appears.</p>


                    <fig id="fig_myv_tdz_jr" >


                        <image href="jow1426511807740.image" id="image_dhp_12z_jr"  width="5in">


                            <alt >Create Physical Volume dialog box</alt>


                        </image>


                    </fig>


                    <note id="note_N1013A_N10112_N10107_N10027_N1001F_N10001" >


                        <p >The <uicontrol >Local Volume


                                Group</uicontrol> drop-down selection is automatically set to


                                <b >nova-local</b>, and cannot be


                            changed.</p>


                    </note>


                    <p >Use the <uicontrol >Disks</uicontrol>


                        drop-down menu to select a disk to provide storage. For the root disk, a


                        designated partition  (<b >local_pv</b>) is used.</p>


                    <p >You can add any number of physical volumes to the


                            <b >nova-local</b> group, limited


                        only by the number of available disks.</p>


                


                


                    <p >A physical volume is created and added to the


                            <b >nova-local</b> group.</p>


                    <fig id="fig_ajv_p2z_jr" >


                        <image href="jow1426512224610.image" id="image_c4b_w2z_jr"  width="6in">


                            <alt >Physical Volumes list</alt>


                        </image>


                    </fig>


                


            </li>


            <li id="li_N1019C_N10027_N1001F_N10001" >


                <p >Unlock the host to make the changes take effect.</p>


            </li>


        </ol>





            <p >The compute host is ready to provide local  storage for use by VMs.


                Because a <b >nova-local</b> local volume group


                has been added, the host is automatically included in the <b >local_storage_hosts</b> host aggregate.</p>


            <p >To return a host to the <b >remote_storage_hosts</b> host aggregate, so that it is used to


                instantiate VMs configured for remote Cinder-based storage, delete the <b >nova-local</b> local volume group.</p>


            <note id="note_N10204_N101E1_N1001F_N10001"  type="caution">


                <p >VMs instantiated on the compute node must be migrated or terminated before the


                    host is reconfigured for remote storage.</p>


            </note>





        <section id="section_N1017B_N1001F_N10001" >


            <p >To configure a VM to use local storage or remote Cinder-based


                storage, or to be instantiated on any compute host regardless of storage type, see


                    <xref href="jow1426181040008.xml" />. </p>


            <p >To add disks to a compute node for extra local storage, see <xref href="jow1418924302353.xml" />


            </p>


        </section>


    </body>


</topic>