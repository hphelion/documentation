<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1429547742880" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="345">Configuring vCPU Scheduling and Priority</title>
    <shortdesc ixia_locid="346">You can assign the Linux scheduler and priority for non-boot virtual CPUs using an
        extra specification.</shortdesc>
    <prolog>
        <author ixia_locid="347">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="348">
            <p ixia_locid="182">This extra specification applies to non-boot virtual CPUs, and is
                available only for flavors that define more than one virtual CPU. For the boot CPU,
                the Linux scheduler and priority are fixed to non-real-time, with a <i ixia_locid="183">nice</i> priority of 0.</p>
            <p ixia_locid="137">For each additional virtual CPU, the available options are:</p>
            <dl>
                <dlentry ixia_locid="349">
                    <dt ixia_locid="350">Default Policy</dt>
                    <dd ixia_locid="351">
                        <p ixia_locid="352">Assigns a non-real-time scheduling policy with <i ixia_locid="141">nice</i> priority of 0.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="353">
                    <dt ixia_locid="354">Real-Time FIFO</dt>
                    <dd ixia_locid="355">
                        <p ixia_locid="356">Assigns a real-time, first-in-first-out policy with <i ixia_locid="357">nice</i> priority of 1‒99, specified in the
                            associated <uicontrol ixia_locid="358">VCPU Priority</uicontrol>
                            field.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="359">
                    <dt ixia_locid="360">Real-Time Round Robin</dt>
                    <dd ixia_locid="361">
                        <p ixia_locid="362">Assigns a real-time, round-robin policy with <i ixia_locid="363">nice</i> priority of 1‒99, specified in the
                            associated <uicontrol ixia_locid="364">VCPU Priority</uicontrol>
                            field.</p>
                    </dd>
                </dlentry>
            </dl>
            <p ixia_locid="17">To add this extra spec to a flavor using the web administration
                interface, use the <uicontrol ixia_locid="314">VCPU Scheduler Policy</uicontrol>
                selection in the <uicontrol ixia_locid="316">Create Flavor Extra Spec</uicontrol>
                drop-down menu. To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="318"/>.</p>
            <p ixia_locid="142">You can specify the scheduler policy and priority for non-boot
                virtual CPUs from the CLI using the <option ixia_locid="143">hw:wrs:vcpu:scheduler</option> parameter on the <cmdname ixia_locid="145">nova
                    flavor-key</cmdname> command. This parameter accepts a semicolon-separated list
                of <varname ixia_locid="146">scheduler:priority:vcpus</varname> values as
                follows.</p>
            <dl>
                <dlentry ixia_locid="147">
                    <dt ixia_locid="148"><varname ixia_locid="149">scheduler</varname></dt>
                    <dd ixia_locid="150">
                        <p ixia_locid="151">The scheduler policy. One of <i ixia_locid="152">other</i>, <i ixia_locid="153">fifo</i>, or <i ixia_locid="154">rr</i> to indicate non real-time, FIFO, and Round Robin policies
                            respectively.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="155">
                    <dt ixia_locid="156"><varname ixia_locid="157">priority</varname></dt>
                    <dd ixia_locid="158">
                        <p ixia_locid="159">The real-time scheduler priority. A value between 1 and
                            99.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="160">
                    <dt ixia_locid="161"><varname ixia_locid="162">vcpus</varname></dt>
                    <dd ixia_locid="163">
                        <p ixia_locid="164">A list of virtual CPUs as a comma-separated list (1,2,3)
                            or a range specification (1-3). Virtual CPU number 0 refers to the boot
                            virtual CPU and therefore cannot be used.</p>
                    </dd>
                </dlentry>
            </dl>
        </context>
        <example ixia_locid="365">
            <p ixia_locid="166">To set real-time schedulers and priorities on virtual CPU 1 (FIFO,
                50) and virtual CPU 2 (Round Robin, 80):</p>
            <codeblock ixia_locid="167"><systemoutput ixia_locid="200">~(keystone_admin)$ </systemoutput><userinput ixia_locid="169">nova flavor-key <varname ixia_locid="341">flavor_name</varname> set hw:wrs:vcpu:scheduler fifo:50:1;rr:80:2</userinput></codeblock>
            <p ixia_locid="170">To set real-time Round Robin schedulers for three virtual CPU (Round
                Robin, 80):</p>
            <codeblock ixia_locid="171"><systemoutput ixia_locid="201">~(keystone_admin)$ </systemoutput><userinput ixia_locid="173">nova flavor-key <varname ixia_locid="342">flavor_name</varname> set hw:wrs:vcpu:scheduler rr:80:1-3</userinput></codeblock>
            <p ixia_locid="174">To set the FIFO scheduler with priority 50 on all virtual CPUs:</p>
            <codeblock ixia_locid="175"><systemoutput ixia_locid="202">~(keystone_admin)$ </systemoutput><userinput ixia_locid="177">nova flavor-key <varname ixia_locid="343">flavor_name</varname> set hw:wrs:vcpu:scheduler=fifo:50</userinput></codeblock>
            <p ixia_locid="178">To reset all scheduler settings to default values (non real-time
                scheduler with priority 0):</p>
            <codeblock ixia_locid="222"><systemoutput ixia_locid="225">~(keystone_admin)$ </systemoutput><userinput ixia_locid="228">nova flavor-key <varname ixia_locid="344">flavor_name</varname> unset hw:wrs:vcpu:scheduler</userinput></codeblock>
        </example>
    </taskbody>
</task-wr>