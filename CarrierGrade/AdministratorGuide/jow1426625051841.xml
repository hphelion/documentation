<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1426625051841" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="302">Pinning a vCPU to a Shared Physical CPU</title>
    <shortdesc ixia_locid="303">You can pin a vCPU to a shared physical CPU by using a flavor with the required extra
        specification.</shortdesc>
    <prolog>
        <author ixia_locid="304">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="305">
            <p ixia_locid="306">You can set up a shared physical CPU on the host to run low-load or
                non-real-time tasks for multiple VMs, freeing other cores on the host for dedicated
                high-load tasks. You can then use an extra spec to pin a specified vCPU to the
                shared physical CPU.</p>
        </context>
        <prereq id="prereq_N1002D_N1001C_N10001" ixia_locid="307">
            <p ixia_locid="308">To use this extra spec, you must define a shared physical CPU on at least
                one host. For more information, see <xref href="jow1426618822854.xml" ixia_locid="295"/>. To support migration, shared physical CPUs on multiple hosts are
                recommended.</p>
            <p ixia_locid="296">You must also set the <nameliteral ixia_locid="297">CPU
                    Policy</nameliteral> extra specification for the flavor to <nameliteral ixia_locid="298">Dedicated</nameliteral>. This enables the high-load vCPUs for
                the instance to be pinned.</p>
        </prereq>
        <context id="context_N1004A_N1001C_N10001" ixia_locid="309">
            <p ixia_locid="310">To add the required extra specification to a flavor using the web
                administration interface, use the <uicontrol ixia_locid="311">Shared VCPU
                    ID</uicontrol> selection in the <uicontrol ixia_locid="312">Create Flavor Extra
                    Spec</uicontrol> drop-down menu. To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="313"/>.</p>
            <p ixia_locid="299">To set the Shared VCPU ID from the CLI, use a command of the
                following form:</p>
            <codeblock ixia_locid="282"><systemoutput ixia_locid="284">~(keystone_admin)$ </systemoutput><userinput ixia_locid="286">nova flavor-key <varname ixia_locid="288">flavor_name</varname> set hw:wrs:shared_vcpu=<varname ixia_locid="290">vcpu_id</varname></userinput></codeblock>
            <p ixia_locid="300">where <nameliteral ixia_locid="301">vcpu_id</nameliteral> is an
                integer that identifies the vcpu (starting from 0).</p>
        </context>
    </taskbody>
</task-wr>