<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic domains="(topic task topic)                            (topic hi-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="jow1437657423737">
<!-- Modification History
        
-->
    <title>Performing a System Restore for a Minimal Two-server Configuration</title>
    <shortdesc>You can restore a minimal two-server HP Helion OpenStack Carrier Grade cluster from
        available system data and Cinder volume backup files.</shortdesc>
    <prolog>
        <author>Jim Owens</author>
        <author></author>
    </prolog>
    <body>
        
            <p>The restore procedure for a minimal-two server configuration differs
                from the procedure for separate controller and compute nodes. In a system with
                separate nodes, the controller node is restored first, and then any storage nodes.
                On systems that use a Ceph storage backend, these are required to provide the Ceph
                infrastructure used for Cinder volumes. The Cinder volumes are restored next to
                provide data for VMs. Finally, the compute nodes and any VMs running on them are
                restored.</p>
            <p>For a minimal two-server configuration, the Cinder volumes are
                restored first to ensure that the VMs on the compute portion of the combined node
                have access to Cinder volume data. After the Cinder volumes are restored, the
                combined controller-compute node can be restored. Because this type of system does
                not use Ceph storage, there is no requirement to restore the controller before
                restoring the Cinder volumes.</p>
        
        <prereq conref="jow1437656331081.xml#maintask/prereq_N1002D_N1001F_N10001" id="prereq_N1003C_N10024_N10001"/>
        <ol>
            <step conref="jow1437656331081.xml#maintask/common_start" conrefend="jow1437656331081.xml#maintask/common_end" id="step_N10077_N10074_N10024_N10001">
                <cmd/>
            
            <step conref="jow1437656331081.xml#maintask/restore_cinder_vols" id="step_N10050_N10041_N10024_N10001">
                <cmd/>
            
            <step conref="jow1437656331081.xml#maintask/remove_error_vols_small" id="step_N10059_N10041_N10024_N10001">
                <cmd/>
            
             
                <li>Restore the compute function on <codeph>controller-0</codeph>.</li>
                
                    <p>Use the following command:</p>
                    <codeblock>~(keystone_admin)$ system compute-config-complete</codeph>
<codeph>Manifests are being created and applied, the controller will restart upon     completion.
+-------------------+--------------------------------------+
| Property          | Value                                |
+-------------------+--------------------------------------+
| action            | none                                 |
| administrative    | unlocked                             |
| availability      | available                            |
| bm_ip             |                                      |
| bm_mac            | None                                 |
| bm_type           | None                                 |
| bm_username       | None                                 |
| capabilities      | {}                                   |
| created_at        | 2015-07-07T20:47:40.329544+00:00     |
| cstatus           | Compute config required              |
| hostname          | controller-0                         |
| iconfig_applied   | 4e8acad4-0d68-490b-afb3-33dc3fbac3c1 |
| iconfig_fini      | None                                 |
| iconfig_target    | None                                 |
| id                | 1                                    |
| infra_ip          | None                                 |
| invprovision      | provisioned                          |
| location          | {}                                   |
| mgmt_ip           | 192.168.204.3                        |
| mgmt_mac          | 08:00:27:58:27:b8                    |
| operational       | enabled                              |
| personality       | controller                           |
| reserved          | False                                |
| serialid          | None                                 |
| subfunction_avail | not-installed                        |
| subfunction_oper  | disabled                             |
| subfunctions      | controller,compute                   |
| task              |                                      |
| updated_at        | 2015-07-07T20:55:43.926852+00:00     |
| uptime            | 1370                                 |
| uuid              | bd213301-0130-4698-89eb-8a58386ffe03 |
+-------------------+--------------------------------------+</codeblock>
                
            
            <step conref="jow1437656331081.xml#maintask/restore_controller_1_small" id="step_N10062_N10041_N10024_N10001">
                <cmd/>
            
        </ol>
        <result conref="jow1437656331081.xml#maintask/result" id="result_N10073_N10024_N10001"/>
        <p conref="jow1437656331081.xml#maintask/restore_passwords" id="p_N10079_N10024_N10001"/>
    </body>
</topic>