<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="cloudDatabase">
  <title>Database Configuration</title>
    <body>
 
    <section>
      <p>If you are installing the Database service, add and populate the <codeph>database</codeph>
                section of the <codeph>clouds.yml</codeph> file as described below. All fields are
                required unless otherwise indicated.</p>
            <p>
                <note type="important">This section begins indented two spaces; look at the <xref
                        href="fullFile.dita">complete file</xref> to see how all the sections fit
                    together.</note>
                <codeblock id="cloudDB">  database:
    trove_enable_ssl: False
    ephemeral_ca_cert: /home/stack/ca/cacert.pem  
    external_network: 
    provider_network:
    ntp_server: 
    keypair: default
    enable_ha: False
    flavor: m1.medium
    database_flavor: m1.medium
    messaging_flavor: m1.medium
    database_volume_size: 10
    logstash_rabbitmq_host:
    logstash_rabbitmq_password:
    hotpools_enabled: True
    hotpools_max_instances: 1
    hotpools_image_name: percona
    hotpools_flavor_names: 'm1.medium'
    project_id: 
    control_plane_database_volume_type: VOLTYPE_HERE
    guest_instance_volume_type: VOLTYPE_HERE
    disable_rollback: true</codeblock>
            </p>
      <dl>
        <dlentry><dt>trove_enable_ssl</dt><dd>This variable defines whether SSL is used internally by Trove. HPE Helion OpenStack 2.0
            implements SSL using HAProxy, so in installations of version 2.0 or later, this value
            must be <b>False</b>. </dd></dlentry>
        <dlentry><dt>ephemeral_ca_cert</dt><dd>If SSL has been enabled on the public endpoints, this value needs to be identical to the
                            <codeph>cacert</codeph> value provided previously. </dd>
                    <dd>If SSL has <b>not</b> been enabled,<xref
                            href="../install_dbaasNoTLS.dita#topic_gxm_4xw_yt"> follow these
                            additional instructions</xref> to determine the value that should be
                        provided here. </dd></dlentry>
        <dlentry><dt>external_network</dt><dd>The ID (GUID) of the external network. In a typical installation, the name of this network is
              <b>ext-net</b>. </dd></dlentry>
        <dlentry><dt>provider_network</dt><dd> The ID (GUID) of the service provider network. In a typical installation, the name of this
                        network is <b>SVC</b>. </dd></dlentry>
        <dlentry><dt>ntp_server</dt><dd> IP address of NTP server. In typical installations, this is the IP address of the first
                        Management Controller.</dd></dlentry>
        <dlentry><dt>keypair</dt><dd> Specify the name of a keypair to use when creating the Database Service. This keypair will be
            used for debugging purposes when logging into instances of the Database Service.
              <note>This key must already exist in Nova prior to installation.</note></dd></dlentry>
        <dlentry><dt>enable_ha</dt><dd> Options are True or False. If True, the database will be
          created with high-availability configurations. Ensure you have enough quota to do
          so.</dd></dlentry>
        <dlentry><dt>flavor</dt><dd>The default is m1.medium. This flavor size is used to create instances of the Database
              Service.<note>The minimum size is m1.medium. </note></dd></dlentry>
        <dlentry><dt>database_flavor</dt><dd>The default is m1.medium. This flavor size is used to create instances of the Database Service's
            MySQL Database backend.<note>The minimum size is m1.medium. Larger flavors can be used
              for large or complex installations.</note></dd></dlentry>
        <dlentry><dt>messaging_flavor: </dt><dd>The default is m1.medium. This flavor size is used to create instances of the Database Services
            Messaging backend.<note>The minimum size is m1.medium. </note></dd></dlentry>
        <dlentry><dt>database_volume_size</dt><dd>The default value is "10"; this is measured in GB (gigabytes). This is the volume size that will
            be used to create storage for the Database Service's MySQL database backend.</dd></dlentry>
        <dlentry><dt>logstash_rabbitmq_host</dt><dd> The IP address of the HPE Helion OpenStack logging service. In typical installations, this is
            the IP address of the first Management Controller.</dd></dlentry>
        <dlentry><dt>logstash_rabbitmq_password</dt><dd> The admin password for the HPE Helion OpenStack logging service. This password is stored in the
                            <codeph>rabbitmq_password</codeph> variable in the
                            <codeph>/etc/beaver/beaver.conf</codeph> configuration file located on
                        the controller nodes.</dd></dlentry>
        <dlentry><dt>hotpools_enabled</dt><dd> Options are True or False. The default value is True. If True, a pool of "hot" databases will
            be pre-provisioned for use when a new instance is requested. This functionalty greatly
            reduces database creation time. If False, remove all other <i>hotpools</i> configuration
            variables.</dd></dlentry>
        <dlentry><dt>hotpools_max_instances</dt><dd> Default is 1. This is the number of "hot" databases to keep in the pool.</dd></dlentry>
        <dlentry><dt>hotpools_image_name</dt><dd>The default value is <codeph>percona</codeph> . For HPE Helion OpenStack installations version
            2.0 or greater, this value must not be changed.</dd></dlentry>
        <dlentry><dt>hotpools_flavor_names</dt><dd> The default value is <codeph>m1.medium</codeph>.  This is the set of  flavor sizes to keep in
            the pool. </dd></dlentry>
        <dlentry><dt>project_id</dt><dd> Project id of the project where the service will be installed.  </dd></dlentry>
      <dlentry>
          <dt>control_plane_database_volume_type</dt>
          <dd>This value sets the Cinder volume type. The default value is LVM; if you are using LVM, do not include this parameter. If you are using Ceph for Cinder volumes, set this value to <codeph>ceph</codeph></dd>
      </dlentry>
          <dlentry>
              <dt>guest_instance_volume_type</dt>
              <dd>This value sets the Cinder volume type. The default value is LVM; if you are using LVM, do not include this parameter. If you are using Ceph for Cinder volumes, set this value to <codeph>ceph</codeph></dd>
          </dlentry>
          <dlentry>
              <dt>disable_rollback: true</dt>
              <dd>This parameter is required and must be set to <codeph>TRUE</codeph>. This setting will prevent a complete installation rollback being triggered in case of stack creation failure.</dd>
          </dlentry>
          
      </dl></section>
    
  </body>
</topic>
