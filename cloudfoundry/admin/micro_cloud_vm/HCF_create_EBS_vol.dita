<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="task_th1_fy5_4t">
    <title>To Create and Attach an EBS Volume</title>
    <shortdesc>The following steps require an Amazon EBS (Elastic Block Store)
        credentials.</shortdesc>
    <prolog>
        <metadata>
            <othermeta name="author" content="Michael Khmelnitsky"/>
        </metadata>
    </prolog>
    <taskbody>
        <steps>
            <step>
                <cmd>In the EC2 console, click <menucascade>
                        <uicontrol>Navigation</uicontrol>
                        <uicontrol>ELASTIC BLOCK STORE</uicontrol>
                        <uicontrol>Volumes</uicontrol>
                    </menucascade>.</cmd>
            </step>
            <step>
                <cmd>Click <uicontrol>Create Volume</uicontrol>, enter the size of your EBS, ensure
                    that you set the <uicontrol>Availability Zone</uicontrol> to match the zone your
                    instance is running in, and click <uicontrol>Yes, Create</uicontrol>.</cmd>
                <stepresult>Your volume is now marked as <uicontrol>Available</uicontrol> and is
                    ready to be attached.</stepresult>
            </step>
            <step>
                <cmd>Click <menucascade>
                        <uicontrol>More</uicontrol>
                        <uicontrol>Attach Volume</uicontrol>
                    </menucascade>, select your instance from the list and click <uicontrol>Yes,
                        Attach</uicontrol>.</cmd>
                <info>hc<note type="important">To ensure that the specified defice name is not
                        already in use by your instance, use the <codeph>mount</codeph> or
                            <codeph>df</codeph> commands to see which devices are already in use on
                        your system.</note></info>
            </step>
            <step>
                <cmd>To identify the device name of the volume, run the <codeph>fdisk -1</codeph>
                    command. In the following example, it is <filepath>/dev/sdf</filepath>:</cmd>
                <info>
                    <note>There is no need to partition the device before building a filesystem on
                        it.</note>
                    <screen>root@<keyword keyref="sampleMachine"/>-7tgy:~# fdisk -1

Disk /dev/sdf: 214.7 GB, 214748364800 bytes
255 heads, 63 sectors/track, 2108 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000</screen>
                </info>
            </step>
            <step>
                <cmd>To create a new filesystem on the device, use the <codeph>mkfs</codeph>
                    command.</cmd>
                <info>
                    <note>For maximum compatibility, use the filesystem type that matches your root
                        partition. In the following example, <codeph>ext3</codeph> is
                        specified.</note>
                    <screen>root@<keyword keyref="sampleMachine"/>-7tgy:~# mkfs.ext3 /dev/sdf
mke2fs 1.41.11 (14-Mar-2010)
/dev/sdf is entire device, not just one partition!
Proceed anyway? (y,n) y
Filesystem label=
OS type: Linux
Block size=4896 (log=2)
Fragment size=4896 (log=2)
Stride=0 blocks, Stripe width=0 blocks
13187200 inodes, 52428800 blocks
2621448 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=4294967296
1600 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1685632, 2654208,
        4896000, 7962624, 11239424, 28400000, 23887872

Writing inode tables: done
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 26 mounts or
180 days, whichever comes first. Use tune2fs -c or -i to override.</screen>
                </info>
            </step>
            <step>
                <cmd>To mount the filesystem, create a directory to serve as the mount point, add it
                    to <codeph><xref href="http://linux.die.net/man/5/fstab" format="html"
                            scope="external">/etc/fstab</xref></codeph>, and mount the EBS
                    volume.</cmd>
                <info>
                    <note type="tip">For detailed instructions on mounting volumes with quotas, see
                            <b>Enabling Filesystem Quotas</b>.</note>
                </info>
            </step>
            <step>
                <cmd>To move your data to the new filesystem, run the <b><codeph>kato
                            relocate</codeph></b> command as the <codeph><keyword
                            keyref="defaultSysUser"/></codeph> user.</cmd>
                <info>
                    <note type="tip">For detailed instructions, see the <b>Relocating Services,
                            Droplets, and Containers</b> section.</note>
                </info>
            </step>
        </steps>
    </taskbody>
</task>
