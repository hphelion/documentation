
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Table of Contents Introduction HPE Helion OpenStack 2.0 Concepts Cloud Control Planes Control Planes and Regions Services Server Roles Disk Model Servers Server Groups Server Groups and Failure Zones ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: Input Model"></meta><meta name="DC.subject" content="Kilo, Firewall"></meta><meta name="keywords" content="Kilo, Firewall"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="input_model"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: Input Model</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="input_model">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

  <h1 class="title topictitle1">HPE Helion OpenStack<sup>®</sup> 2.0: Input Model</h1>

  
  <div class="body conbody">
    <div class="section" id="input_model__toc"><h2 class="title sectiontitle">Table of Contents</h2>
      <ul class="ul">
        <li class="li"><a class="xref" href="#input_model__introduction">Introduction</a></li>

        <li class="li"><a class="xref" href="#input_model__concepts">HPE Helion OpenStack 2.0 Concepts</a>
          <ul class="ul">
            <li class="li"><a class="xref" href="#input_model__cloud">Cloud</a></li>

            <li class="li"><a class="xref" href="#input_model__controlplanes">Control Planes</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__controlplanes_regions">Control Planes and
                    Regions</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__services">Services</a></li>

            <li class="li"><a class="xref" href="#input_model__serverroles">Server Roles</a></li>

            <li class="li"><a class="xref" href="#input_model__diskmodel">Disk Model</a></li>

            <li class="li"><a class="xref" href="#input_model__servers">Servers</a></li>

            <li class="li"><a class="xref" href="#input_model__servergroups">Server Groups</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__servergroups_failurezones">Server Groups and Failure
                    Zones</a></li>

                <li class="li"><a class="xref" href="#input_model__servergroups_networks">Server Groups and
                    Networks</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__networking">Networking</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__networkgroups">Network Groups</a>
                  <ul class="ul">
                    <li class="li"><a class="xref" href="#input_model__loadbalancers">Load Balancers</a></li>

                    <li class="li"><a class="xref" href="#input_model__networktags">Network Tags</a></li>

                  </ul>
</li>

                <li class="li"><a class="xref" href="#input_model__networks">Networks</a></li>

                <li class="li"><a class="xref" href="#input_model__interfacemodel">Interface Model</a></li>

                <li class="li"><a class="xref" href="#input_model__nicmapping">NIC Mapping</a></li>

                <li class="li"><a class="xref" href="#input_model__firewallconfiguration">Firewall
                  Configuration</a></li>

              </ul>
</li>

          </ul>
</li>

        <li class="li"><a class="xref" href="#input_model__configurationobjects">HPE Helion OpenStack 2.0 Configuration
            Objects</a>
          <ul class="ul">
            <li class="li"><a class="xref" href="#input_model__co_cloud">Cloud</a></li>

            <li class="li"><a class="xref" href="#input_model__co_controlplane">Control Plane</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__co_clusters">Clusters</a></li>

                <li class="li"><a class="xref" href="#input_model__co_resources">Resources</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__co_servers">Servers</a></li>

            <li class="li"><a class="xref" href="#input_model__co_servergroups">Server Groups</a></li>

            <li class="li"><a class="xref" href="#input_model__co_serverroles">Server Roles</a></li>

            <li class="li"><a class="xref" href="#input_model__co_diskmodels">Disk Models</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__co_volumegroups">Volume Groups</a></li>

                <li class="li"><a class="xref" href="#input_model__co_devicegroups">Device Groups</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__co_interfacemodels">Interface Models</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__co_bonddata">Bond Data</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__co_nicmappings">NIC Mappings</a></li>

            <li class="li"><a class="xref" href="#input_model__co_networkgroups">Network Groups</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__co_networktags">Network Tags</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__co_networks">Networks</a></li>

            <li class="li"><a class="xref" href="#input_model__co_firewallrules">Firewall Rules</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__co_rule">Rule</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__passthrough">Passthrough</a></li>

          </ul>
</li>

        <li class="li"><a class="xref" href="#input_model__othertopics">Other Topics</a>
          <ul class="ul">
            <li class="li"><a class="xref" href="#input_model__namegeneration">Name Generation</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__o_clusters"> Clusters</a></li>

                <li class="li"><a class="xref" href="#input_model__o_resourcenodes">Resource Nodes</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__persisteddata">Persisted Data</a>
              <ul class="ul">
                <li class="li"><a class="xref" href="#input_model__persistedserverallocations">Persisted Server
                    Allocations</a></li>

                <li class="li"><a class="xref" href="#input_model__persistedaddressallocations">Persisted Address
                    Allocations</a></li>

              </ul>
</li>

            <li class="li"><a class="xref" href="#input_model__serverallocation">Server Allocation</a></li>

            <li class="li"><a class="xref" href="#input_model__servernetworkselection">Server Network
              Selection</a></li>

            <li class="li"><a class="xref" href="#input_model__networkroutevalidation">Network Route
              Validation</a></li>

            <li class="li"><a class="xref" href="#input_model__configneutronprovidervlans">Configuring Neutron Provider
                VLANs</a></li>

          </ul>
</li>

        <li class="li"><a class="xref" href="#input_model__cpinfofiles">Configuration Processor Information Files</a>
          <ul class="ul">
            <li class="li"><a class="xref" href="#input_model__address_info_yml">Address_info.yml</a></li>

            <li class="li"><a class="xref" href="#input_model__firewall_info_yml">Firewall_info.yml</a></li>

            <li class="li"><a class="xref" href="#input_model__net_info_yml">Net_info.yml</a></li>

            <li class="li"><a class="xref" href="#input_model__route_info_yml">Route_info.yml</a></li>

            <li class="li"><a class="xref" href="#input_model__server_info_yml">Server_info.yml</a></li>

            <li class="li"><a class="xref" href="#input_model__service_info_yml">Service_info.yml</a></li>

            <li class="li"><a class="xref" href="#input_model__explain_txt">Explain.txt</a></li>

            <li class="li"><a class="xref" href="#input_model__clouddiagram_txt">CloudDiagram.txt</a></li>

          </ul>
</li>

      </ul>

    </div>

    <div class="section" id="input_model__introduction"><h2 class="title sectiontitle">Introduction</h2>
      <p class="p">This document describes how the HPE Helion OpenStack input model can be used to define and
        configure the cloud.</p>

      <p class="p">HPE Helion OpenStack ships Kilo with a set of example input models that can be used as starting
        points for defining a custom cloud.</p>

      <p class="p">The input model allows you, the cloud administrator, to describe the cloud configuration in
        terms of:</p>

      <ul class="ul">
        <li class="li">Which OpenStack services run on which server nodes</li>

        <li class="li">How individual servers are configured in terms of disk and network adapters</li>

        <li class="li">The overall network configuration of the cloud</li>

        <li class="li">Network traffic separation</li>

        <li class="li">CIDR and VLAN assignments</li>

      </ul>

      <p class="p">The input model is consumed by the Configuration Processor which parses and validates the
        input model and outputs the effective configuration that will be deployed to each server
        that makes up your cloud.</p>

      <p class="p">The document is structured as follows:</p>

      <ul class="ul">
        <li class="li"><span class="ph uicontrol">Concepts</span> - This explains the ideas behind the declarative model
          approach used in HPE Helion OpenStack 2.0 and the core concepts used in describing that
          model</li>

        <li class="li"><span class="ph uicontrol">Input Model</span> - This section provides a description of each of the
          configuration entities in the input model</li>

        <li class="li"><span class="ph uicontrol">Core Examples</span> - In this section we provide samples and
          definitions of some of the more important configuration entities</li>

      </ul>

    </div>

    <div class="section" id="input_model__concepts"><h2 class="title sectiontitle">HPE Helion OpenStack 2.0 Concepts</h2>
      <p class="p">An HPE Helion OpenStack 2.0 cloud is defined by a declarative model that is described in a
        series of configuration objects. These configuration objects are represented in YAML files
        which together constitute the various example configurations provided as templates with this
        release. These examples can be used nearly unchanged, with the exception of necessary
        changes to IP addresses and other site and hardware-specific identifiers. Alternatively, the
        examples may be customized to meet site requirements.</p>

      <p class="p">The following diagram shows the set of configuration objects and their relationships. All
        objects have a name that you may set to be something meaningful for your context. In the
        examples these names are provided in capital letters as a convention. These names have no
        significance to HPE Helion OpenStack, rather it is the relationships between them that
        define the configuration.</p>

      <p class="p"><img class="image" src="../media/inputmodel/hphelionopenstack_concepts.png"></img></p>

      <p class="p"><a class="xref" href="../media/inputmodel/hphelionopenstack_concepts_lg.png" target="_blank">Download a high-res version</a></p>

      <p class="p">The Configuration Processor reads and validates the input model described in the YAML files
        discussed above, combines it with the service definitions provided by HPE Helion OpenStack
        and any persisted state information about the current deployment to produce a set of Ansible
        variables that can be used to deploy the cloud. It also produces a set of information files
        that provide details about the configuration.</p>

      <p class="p">The relationship between the file systems on the HPE Helion OpenStack deployment server and
        the Configuration Processor is shown in the following diagram. Below the line are the
        directories that you, the cloud administrator, interact with. Above the line are the
        directories that are maintained by HPE Helion OpenStack.</p>

      <p class="p"><img class="image" src="../media/inputmodel/hphelionopenstack_directories.png"></img></p>

      <p class="p"><a class="xref" href="../media/inputmodel/hphelionopenstack_directories_lg.png" target="_blank">Download a high-res version</a></p>

      <p class="p">The input model is read from the <samp class="ph codeph">~/helion/my_cloud/definition</samp> directory.
        Although the supplied examples use separate files for each type of object in the model, the
        names and layout of the files have no significance to the Configuration Processor, it simply
        reads all of the .yml files in this directory. Cloud administrators are therefore free to
        use whatever structure is best for their context. For example, you may decide to maintain
        separate files or sub-directories for each physical rack of servers.</p>

      <p class="p">As mentioned, the examples use the conventional upper casing for object names, but these
        strings are used only to define the relationship between objects. They have no specific
        significance to the Configuration Processor.</p>

    </div>

    <div class="section" id="input_model__cloud"><h2 class="title sectiontitle">Cloud</h2>
      <p class="p">The Cloud definition includes a few top-level configuration values such as the name of the
        cloud, the host prefix, details of external services (NTP, DNS, SMTP) and the firewall
        settings.</p>

      <p class="p">The location of the cloud configuration file also tells the Configuration Processor where
        to look for the files that define all of the other objects in the input model.</p>

    </div>

    <div class="section" id="input_model__controlplanes"><h2 class="title sectiontitle">Control Planes</h2>
      <p class="p"><em class="ph i">A control-plane runs one or more <span class="ph uicontrol">services</span> distributed across
            <span class="ph uicontrol">clusters</span> and <span class="ph uicontrol">resource groups</span></em>.</p>

      <p class="p"><em class="ph i">A control-plane uses servers with a particular
        <span class="ph uicontrol">server-role</span></em>.</p>

      <p class="p">A <span class="ph uicontrol">control-plane</span> provides the operating environment for a set of
          <span class="ph uicontrol">services</span>; normally consisting of a set of shared services (MySQL,
        RabbitMQ, HA Proxy, Apache, etc), OpenStack control services (API, schedulers, etc) and the
          <span class="ph uicontrol">resources</span> they are managing (compute, storage, etc).</p>

      <p class="p">A simple cloud may have a single <span class="ph uicontrol">control-plane</span> which runs all of the
          <span class="ph uicontrol">services</span>. A more complex cloud may have multiple
          <span class="ph uicontrol">control-planes</span> with a relationship between them. (Note that HP
        Helion OpenStack 2.0 only supports a single control-plane). Services that need to consume
        (use) another service (such as Neutron consuming MySQL, Nova consuming Neutron) always use
        the service within the same <span class="ph uicontrol">control-plane</span> before looking in any
        related <span class="ph uicontrol">control-planes</span>. It is one of the functions of the
        Configuration Processor to resolve these relationships and make sure that each
        consumer/service is provided with the configuration details to connect to the appropriate
        provider/service.</p>

      <p class="p">Each <span class="ph uicontrol">control-plane</span> is structured as <span class="ph uicontrol">clusters</span>
        and <span class="ph uicontrol">resources</span>. The <span class="ph uicontrol">clusters</span> are typically used
        to host the OpenStack services that manage the cloud such as API servers, database servers,
        Neutron agents, and Swift proxies, while the <span class="ph uicontrol">resources</span> are used to
        host the scale-out OpenStack services such as Nova-Compute or Swift-Object services. This is
        a representation convenience rather than a strict rule, for example it is possible to run
        the Swift-Object service in the management cluster in a smaller-scale cloud that is not
        designed for scale-out object serving.</p>

      <p class="p">A cluster can contain one or more <span class="ph uicontrol">servers</span> and you can have one or
        more <span class="ph uicontrol">clusters</span> depending on the capacity and scalability needs of the
        cloud that you are building. Spreading services across multiple
          <span class="ph uicontrol">clusters</span> provides greater scalability, but it requires a greater
        number of physical servers. A common pattern for a large cloud is to run high data volume
        services such as monitoring and logging in a separate cluster. A cloud with a high object
        storage requirement will typically also run the Swift service in its own cluster.</p>

      <p class="p">Clusters in this context are a mechanism for grouping service components in physical
        servers, but all instances of a component in a <span class="ph uicontrol">control-plane</span> work
        collectively. For example, if HA Proxy is configured to run on multiple clusters within the
        same <span class="ph uicontrol">control-plane</span> then all of those instances will work as a single
        instance of the ha-proxy service.</p>

      <p class="p">Both <span class="ph uicontrol">clusters</span> and <span class="ph uicontrol">resources</span> define the type
        (via a list of <span class="ph uicontrol">server-roles</span>) and number of servers (min and max or
        count) they require.</p>

      <p class="p">The <span class="ph uicontrol">control-plane</span> can also define a list of failure-zones
          (<span class="ph uicontrol">server-groups</span>) from which to allocate servers.</p>

    </div>

    <div class="section" id="input_model__controlplanes_regions"><h2 class="title sectiontitle">Control Planes and Regions</h2>
      <p class="p">A region in OpenStack terms is a collection of URLs that together provide a set of services
        (Nova, Neutron, Swift, etc). Regions are represented in the Keystone identity service
        catalog and clients can decide which region they want to use.</p>

      <p class="p">For the owner of a cloud, regions provide a way of segmenting resources for scale,
        resilience, and isolation. However, each region needs some resources for its
          <span class="ph uicontrol">control-plane</span>.</p>

      <p class="p">Regions don't have to be disjointed; for example, you can have a Swift service shared
        across more than one region, in which case the Swift URL for both regions will be the same.
        However, some services, such as Nova, Neutron, and Cinder, do have to be co-located in the
        same region.</p>

      <p class="p">Thus in the cloud model we say that a <span class="ph uicontrol">control-plane</span> may provide some
        or all of the endpoints for one or more Regions.</p>

    </div>

    <div class="section" id="input_model__services"><h2 class="title sectiontitle">Services</h2>
      <p class="p"><em class="ph i">A <span class="ph uicontrol">control-plane</span> runs one or more
          <span class="ph uicontrol">services</span>.</em></p>

      <p class="p">A service is the collection of <span class="ph uicontrol">service-components</span> that provide a
        particular feature; for example, Nova provides the compute service and consists of the
        following service-components: nova-api, nova-scheduler, nova-conductor, nova-novncproxy, and
        nova-compute. Some services, like the authentication/identity service Keystone, only consist
        of a single service-component.</p>

      <p class="p">To define your cloud, all you need to know about a service are the names of the
          <span class="ph uicontrol">service-components</span>. The details of the services themselves and how
        they interact with each other is captured in service definition files provided by HPE Helion
        OpenStack.</p>

      <p class="p">When specifying your HPE Helion OpenStack cloud you have to decide where components will
        run and how they connect to the networks. For example, should they all run in one
          <span class="ph uicontrol">control-plane</span> sharing common services or be distributed across
        multiple <span class="ph uicontrol">control-planes</span> to provide separate instances of some
        services? The HPE Helion OpenStack supplied examples provide solutions for some typical
        configurations.</p>

      <p class="p">Where services run is defined in the <span class="ph uicontrol">control-plane</span>. How they connect
        to networks is defined in the <span class="ph uicontrol">network-groups</span>.</p>

    </div>

    <div class="section" id="input_model__serverroles"><h2 class="title sectiontitle">Server Roles</h2>
      <p class="p"><em class="ph i"><span class="ph uicontrol">Clusters</span> and <span class="ph uicontrol">resources</span> use
            <span class="ph uicontrol">servers</span> with a particular
        <span class="ph uicontrol">server-role</span>.</em></p>

      <p class="p">You're going to be running the services on physical <span class="ph uicontrol">servers</span>, and
        you're going to need a way to specify which type of servers you want to use where. This is
        defined via the <span class="ph uicontrol">server-role</span>. Each <span class="ph uicontrol">server-role</span>
        describes how to configure the physical aspects of a server to fulfill the needs of a
        particular role. You'll generally use a different role whenever the servers are physically
        different (have different disks or network interfaces) or if you want to use some specific
        servers in a particular role (for example to choose which of a set of identical servers are
        to be used in the control plane).</p>

      <div class="p">Each <span class="ph uicontrol">server-role</span> has a relationship to two other entities, the
        disk-model and the interface-model: <ul class="ul">
          <li class="li">The <span class="ph uicontrol">disk-model</span> specifies how to configure and use its local
            storage. This is described in the next section.</li>

          <li class="li">The <span class="ph uicontrol">interface-model</span> describes how its network interfaces are to
            be configured and used. This is covered in more details in the networking section.</li>

        </ul>

      </div>

    </div>

    <div class="section" id="input_model__diskmodel"><h2 class="title sectiontitle">Disk Model</h2>
      <p class="p"><em class="ph i">Each physical disk device is associated with a <span class="ph uicontrol">device-group</span> or a
            <span class="ph uicontrol">volume-group</span>.</em></p>

      <p class="p"><em class="ph i"><span class="ph uicontrol">Device-groups</span> are consumed by
          <span class="ph uicontrol">services</span>.</em></p>

      <p class="p"><em class="ph i"><span class="ph uicontrol">Volume-groups</span> are divided into
            <span class="ph uicontrol">logical-volumes</span>.</em></p>

      <p class="p"><em class="ph i"><span class="ph uicontrol">Logical-volumes</span> are mounted as file systems or consumed by
          services.</em></p>

      <p class="p">Disk-models define how local storage is to be configured and presented to
          <span class="ph uicontrol">services</span>. Disk-models are identified by a name, which you will
        specify. The HPE Helion OpenStack examples provide some typical configurations. As this is
        an area that varies with respect to the services that are hosted on a server and the number
        of disks available, it is impossible to cover all possible permutations you may need to
        express via modifications to the examples.</p>

      <p class="p">Within a <span class="ph uicontrol">disk-model</span>, disk devices are assigned to either a
          <span class="ph uicontrol">device-group</span> or a <span class="ph uicontrol">volume-group</span>.</p>

      <p class="p"><img class="image" src="../media/inputmodel/hphelionopenstack_diskmodels.png"></img></p>

      <p class="p"><a class="xref" href="../media/inputmodel/hphelionopenstack_diskmodels_lg.png" target="_blank">Download a high-res version</a></p>

      <p class="p">A <span class="ph uicontrol">device-group</span> is a set of one or more disks that are to be consumed
        directly by a service. For example, a set of disks to be used by Swift. The device-group
        identifies the list of disk devices, the service, and a few service-specific attributes that
        tell the service about the intended use (for example, in the case of Swift this is the ring
        names). When a device is assigned to a device-group, the associated service is responsible
        for the management of the disks. This management includes the creation and mounting of file
        systems. (Swift can provide additional data integrity when it has full control over the file
        systems and mount points.)</p>

      <p class="p">A <span class="ph uicontrol">volume-group</span> is used to present disk devices in a LVM volume
        group. It also contains details of the logical volumes to be created including the file
        system type and mount point. Logical volume sizes are expressed as a percentage of the total
        capacity of the volume group. A <span class="ph uicontrol">logical-volume</span> can also be consumed
        by a service in the same way as a <span class="ph uicontrol">device-group</span>. This allows services
        to manage their own devices on configurations that have limited numbers of disk drives.</p>

    </div>

    <div class="section" id="input_model__servers"><h2 class="title sectiontitle">Servers</h2>
      <p class="p"><em class="ph i"><span class="ph uicontrol">Servers</span> have a <span class="ph uicontrol">server-role</span> which
          determines how they will be used in the cloud.</em></p>

      <p class="p"><span class="ph uicontrol">Servers</span> (in the disk model) enumerate the resources available for
        your cloud. In addition, in this definition file you can either provide HPE Helion OpenStack
        with all of the details it needs to PXE boot and install an operating system onto the
        server, or, if you prefer to use your own operating system installation tooling you can
        simply provide the details needed to be able to SSH into the servers and start the
        deployment.</p>

      <p class="p">The address specified for the server will be the one used by HPE Helion OpenStack for
        lifecycle management and must be part of a network which is in the input model. If you are
        using HPE Helion OpenStack to install the operating system this network must be an untagged
        VLAN. The first server must be installed manually from the HPE Helion OpenStack ISO and this
        server must be included in the input model as well.</p>

      <p class="p">In addition to the network details used to install or connect to the server, each server
        defines what its <span class="ph uicontrol">server-role</span> is and to which
          <span class="ph uicontrol">server-group</span> it belongs.</p>

    </div>

    <div class="section" id="input_model__servergroups"><h2 class="title sectiontitle">Server Groups</h2>
      <p class="p"><em class="ph i">A <span class="ph uicontrol">server</span> is associated with a
          <span class="ph uicontrol">server-group</span>.</em></p>

      <p class="p"><em class="ph i">A <span class="ph uicontrol">control-plane</span> can use <span class="ph uicontrol">server-groups</span> as
          failure zones for server allocation.</em></p>

      <p class="p"><em class="ph i">A <span class="ph uicontrol">server-group</span> may be associated with a list of
            <span class="ph uicontrol">networks</span>.</em></p>

      <p class="p"><em class="ph i">A <span class="ph uicontrol">server-group</span> can contain other
            <span class="ph uicontrol">server-groups</span>.</em></p>

      <p class="p">The practice of locating physical servers in a number of racks or enclosures in a data
        center is common. Such racks generally provide a degree of physical isolation that allows
        for separate power and/or network connectivity.</p>

      <p class="p">In the HPE Helion OpenStack model we support this configuration by allowing you to define a
        hierarchy of <span class="ph uicontrol">server-groups</span>. Each <span class="ph uicontrol">server</span> is
        associated with one <span class="ph uicontrol">server-group</span>, normally at the bottom of the
        hierarchy.</p>

      <p class="p"><span class="ph uicontrol">Server-groups</span> are an optional part of the input model – if you don’t
        define any then all <span class="ph uicontrol">servers</span> and <span class="ph uicontrol">networks</span> will
        be allocated as if they are part of the same <span class="ph uicontrol">server-group</span>.</p>

    </div>

    <div class="section" id="input_model__servergroups_failurezones"><h2 class="title sectiontitle">Server Groups and Failure Zones</h2>
      <p class="p">A <span class="ph uicontrol">control-plane</span> defines a list of
          <span class="ph uicontrol">server-groups</span> as the failure zones from which it wants to use
        servers. All servers in a <span class="ph uicontrol">server-group</span> listed as a failure zone in
        the <span class="ph uicontrol">control-plane</span> and any <span class="ph uicontrol">server-groups</span> they
        contain are considered part of that failure zone for allocation purposes. The following
        example shows how three levels of <span class="ph uicontrol">server-groups</span> can be used to model
        a failure zone consisting of multiple racks, each of which in turn contains a number of
          <span class="ph uicontrol">servers</span>.</p>

      <p class="p"><img class="image" src="../media/inputmodel/hphelionopenstack_servergroups.png"></img></p>

      <p class="p"><a class="xref" href="../media/inputmodel/hphelionopenstack_servergroups_lg.png" target="_blank">Download a high-res version</a></p>

      <p class="p">When allocating <span class="ph uicontrol">servers</span>, the Configuration Processor will traverse
        down the hierarchy of <span class="ph uicontrol">server-groups</span> listed as failure zones until it
        can find an available server with the required <span class="ph uicontrol">server-role</span>. If the
        allocation policy is defined to be strict, it will allocate <span class="ph uicontrol">servers</span>
        equally across each of the failure zones. A <span class="ph uicontrol">cluster</span> or
          <span class="ph uicontrol">resource-group</span> can also independently specify the failure zones it
        wants to use if needed.</p>

    </div>

    <div class="section" id="input_model__servergroups_networks"><h2 class="title sectiontitle">Server Groups and Networks</h2>
      <p class="p">Each L3 <span class="ph uicontrol">network</span> in a cloud must be associated with all or some of
        the <span class="ph uicontrol">servers</span>, typically following a physical pattern (such as having
        separate networks for each rack or set of racks). This is also represented in the HPE Helion
        OpenStack model via <span class="ph uicontrol">server-groups</span>, each group lists zero or more
        networks to which <span class="ph uicontrol">servers</span> associated with
          <span class="ph uicontrol">server-groups</span> at or below this point in the hierarchy are
        connected.</p>

      <p class="p">When the Configuration Processor needs to resolve the specific
          <span class="ph uicontrol">network</span> a <span class="ph uicontrol">server</span> should be configured to
        use, it traverses up the hierarchy of <span class="ph uicontrol">server-groups</span>, starting with
        the group the server is directly associated with, until it finds a server-group that lists a
        network in the required network group.</p>

      <p class="p">The level in the <span class="ph uicontrol">server-group</span> hierarchy at which a
          <span class="ph uicontrol">network</span> is associated will depend on the span of connectivity it
        must provide. In the above example there might be networks in some
          <span class="ph uicontrol">network-groups</span> which are per rack (i.e. Rack 1 and Rack 2 list
        different networks from the same <span class="ph uicontrol">network-group</span>) and
          <span class="ph uicontrol">networks</span> in a different <span class="ph uicontrol">network-group</span> that
        span failure zones (the network used to provide floating IP addresses to virtual machines
        for example).</p>

    </div>

    <div class="section" id="input_model__networking"><h2 class="title sectiontitle">Networking</h2>
      <p class="p">In addition to the mapping of <span class="ph uicontrol">services</span> to specific
          <span class="ph uicontrol">clusters</span> and <span class="ph uicontrol">resources</span> we must also be able
        to define how the <span class="ph uicontrol">services</span> connect to one or more
          <span class="ph uicontrol">networks</span>.</p>

      <p class="p">In a simple cloud there may be a single L3 network but more typically there are functional
        and physical layers of network separation that need to be expressed.</p>

      <p class="p">Functional network separation provides different networks for different types of traffic;
        for example, it is common practice in even small clouds to separate the External APIs that
        users will use to access the cloud and the external IP addresses that users will use to
        access their virtual machines. In more complex clouds it's common to also separate out
        virtual networking between virtual machines, block storage traffic, and volume traffic onto
        their own sets of networks. In the input model, this level of separation is represented by
          <span class="ph uicontrol">network-groups</span>.</p>

      <p class="p">Physical separation is required when there are separate L3 network segments providing the
        same type of traffic; for example, where each rack uses a different subnet. This level of
        separation is represented in the input model by the <span class="ph uicontrol">networks</span> within
        each <span class="ph uicontrol">network-group</span>.</p>

    </div>

    <div class="section" id="input_model__networkgroups"><h2 class="title sectiontitle">Network Groups</h2>
      <p class="p"><em class="ph i">Service endpoints attach to <span class="ph uicontrol">networks</span> in a specific
            <span class="ph uicontrol">network-group</span>.</em></p>

      <p class="p"><em class="ph i"><span class="ph uicontrol">Network-groups</span> can define routes to other
            <span class="ph uicontrol">networks</span>.</em></p>

      <p class="p"><em class="ph i"><span class="ph uicontrol">Network-groups</span> encapsulate the configuration for
            <span class="ph uicontrol">services</span> via <span class="ph uicontrol">network-tags</span></em></p>

      <p class="p">A <span class="ph uicontrol">network-group</span> defines the traffic separation model and all of the
        properties that are common to the set of L3 networks that carry each type of traffic. They
        define where services are attached to the network model and the routing within that
        model.</p>

      <p class="p">In terms of <span class="ph uicontrol">service</span> connectivity, all that has to be captured in the
          <span class="ph uicontrol">network-groups</span> definition is the same service-component names that
        are used when defining <span class="ph uicontrol">control-planes</span>. HPE Helion OpenStack also
        allows a default attachment to be used to specify "all service-components" that aren't
        explicitly connected to another <span class="ph uicontrol">network-group</span>. So, for example, to
        isolate Swift traffic, the swift-account, swift-container, and swift-object service
        components are attached to an "Object" <span class="ph uicontrol">network-group</span> and all other
        services are connected to "Management" <span class="ph uicontrol">network-group</span> via the default
        relationship.</p>

      <p class="p">The details of how each service connects, such as what port it uses, if it should be behind
        a load balancer, if and how it should be registered in Keystone, and so forth, are defined
        in the service definition files provided by HPE Helion OpenStack.</p>

      <p class="p">In any configuration with multiple networks, controlling the routing is a major
        consideration. In HPE Helion OpenStack, routing is controlled at the
          <span class="ph uicontrol">network-group</span> level. First, all <span class="ph uicontrol">networks</span> are
        configured to provide the route to any other <span class="ph uicontrol">networks</span> in the same
          <span class="ph uicontrol">network-group</span>. In addition, a <span class="ph uicontrol">network-group</span>
        are configured to provide the route any other <span class="ph uicontrol">networks</span> in the same
          <span class="ph uicontrol">network-group</span>; for example, if the internal APIs are in a dedicated
          <span class="ph uicontrol">network-group</span> (a common configuration in a complex network because
        a network group with load balancers cannot be segmented) then other
          <span class="ph uicontrol">network-groups</span> may need to include a route to the internal API
          <span class="ph uicontrol">network-group</span> so that services can access the internal API
        endpoints. Routes may also be required to define how to access an external storage network
        or to define a general default route.</p>

      <p class="p">As part of the HPE Helion OpenStack deployment, networks are configured to act as the
        default route for all traffic that was received via that network (so that response packets
        always return via the network the request came from).</p>

      <p class="p">Note that HPE Helion OpenStack will configure the routing rules on the servers it deploys
        and will validate that the routes between services exist in the model, but ensuring that
        gateways can provide the required routes is the responsibility of your network
        configuration. The Configuration Processor provides information about the routes it is
        expecting to be configured.</p>

      <p class="p">For a detailed description of how the Configuration Processor validates routes, refer to
          <a class="xref" href="input_model.html#input_model__networkroutevalidation">Network Route
          Validation</a>.</p>

    </div>

    <div class="section" id="input_model__loadbalancers"><h2 class="title sectiontitle">Load Balancers</h2>
      <p class="p"><span class="ph uicontrol">Load-balancers</span> provide a specific type of routing and are also
        defined in <span class="ph uicontrol">network-groups</span> as a relationship between the virtual IP
        address (VIP) on a network in one <span class="ph uicontrol">network group</span> and a set of service
        endpoints (which may be on <span class="ph uicontrol">networks</span> in the same or a different
          <span class="ph uicontrol">network-group</span>).</p>

      <p class="p">Each <span class="ph uicontrol">load-balancer</span> is defined as part of the
          <span class="ph uicontrol">network-group</span> where the virtual IP will be presented – it follows
        that a <span class="ph uicontrol">network-group</span> containing a
          <span class="ph uicontrol">load-balancer</span> can only have one <span class="ph uicontrol">network</span>
        associated to it.</p>

      <p class="p">The <span class="ph uicontrol">load-balancer</span> definition includes a list of
          <span class="ph uicontrol">service-components</span> and endpoint roles it will provide A virtual IP
        for. This model allows service-specific <span class="ph uicontrol">load-balancers</span> to be defined
        on different <span class="ph uicontrol">network-groups</span>. A "default" value is used to express
        "all service-components" which require a virtual IP address and are not explicitly
        configured in another <span class="ph uicontrol">load-balancer</span> configuration. The details of how
        the <span class="ph uicontrol">load-balancer</span> should be configured for each service, such as
        which ports to use, how to check for service liveness, etc, are provided in the HPE Helion
        OpenStack supplied service definition files.</p>

      <p class="p">The list of endpoint roles for a <span class="ph uicontrol">load-balancer</span> make it possible to
        configure separate <span class="ph uicontrol">load-balancers</span> for public and internal access to
        services, and the Configuration Processor uses this information to both ensure the correct
        registrations in Keystone and to make sure the internal traffic is routed to the correct
        endpoint. HPE Helion OpenStack services are configured to only connect to other services via
        internal virtual IP addresses and endpoints, allowing the name and security certificate of
        public endpoints to be controlled by the customer and set to values that may not be
        resolvable/accessible from the servers making up the cloud.</p>

      <p class="p">Note that each <span class="ph uicontrol">load-balancer</span> defined in the input model will be
        allocated a separate virtual IP address even when the load-balancers are part of the same
          <span class="ph uicontrol">network-group</span>. Because of the need to be able to separate both
        public and internal access, HPE Helion OpenStack will not allow a single
          <span class="ph uicontrol">load-balancer</span> to provide both public and internal access.
          <span class="ph uicontrol">Load-balancers</span> in this context are logical entities (sets of rules
        to transfer traffic from a virtual IP address to one or more endpoints). Multiple
          <span class="ph uicontrol">load-balancers</span> may be implemented by the same service within the
        cloud (e.g. a HA Proxy cluster).</p>

      <p class="p">The following diagram shows a possible configuration in which the hostname associated with
        the public URL has been configured to resolve to a firewall controlling external access to
        the cloud. Within the cloud, HPE Helion OpenStack services are configured to use the
        internal URL to access a separate virtual IP address.</p>

      <p class="p"><img class="image" src="../media/inputmodel/hphelionopenstack_loadbalancers.png"></img></p>

      <p class="p"><a class="xref" href="../media/inputmodel/hphelionopenstack_loadbalancers_lg.png" target="_blank">Download a high-res version</a></p>

    </div>

    <div class="section" id="input_model__networktags"><h2 class="title sectiontitle">Network Tags</h2>
      <p class="p">Network tags are defined by some HPE Helion OpenStack
          <span class="ph uicontrol">service-components</span> and are used to convey information between the
        network model and the service, allowing the dependent aspects of the service to be
        automatically configured. For example, an option in a service configuration file that needs
        the IP address of the corresponding network device on a server where that service-component
        is installed.</p>

      <p class="p">Network tags also convey requirements a service may have for aspects of the server network
        configuration, for example, that a bridge is required on the corresponding network device on
        a server where that service-component is installed.</p>

      <p class="p">See <a class="xref" href="#input_model__co_networktags">Network Tags</a> for more information on
        specific tags and their usage.</p>

    </div>

    <div class="section" id="input_model__networks"><h2 class="title sectiontitle">Networks</h2>
      <p class="p"><em class="ph i">A <span class="ph uicontrol">network</span> is part of a
        <span class="ph uicontrol">network-group</span>.</em></p>

      <p class="p"><span class="ph uicontrol">Networks</span> are fairly simple definitions. Each
          <span class="ph uicontrol">network</span> defines the details of its VLAN, optional address details
        (CIDR, start and end address, gateway address), and which
          <span class="ph uicontrol">network-group</span> it is a member of.</p>

    </div>

    <div class="section" id="input_model__interfacemodel"><h2 class="title sectiontitle">Interface Model</h2>
      <p class="p"><em class="ph i">A <span class="ph uicontrol">server-role</span> identifies an
            <span class="ph uicontrol">interface-model</span> that describes how its network interfaces are to
          be configured and used.</em>&gt;</p>

      <p class="p">Networks are mapped onto specific network interfaces via an
          <span class="ph uicontrol">interface-model</span>, which describes the network devices that need to
        be created (bonds, ovs-bridges, etc), their properties, and the
          <span class="ph uicontrol">network-groups</span> with which they are associated.</p>

      <p class="p">An <span class="ph uicontrol">interface-model</span> acts like a template; it can define how some or
        all of the <span class="ph uicontrol">network-groups</span> are to be mapped for a particular
        combination of physical NICs. However, it is the <span class="ph uicontrol">service-components</span>
        on each server that determine which <span class="ph uicontrol">network-groups</span> are required and
        hence which interfaces and <span class="ph uicontrol">networks</span> will be configured. This means
        that <span class="ph uicontrol">interface-models</span> can be shared between different
          <span class="ph uicontrol">server-roles</span>. For example, an API role and a database role may
        share an interface model even though they may have different disk models and they will
        require a different subset of the <span class="ph uicontrol">network-groups</span>.</p>

      <p class="p">Within an <span class="ph uicontrol">interface-model</span>, physical ports are identified by a device
        name, which in turn is resolved to a physical port via a <span class="ph uicontrol">nic-mapping</span>.
        To allow different physical servers to share an <span class="ph uicontrol">interface-model</span>, the
          <span class="ph uicontrol">nic-mapping</span> is defined as a property of each
          <span class="ph uicontrol">server</span>.</p>

    </div>

    <div class="section" id="input_model__nicmapping"><h2 class="title sectiontitle">NIC Mapping</h2>
      <p class="p">When a <span class="ph uicontrol">server</span> has more than a single physical network port, a
          <span class="ph uicontrol">nic-mapping</span> is required to unambiguously identify each port.
        Standard Linux mapping of ports to interface names at the time of initial discovery (e.g.
        eth0, eth1, eth2, ...) is not uniformly consister from server to server, so a mapping of PCI
        bus address to interface name is instead.</p>

      <p class="p">This level of abstraction will also allow network functions on SRIOV-capable network cards
        to be used for network connections and consumed by services in a future release.</p>

    </div>

    <div class="section" id="input_model__firewallconfiguration"><h2 class="title sectiontitle">Firewall Configuration</h2>
      <p class="p">The Configuration Processor uses the details it has about which networks and ports
          <span class="ph uicontrol">service-components</span> use to create a set of firewall rules for each
        server. The model allows additional user-defined rules on a per
          <span class="ph uicontrol">network-group</span> basis.</p>

    </div>

    <div class="section" id="input_model__configurationobjects"><h2 class="title sectiontitle">HPE Helion OpenStack 2.0 Configuration Objects</h2>
    </div>

    <div class="section" id="input_model__co_cloud"><h2 class="title sectiontitle">Cloud</h2>
      <p class="p">The top-level cloud configuration file, <span class="ph uicontrol">cloudConfig.yml</span>, defines
        some global values for the HPE Helion OpenStack Cloud, as described in the table below.</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__cloud_config" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" id="d26815e1495">Key</th>

              <th class="entry" valign="top" id="d26815e1498">Value Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" headers="d26815e1495 ">name</td>

              <td class="entry" valign="top" headers="d26815e1498 ">An administrator-defined name for the cloud</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e1495 ">hostname-data (optional)</td>

              <td class="entry" valign="top" headers="d26815e1498 ">Provides control over some parts of the generated names (see <a class="xref" href="#input_model__namegeneration">Name Generation</a>) <div class="p">Consists of two
                  values: <ul class="ul">
                    <li class="li">host-prefix - default is to use the cloud name (above)</li>

                    <li class="li">member-prefix - default is "-m"</li>

                  </ul>
</div>
</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e1495 ">ntp-servers (optional)</td>

              <td class="entry" valign="top" headers="d26815e1498 ">A list of external NTP servers your cloud has access to. If specified by name
                then the names need to be resolvable via the external DNS nameservers you specify in
                the next section. All servers running the "ntp-server" component will be configured
                to use these external NTP servers.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e1495 ">dns-settings (optional)</td>

              <td class="entry" valign="top" headers="d26815e1498 ">DNS configuration data that will be applied to all servers. See example
                configuration for a full list of values.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e1495 ">smtp-settings (optional)</td>

              <td class="entry" valign="top" headers="d26815e1498 ">SMTP client configuration data that will be applied to all servers. See example
                configurations for a full list of values.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e1495 ">firewall-settings (optional)</td>

              <td class="entry" valign="top" headers="d26815e1498 ">Used to enable/disable the firewall feature and to enable/disable logging of
                dropped packets.</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>

    <div class="section" id="input_model__co_controlplane"><h2 class="title sectiontitle">Control Plane</h2>
      <p class="p">The snippet below shows the start of the control plane definition file.</p>

      <pre class="pre codeblock">---
  product:
     version: 2
        
  control-planes:
     - name: control-plane-1
       control-plane-prefix: cp1
       region-name: region1
       failure-zones:
         - AZ1
         - AZ2
         - AZ3
       common-service-components:
         - logging-producer
         - monasca-agent
         - freezer-agent
         - stunnel
         - lifecycle-manager-target
       clusters:
         - name: cluster1
           cluster-prefix: c1
           server-role: CONTROLLER-ROLE
           member-count: 3
           allocation-policy: strict
           service-components:
             - lifecycle-manager
             - ntp-server
             - swift-ring-builder
             - mysql
             - ip-cluster
             ...
        
       resources:
         - name: compute
           resource-prefix: comp
           server-role: COMPUTE-ROLE
           allocation-policy: any
           min-count: 0
           service-components:
              - ntp-client
              - nova-compute
              - nova-compute-kvm
              - neutron-l3-agent
              ...</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__control_plane" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e1603">Key</th>

                <th class="entry" valign="top" id="d26815e1606">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">name</td>

                <td class="entry" valign="top" headers="d26815e1606 ">This name identifies the control plane. This value is used to persist server
                  allocations (see <a class="xref" href="#input_model__persisteddata">Persisted Data</a>)
                  and cannot be changed once servers have been allocated.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">control-plane-prefix (optional)</td>

                <td class="entry" valign="top" headers="d26815e1606 ">The control-plane-prefix is used as part of the hostname (see <a class="xref" href="#input_model__namegeneration">Name Generation</a>). If not specified,
                  the control plane name is used.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">region-name</td>

                <td class="entry" valign="top" headers="d26815e1606 ">This name identifies the Keystone region within which services in the control
                  plane will be registered.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">common-service-components (optional)</td>

                <td class="entry" valign="top" headers="d26815e1606 ">This lists a set of service components that run on all servers in the control
                  plane (clusters and resource pools)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">failure-zones (optional)</td>

                <td class="entry" valign="top" headers="d26815e1606 ">A list of <span class="ph uicontrol">server-group</span> names that servers for this
                  control plane will be allocated from. If no failure-zones are specified, only
                  servers not associated with a <span class="ph uicontrol">server-group</span> will be used.
                  (see <a class="xref" href="#input_model__servergroups_failurezones">Server Groups and Failure
                    Zones</a> for a description of server-groups as failure zones.)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">clusters</td>

                <td class="entry" valign="top" headers="d26815e1606 ">A list of clusters for this control plane (see <a class="xref" href="#input_model__co_clusters">Clusters</a>).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1603 ">resources</td>

                <td class="entry" valign="top" headers="d26815e1606 ">A list of resource groups for this control plane (see <a class="xref" href="#input_model__co_resources">Resources</a>).</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_clusters"><h2 class="title sectiontitle">Clusters</h2>
      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__clusters" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e1726">Key</th>

                <th class="entry" valign="top" id="d26815e1729">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">name</td>

                <td class="entry" valign="top" headers="d26815e1729 ">Cluster and resource names must be unique within a control plane. This value
                  is used to persist server allocations (see <a class="xref" href="#input_model__persisteddata">Persisted Data</a>) and cannot be changed once servers have been
                  allocated.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">cluster-prefix (optional)</td>

                <td class="entry" valign="top" headers="d26815e1729 ">The cluster prefix is used in the hostname (see <a class="xref" href="#input_model__namegeneration">Name Generation</a>). If not supplied then
                  the cluster name is used.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">server-role</td>

                <td class="entry" valign="top" headers="d26815e1729 ">This can either be a string (for a single role) or a list of roles. Only
                  servers matching one of the specified <span class="ph uicontrol">server-roles</span> will be
                  allocated to this cluster. (see <a class="xref" href="#input_model__serverroles">Server
                    Roles</a> for a description of server roles)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">service-components</td>

                <td class="entry" valign="top" headers="d26815e1729 ">The list of <span class="ph uicontrol">service-components</span> to be deployed on the
                  servers allocated for the cluster. (The common-service-components for the control
                  plane are also deployed.)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">
                  <p class="p">member-count</p>

                  <p class="p">min-count</p>

                  <p class="p">max-count</p>

                  <p class="p">(all optional)</p>

                </td>

                <td class="entry" valign="top" headers="d26815e1729 ">
                  <p class="p">Defines the number of servers to add to the cluster.</p>

                  <p class="p">The number of servers that can be supported in a cluster depends on the
                    services it is running. For example MySQL and RabbitMQ can only be deployed on
                    clusters on 1 (non-HA) or 3 (HA) servers. Other services may support different
                    sizes of cluster.</p>

                  <p class="p">If min-count is specified, then at least that number of servers will be
                    allocated to the cluster. If min-count is not specified it defaults to a value
                    of 1.</p>

                  <p class="p">If max-count is specified, then the cluster will be limited to that number of
                    servers. If max-count is not specified then all servers matching the required
                    role and failure-zones will be allocated to the cluster.</p>

                  <p class="p">Specifying member-count is equivalent to specifying min-count and max-count
                    with the same value.</p>
</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">failure-zones (optional)</td>

                <td class="entry" valign="top" headers="d26815e1729 ">A list of <span class="ph uicontrol">server-groups</span> that servers will be allocated
                  from. If specified, it overrides the list of values specified for the
                  control-plane. If not specified, the control-plane value is used. (see <a class="xref" href="#input_model__servergroups_failurezones">Server Groups and Failure
                    Zones</a> for a description of server groups as failure zones).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1726 ">allocation-policy (optional)</td>

                <td class="entry" valign="top" headers="d26815e1729 ">
                  <p class="p">Defines how failure zones will be used when allocating servers.</p>

                  <p class="p"><strong class="ph b">strict</strong>: Server allocations will be distributed across all specified
                    failure zones. (if max-count is not a whole number, an exact multiple of the
                    number of zones, then some zones may provide one more server than other
                    zones)</p>

                  <p class="p"><strong class="ph b">any</strong>: Server allocations will be made from any combination of failure
                    zones.</p>

                  <p class="p">The default allocation-policy for a cluster is <em class="ph i">strict</em></p>
. </td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_resources"><h2 class="title sectiontitle">Resources</h2>
      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__tb_resources" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e1892">Key</th>

                <th class="entry" valign="top" id="d26815e1895">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">name</td>

                <td class="entry" valign="top" headers="d26815e1895 "><p class="p">The name of this group of resources. Cluster names and resource-node names
                    must be unique within a control plane. Additionally, clusters and resources
                    cannot share names within a control-plane.</p>
 This value is used to persist
                  server allocations (see <a class="xref" href="#input_model__persisteddata">Persisted
                    Data</a>) and cannot be changed once servers have been allocated. </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">resource-prefix</td>

                <td class="entry" valign="top" headers="d26815e1895 ">The resource-prefix is used in the name generation. (see <a class="xref" href="#input_model__namegeneration">Name Generation</a>)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">server-role</td>

                <td class="entry" valign="top" headers="d26815e1895 ">This can either be a string (for a single role) or a list of roles. Only
                  servers matching one of the specified <span class="ph uicontrol">server-roles</span> will be
                  allocated to this resource group. (see <a class="xref" href="#input_model__serverroles">Server Roles</a> for a description of server roles).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">service-components</td>

                <td class="entry" valign="top" headers="d26815e1895 ">The list of <span class="ph uicontrol">service-components</span> to be deployed on the
                  servers in this resource group. (The common-service-components for the control
                  plane are also deployed.)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">
                  <p class="p">member-count</p>

                  <p class="p">min-count</p>

                  <p class="p">max-count</p>

                  <p class="p">(all optional)</p>

                </td>

                <td class="entry" valign="top" headers="d26815e1895 ">
                  <p class="p">Defines the number of servers to add to the cluster.</p>

                  <p class="p">The number of servers that can be supported in a cluster depends on the
                    services it is running. For example MySQL and RabbitMQ can only be deployed on
                    clusters on 1 (non-HA) or 3 (HA) servers. Other services may support different
                    sizes of cluster.</p>

                  <p class="p">If min-count is specified, then at least that number of servers will be
                    allocated to the cluster. If min-count is not specified it defaults to a value
                    of 1.</p>

                  <p class="p">If max-count is specified, then the cluster will be limited to that number of
                    servers. If max-count is not specified then all servers matching the required
                    role and failure-zones will be allocated to the cluster.</p>

                  <p class="p">Specifying member-count is equivalent to specifying min-count and max-count
                    with the same value.</p>

                </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">failure-zones (optional)</td>

                <td class="entry" valign="top" headers="d26815e1895 ">A list of <span class="ph uicontrol">server-groups</span> that servers will be allocated
                  from. If specified, it overrides the list of values specified for the
                  control-plane. If not specified, the control-plane value is used. (see <a class="xref" href="#input_model__servergroups_failurezones">Server Groups and Failure
                    Zones</a> for a description of server groups as failure zones).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e1892 ">allocation-policy (optional)</td>

                <td class="entry" valign="top" headers="d26815e1895 ">
                  <p class="p">Defines how failure zones will be used when allocating servers.</p>

                  <p class="p"><strong class="ph b">strict</strong>: Server allocations will be distributed across all specified
                    failure zones. (if max-count is not a whole number, an exact multiple of the
                    number of zones, then some zones may provide one more server than other
                    zones)</p>

                  <p class="p"><strong class="ph b">any</strong>: Server allocations will be made from any combination of failure
                    zones.</p>

                  <p class="p">The default allocation-policy for a cluster is <em class="ph i">any</em></p>
. </td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_servers"><h2 class="title sectiontitle">Servers</h2>
      <p class="p">The <span class="ph uicontrol">servers</span> configuration object is used to list the available
        servers for deploying the cloud.</p>

      <p class="p">Optionally, it can be used as an input file to the operating system installation process,
        in which case some additional fields (identified below) will be necessary.</p>

      <pre class="pre codeblock">---
  product:
    version: 2
        
  baremetal:
    subnet: 192.168.10.0
    netmask: 255.255.255.0
        
  servers:
    - id: controller1
      ip-addr: 192.168.10.3
      role: CONTROLLER-ROLE
      server-group: RACK1
      nic-mapping: HP-DL360-4PORT
      mac-addr: b2:72:8d:ac:7c:6f
      ilo-ip: 192.168.9.3
      ilo-password: password
      ilo-user: admin
      
    - id: controller2
      ip-addr: 192.168.10.4
      role: CONTROLLER-ROLE
      server-group: RACK2
      nic-mapping: HP-DL360-4PORT
      mac-addr: 8a:8e:64:55:43:76
      ilo-ip: 192.168.9.4
      ilo-password: password
      ilo-user: admin</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__tb_servers" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2073">Key</th>

                <th class="entry" valign="top" id="d26815e2076">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">id</td>

                <td class="entry" valign="top" headers="d26815e2076 ">An administrator-defined identifier for the server. IDs must be unique and
                  are used to track server allocations. (see <a class="xref" href="#input_model__persisteddata">Persisted Data</a>).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">ip-addr</td>

                <td class="entry" valign="top" headers="d26815e2076 ">
                  <p class="p">The IP address is used by the Configuration Processor to install and configure
                    the service components on this server.</p>

                  <p class="p">This IP address must be within the range of a <span class="ph uicontrol">network</span>
                    defined in this model.</p>

                  <p class="p">When the servers file is being used for operating system installation, this IP
                    address will be assigned to the node by the installation process, and the
                    associated <span class="ph uicontrol">network</span> must be an untagged VLAN.</p>

                </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">role</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Identifies the <span class="ph uicontrol">server-role</span> of the server. (see <a class="xref" href="#input_model__serverroles">Server Roles</a> for a description of server
                  roles)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">nic-mapping</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Name of the <span class="ph uicontrol">nic-mappings</span> entry to apply to this
                  server. (see <a class="xref" href="#input_model__co_nicmappings">NIC Mappings</a>)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">server-group (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Identifies the <span class="ph uicontrol">server-groups</span> entry that this server
                  belongs to. (see <a class="xref" href="#input_model__servergroups">Server
                  Groups</a>)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">mac-addr (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Needed when servers file is being used for operating system installation.
                  This identifies the MAC address on the server that will be used to network install
                  the operating system.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">kopt-extras (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Provides additional command line arguments to be passed to the booting
                  network kernel. For example, <samp class="ph codeph">vga=769</samp> sets the video mode for the
                  install to low resolution which can be useful for remote console users.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">ilo-ip (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Needed when servers file is being used for operating system installation.
                  This provides the IP address of the power management (e.g. IPMI, iLO)
                  subsystem.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">ilo-user (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Needed when servers file is being used for operating system installation.
                  This provides the user name of the power management (e.g. ipmi-ip, iLO)
                  subsystem.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">ilo-password (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Needed when servers file is being used for operating system installation.
                  This provides the user password of the power management (e.g. ipmi-ip, iLO)
                  subsystem.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">ilo-extras (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Needed when servers file is being used for operating system installation.
                  Additional options to pass to ipmitool. For example, this may be required if the
                  servers require additional IPMI addressing parameters.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2073 ">moonshot (optional)</td>

                <td class="entry" valign="top" headers="d26815e2076 ">Provides the node identifier for HPE Moonshot servers, e.g.
                    <samp class="ph codeph">c4n1</samp> where c4 is the cartridge and n1 is node 1.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_servergroups"><h2 class="title sectiontitle">Server Groups</h2>
      <p class="p">The server-groups configuration object provides a mechanism for organizing servers and
        networks into a hierarchy that can be used for allocation and network resolution (see <a class="xref" href="#input_model__servergroups">Server Groups</a>).</p>

      <pre class="pre codeblock">---
  product:
     version: 2
        
     - name: CLOUD
        server-groups:
         - AZ1
         - AZ2
         - AZ3
        networks:
         - EXTERNAL-API-NET
         - EXTERNAL-VM-NET
         - GUEST-NET
         - MANAGEMENT-NET
        
     #
     # Create a group for each failure zone
     #
     - name: AZ1
       server-groups:
         - RACK1
        
     - name: AZ2
       server-groups:
         - RACK2
        
     - name: AZ3
       server-groups:
         - RACK3
        
     #
     # Create a group for each rack
     #
     - name: RACK1
     - name: RACK2
     - name: RACK3</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__tb_servergroups" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2272">Key</th>

                <th class="entry" valign="top" id="d26815e2275">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2272 ">name</td>

                <td class="entry" valign="top" headers="d26815e2275 ">An administrator-defined name for the server group. The name is used to link
                  server-groups together and to identify server-groups to be used as failure zones
                  in a <span class="ph uicontrol">control-plane</span>. (see <a class="xref" href="#input_model__co_controlplane">Control Plane</a>)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2272 ">server-groups (optional)</td>

                <td class="entry" valign="top" headers="d26815e2275 ">A list of server-group names that are nested below this group in the
                  hierarchy. Each server group can only be listed in one other server group (i.e. in
                  a strict tree topology).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2272 ">networks (optional)</td>

                <td class="entry" valign="top" headers="d26815e2275 ">A list of network names (see <a class="xref" href="#input_model__networks">Networks</a>). See <a class="xref" href="#input_model__servergroups_networks">Server
                    Groups and Networks</a> for a description of how networks are matched to
                  servers via server groups.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_serverroles"><h2 class="title sectiontitle">Server Roles</h2>
      <p class="p">The server-roles configuration object is a list of the various server roles that you can
        use in your cloud. Each server role is linked to two other configuration objects:</p>

      <div class="p">
        <ul class="ul">
          <li class="li">Disk model (see <a class="xref" href="#input_model__co_diskmodels">Disk Models</a>)</li>

          <li class="li">Interface model (see <a class="xref" href="#input_model__co_interfacemodels">Interface
              Models</a>)</li>

        </ul>

      </div>

      <p class="p">Server roles are referenced in the servers (see <a class="xref" href="#input_model__co_servers">Servers</a>) configuration object above.</p>

      <pre class="pre codeblock">---
  product:
     version: 2
        
  server-roles:
        
     - name: CONTROLLER-ROLE
       interface-model: CONTROLLER-INTERFACES
       disk-model: CONTROLLER-DISKS
        
     - name: COMPUTE-ROLE
       interface-model: COMPUTE-INTERFACES
       disk-model: COMPUTE-DISKS
        
     - name: VSA-ROLE
       interface-model: VSA-INTERFACES
       disk-model: VSA-DISKS</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__server_roles" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2380">Key</th>

                <th class="entry" valign="top" id="d26815e2383">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2380 ">name</td>

                <td class="entry" valign="top" headers="d26815e2383 ">An administrator-defined name for the role.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2380 ">interface-model</td>

                <td class="entry" valign="top" headers="d26815e2383 ">The name of the <span class="ph uicontrol">interface-model</span> to be used for this
                  server-role. <p class="p">Different server-roles can use the same
                  interface-model.</p>
</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2380 ">disk-model</td>

                <td class="entry" valign="top" headers="d26815e2383 ">The name of the <span class="ph uicontrol">disk-model</span> to use for this
                  server-role. <p class="p">Different server-roles can use the same disk-model.</p>
</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_diskmodels"><h2 class="title sectiontitle">Disk Models</h2>
      <p class="p">The disk-models configuration object is used to specify how the directly attached disks on
        the server should be configured. It can also identify which service or service component
        consumes the disk, e.g. Swift object server, and provide service-specific information
        associated with the disk.</p>

      <p class="p">Disks can be used as raw devices or as logical volumes and the disk model provides a
        configuration item for each.</p>

      <p class="p">If the operating system has been installed by the HPE Helion OpenStack installation process
        then the root disk will already have been set up as a volume-group with a single
        logical-volume. This logical-volume will have been created on a partition identified,
        symbolically, in the configuration files as <samp class="ph codeph">/dev/sda_root</samp>. This is due to
        the fact that different BIOS systems (UEFI, Legacy) will result in different partition
        numbers on the root disk.</p>

      <pre class="pre codeblock">---
  product:
     version: 2
          
  disk-models:
  - name: VSA-DISKS
          
    volume-groups:
       - ...
    device-groups:
       - ...</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__disk_models" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2466">Key</th>

                <th class="entry" valign="top" id="d26815e2469">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2466 ">name</td>

                <td class="entry" valign="top" headers="d26815e2469 ">The name of the disk-model that is referenced from one or more
                  server-roles.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2466 ">volume-groups</td>

                <td class="entry" valign="top" headers="d26815e2469 ">A list of volume-groups to be configured (see below). There must be at least
                  one volume-group describing the root file system.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2466 ">device-groups (optional)</td>

                <td class="entry" valign="top" headers="d26815e2469 ">A list of device-groups (see below)</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_volumegroups"><h2 class="title sectiontitle">Volume Groups</h2>
      <p class="p">The <span class="ph uicontrol">volume-groups</span> configuration object is used to define volume
        groups and their constituent logical volumes.</p>

      <p class="p">Note that volume-groups are not exact analogs of device-groups. A volume-group specifies a
        set of physical volumes used to make up a volume-group that is then subdivided into multiple
        logical volumes.</p>

      <p class="p">The HPE Helion OpenStack operating system installation automatically creates a volume-group
        name "hlm-vg" on the first drive in the system. It creates a "root" logical volume there.
        The volume-group can be expanded by adding more physical-volumes (see examples). In
        addition, it is possible to create more logical-volumes on this volume-group to provide
        dedicated capacity for different services or file system mounts.</p>

      <pre class="pre codeblock">
   volume-groups:
     - name: hlm-vg
       physical-volumes:
         - /dev/sda_root
        
       logical-volumes: 
         - name: root
           size: 35%
           fstype: ext4
           mount: /
        
         - name: log
           size: 50%
           mount: /var/log
           fstype: ext4
           mkfs-opts: -O large_file
        
         - ...
         
     - name: vg-comp
       physical-volumes:
         - /dev/sdb
       logical-volumes:
         - name: compute
           size: 95%
           mount: /var/lib/nova
           fstype: ext4
           mkfs-opts: -O large_file</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__volume_groups" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2541">Key</th>

                <th class="entry" valign="top" id="d26815e2544">Value Descriptions</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">name</td>

                <td class="entry" valign="top" headers="d26815e2544 ">The name that will be assigned to the volume-group</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">physical-volumes</td>

                <td class="entry" valign="top" headers="d26815e2544 "><p class="p">A list of physical disks that make up the volume group.</p>
 As installed
                  by the HPE Helion OpenStack operating system install process, the volume group
                  "hlm-vg" will use a large partition (sda_root) on the first disk. This can be
                  expanded by adding additional disk(s).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">logical-volumes</td>

                <td class="entry" valign="top" headers="d26815e2544 ">A list of logical volume devices to create from the above named volume
                  group.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">name</td>

                <td class="entry" valign="top" headers="d26815e2544 ">The name to assign to the logical volume.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">size</td>

                <td class="entry" valign="top" headers="d26815e2544 ">The size, expressed as a percentage of the entire volume group capacity, to
                  assign to the logical volum.e</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">fstype (optional)</td>

                <td class="entry" valign="top" headers="d26815e2544 ">The file system type to create on the logical volume. If non specified the
                  volume is not formatted.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">mkfs-opts (optional)</td>

                <td class="entry" valign="top" headers="d26815e2544 ">Options, e.g. <samp class="ph codeph">-O large_file</samp> to pass to the mkfs
                  command.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">mount (optional)</td>

                <td class="entry" valign="top" headers="d26815e2544 ">Mount point for the file system.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2541 ">consumer attributes (optional, consumer dependent)</td>

                <td class="entry" valign="top" headers="d26815e2544 ">
                  <p class="p">These will vary according to the service consuming the device group. The
                    examples section provides sample content for the different services.</p>

                  <p class="p">Note, not all services support the use of logical volumes. VSA requires raw
                    devices.</p>
</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_devicegroups"><h2 class="title sectiontitle">Device Groups</h2>
      <p class="p">The device-groups configuration object provides the mechanism to make the whole of a
        physical disk available to a service.</p>

      <pre class="pre codeblock">
   device-groups:
       - name: vsa-data
         consumer:
           name: vsa
           usage: data
         devices:
           - name: /dev/sdc
       - name: vsa-cache
         consumer:
           name: vsa
           usage: adaptive-optimization
         devices:
           - name: /dev/sdb</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__device_groups" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2672">Key</th>

                <th class="entry" valign="top" id="d26815e2675">Value Descriptions</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2672 ">name</td>

                <td class="entry" valign="top" headers="d26815e2675 ">An administrator-defined name for the device group.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2672 ">devices</td>

                <td class="entry" valign="top" headers="d26815e2675 ">A list of named devices to be assigned to this group. There must be at least
                  one device in the group.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2672 ">consumer</td>

                <td class="entry" valign="top" headers="d26815e2675 ">Identifies the name of one of the storage services (e.g. one of the
                  following: Swift, Cinder, Ceph, VSA, etc) that will consume the disks in this
                  device group.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2672 ">consumer attributes</td>

                <td class="entry" valign="top" headers="d26815e2675 ">These will vary according to the service consuming the device group. The
                  examples section provides sample content for the different services.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_interfacemodels"><h2 class="title sectiontitle">Interface Models</h2>
      <p class="p">The interface-models configuration object describes how network interfaces are bonded and
        the mapping of network groups onto interfaces. Interface devices are identified by name and
        mapped to a particular physical port by the <span class="ph uicontrol">nic-mapping</span> (see <a class="xref" href="#input_model__nicmapping">NIC Mapping</a>).</p>

      <pre class="pre codeblock">---
  product:
     version: 2
        
  interface-models:
     - name: INTERFACE_SET_CONTROLLER
       network-interfaces:
          - name: BONDED_INTERFACE
            device:
              name: bond0
            bond-data:
              provider: linux
              devices:
                - name: hed3
                - name: hed4
              options:
                mode: active-backup
                miimon: 200
                primary: hed3
            network-groups:
               - EXTERNAL_API
               - EXTERNAL_VM
               - GUEST
        
          - name: UNBONDED_INTERFACE
            device:
               name: hed0
            network-groups:
               - MGMT</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__tb_interface_model" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2754">Key</th>

                <th class="entry" valign="top" id="d26815e2757">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2754 ">name</td>

                <td class="entry" valign="top" headers="d26815e2757 ">An administrator-defined name for the interface model.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2754 ">network-interfaces</td>

                <td class="entry" valign="top" headers="d26815e2757 ">A list of network interface definitions.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <p class="p">The network-interfaces configuration object has the following attributes:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__network_interface" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2803">Key</th>

                <th class="entry" valign="top" id="d26815e2806">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2803 ">name</td>

                <td class="entry" valign="top" headers="d26815e2806 ">An administrator-defined name for the interface</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2803 ">device</td>

                <td class="entry" valign="top" headers="d26815e2806 ">
                  <p class="p">A dictionary containing the network device name as seen on the associated
                    server.</p>

                  <p class="p">When configuring a bond, this is used as the bond device name and the names of
                    the devices to be bonded are specified in the bond-data section.</p>

                  <p class="p">If the interface is not bonded this must be the name of the device specified by
                    the <span class="ph uicontrol">nic-mapping</span> (see <a class="xref" href="#input_model__nicmapping">NIC Mapping</a>).</p>

                </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2803 ">bond-data (optional)</td>

                <td class="entry" valign="top" headers="d26815e2806 ">Used to define a bond. See <a class="xref" href="#input_model__co_bonddata">Bond Data</a> for details.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2803 ">network-groups (optional if forced-network-groups is defined)</td>

                <td class="entry" valign="top" headers="d26815e2806 ">A list of one or more <span class="ph uicontrol">network-groups</span> (see <a class="xref" href="#input_model__co_networkgroups">Network Groups</a>) containing
                    <span class="ph uicontrol">networks</span> (see <a class="xref" href="#input_model__co_networks">Networks</a>) that can be accessed via this interface. Networks in these
                  groups will only be configured if there is at least one
                    <span class="ph uicontrol">service-component</span> on the server which matches the list of
                  component-endpoints defined in the <span class="ph uicontrol">network-group</span>.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2803 ">forced-network-groups (optional if network-groups is defined)</td>

                <td class="entry" valign="top" headers="d26815e2806 ">A list of one or more <span class="ph uicontrol">network-groups</span> (see <a class="xref" href="#input_model__co_networkgroups">Network Groups</a>) containing
                    <span class="ph uicontrol">networks</span> (see <a class="xref" href="#input_model__co_networks">Networks</a>) that can be accessed via this interface. Networks in these
                  groups are always configured on the server.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_bonddata"><h2 class="title sectiontitle">Bond Data</h2>
      <p class="p">A <span class="ph uicontrol">bond-data</span> definition is used to configure a bond device, and
        consists of the following attributes:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__bond_data" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e2942">Key</th>

                <th class="entry" valign="top" id="d26815e2945">Value Descriptions</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2942 ">provider</td>

                <td class="entry" valign="top" headers="d26815e2945 ">Identifies the software used to instantiate the bond device. The only
                  supported value is “linux”, which uses the Linux bonding driver. Other providers
                  may be supported in a future release.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2942 ">devices</td>

                <td class="entry" valign="top" headers="d26815e2945 ">A dictionary containing network device names used to form the bond. The
                  device names must be the logical-name specified by the
                    <span class="ph uicontrol">nic-mapping</span> (see <a class="xref" href="#input_model__nicmapping">NIC
                    mapping</a>.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e2942 ">options</td>

                <td class="entry" valign="top" headers="d26815e2945 ">A dictionary containing bond configuration options. The “<em class="ph i">linux”</em>
                  provider options are described in the <a class="xref" href="#input_model__bonddataoptions">Bond Data Options</a> section.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__bonddataoptions"><h2 class="title sectiontitle">Bond Data Options for the "linux" Provider</h2>
      <p class="p">The Linux bonding driver supports a large number of parameters that control the operation
        of the bond, as described in the <a class="xref" href="https://www.kernel.org/doc/Documentation/networking/bonding.txt" target="_blank">Linux Ethernet Bonding Driver HOWTO</a> document. The parameter names and
        values may be specified as key-value pairs in the <samp class="ph codeph">options</samp> section of
          <samp class="ph codeph">bond-data</samp>.</p>

      <p class="p">Options used in the HPE Helion OpenStack examples are:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__table_cj5_llk_tt" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" id="d26815e3029">Key</th>

              <th class="entry" valign="top" id="d26815e3032">Value Descriptions</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3029 ">mode</td>

              <td class="entry" valign="top" headers="d26815e3032 ">Specifies the bonding policy. Possible values are: <ul class="ul">
                  <li class="li">balance-rr - Transmit packets in sequential order from the first available
                    slave through the last.</li>

                  <li class="li">active-backup - Only one slave in the bond is active. A different slave
                    becomes active if, and only if, the active slave fails.</li>

                  <li class="li">balance-xor - Transmit based on the selected transmit hash policy.</li>

                  <li class="li">broadcast - Transmits everything on all slave interfaces.</li>

                  <li class="li">802.3ad - IEEE 802.3ad Dynamic link aggregation.</li>

                  <li class="li">balance-tlb - Adaptive transmit load balancing: channel bonding that does not
                    require any special switch support.</li>

                  <li class="li">balance-alb - Adaptive load balancing: includes balance-tlb plus receive load
                    balancing (rlb) for IPV4 traffic and does not require any special switch
                    support.</li>

                </ul>

              </td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3029 ">miimon</td>

              <td class="entry" valign="top" headers="d26815e3032 ">Specifies the MII link monitoring frequency in milliseconds. This determines
                how often the link state of each slave is inspected for link failures. Accepts
                values in milliseconds.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3029 ">primary</td>

              <td class="entry" valign="top" headers="d26815e3032 ">The device to use as the primary when the mode is one of the possible values
                below: <ul class="ul">
                  <li class="li">active-backup</li>

                  <li class="li">balance-tlb</li>

                  <li class="li">balance-alb</li>

                </ul>
</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>

    <div class="section" id="input_model__co_nicmappings"><h2 class="title sectiontitle">NIC Mappings</h2>
      <p class="p">The <span class="ph uicontrol">nic-mappings</span> configuration object is used to ensure that the
        network device name used by the operating system always maps to the same physical device. A
          <span class="ph uicontrol">nic-mapping</span> is associated to a <span class="ph uicontrol">server</span> in the
        server definition file. (see <a class="xref" href="#input_model__co_servers">Servers</a>). Devices
        should be named <samp class="ph codeph">hedN</samp> to avoid name clashes with any other devices
        configured during the operating system install as well as any interfaces that are not being
        managed by HPE Helion OpenStack.</p>

      <pre class="pre codeblock">---
  product:
    version: 2
        
  nic-mappings:
       
    - name: HP-DL360-4PORT
      physical-ports:
        - logical-name: hed1
          type: simple-port
          bus-address: "0000:07:00.0"
        
        - logical-name: hed2
          type: simple-port
          bus-address: "0000:08:00.0"
        
        - logical-name: hed3
          type: simple-port
          bus-address: "0000:09:00.0"
        
        - logical-name: hed4
          type: simple-port
          bus-address: "0000:0a:00.0"</pre>

      <p class="p">Each entry in the <span class="ph uicontrol">nic-mappings</span> list has the following
        attributes:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__nic_mappings" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3153">Key</th>

                <th class="entry" valign="top" id="d26815e3156">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3153 ">name</td>

                <td class="entry" valign="top" headers="d26815e3156 ">An administrator-defined name for the mapping. This name may be used in a
                  server definition (see <a class="xref" href="#input_model__co_servers">Servers</a>) to
                  apply the mapping to that server.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3153 ">physical-ports</td>

                <td class="entry" valign="top" headers="d26815e3156 ">A list containing device name to address mapping information.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <p class="p">Each entry in the <span class="ph uicontrol">physical-ports</span> list has the following
        attributes:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__physical_ports" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3210">Key</th>

                <th class="entry" valign="top" id="d26815e3213">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3210 ">logical-name</td>

                <td class="entry" valign="top" headers="d26815e3213 ">The network device name that will be associated with the device at the
                  specified <em class="ph i">bus-address</em>. The logical-name specified here can be used as a
                  device name in network interface model definitions. (see <a class="xref" href="#input_model__co_interfacemodels">Interface Models</a>)</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3210 ">type</td>

                <td class="entry" valign="top" headers="d26815e3213 ">The type of port. The current implementation supports only "simple-port";
                  other port types may be added in a future release.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3210 ">bus-address</td>

                <td class="entry" valign="top" headers="d26815e3213 ">PCI bus address of the port. Enclose the bus address in quotation marks so
                  yaml does not misinterpret the embedded colon (:) characters.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_networkgroups"><h2 class="title sectiontitle">Network Groups</h2>
      <p class="p">Network-groups define the overall network topology, including where service-components
        connect, what load balancers are to be deployed, which connections use TLS, and network
        routing. They also provide the data needed to map Neutron's network configuration to the
        physical networking.</p>

      <pre class="pre codeblock">---
  product:
     version: 2
        
  network-groups:
        
     - name: EXTERNAL-API
       hostname-suffix: extapi
        
       load-balancers:
         - provider: ip-cluster
           name: extlb
           external-name:
        
           tls-components:
             - default
           roles:
            - public
           cert-file: my-public-cert
        
      - name: EXTERNAL-VM
        tags:
          - neutron.l3_agent.external_network_bridge
        
      - name: GUEST
        hostname-suffix: guest
        tags:
          - neutron.networks.vxlan
        
      - name: MANAGEMENT
        hostname-suffix: mgmt
        hostname: true
        
        component-endpoints:
          - default
        
        routes:
          - default
        
        load-balancers:
          - provider: ip-cluster
            name: lb
            components:
              - default
            roles:
              - internal
              - admin
        
        tags:
          - neutron.networks.vlan:
              provider-physical-network: physnet1</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__network_groups" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3283">Key</th>

                <th class="entry" valign="top" id="d26815e3286">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">name</td>

                <td class="entry" valign="top" headers="d26815e3286 ">An administrator-defined name for the network group. The name is used to make
                  references from other parts of the input model.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">component-endpoints (optional)</td>

                <td class="entry" valign="top" headers="d26815e3286 ">The list of <span class="ph uicontrol">service-components</span> that will bind to or
                  need direct access to networks in this network-group.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">hostname (optional)</td>

                <td class="entry" valign="top" headers="d26815e3286 ">If set to true, the name of the address associated with a network in this
                  group will be used to set the hostname of the server.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">hostname-suffix (optional)</td>

                <td class="entry" valign="top" headers="d26815e3286 ">If supplied, this string will be used in the name generation (see <a class="xref" href="#input_model__namegeneration">Name Generation</a>). If not specified,
                  the name of the network-group will be used.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">load-balancers (optional)</td>

                <td class="entry" valign="top" headers="d26815e3286 ">A list of load balancers to be configured on networks in this network-group.
                  Because load balances need a virtual IP address, any network group that contains a
                  load balancer can only have one network associated with it.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">routes (optional)</td>

                <td class="entry" valign="top" headers="d26815e3286 "><p class="p">A list of <span class="ph uicontrol">network-groups</span> that networks in this
                    group provide access to via their gateway. This can include the value “default”
                    to define the default route.</p>
 A network group with no services attached to it
                  can be used to define routes to external networks.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3283 ">tags (optional)</td>

                <td class="entry" valign="top" headers="d26815e3286 ">A list of network tags. Tags provide the linkage between the physical network
                  configuration and the Neutron network configuration.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <p class="p">A load balancer definition has the following attributes:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__table_gv1_wlt_jt" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3390">Key</th>

                <th class="entry" valign="top" id="d26815e3393">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">name</td>

                <td class="entry" valign="top" headers="d26815e3393 ">An administrator-defined name for the load balancer.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">provider</td>

                <td class="entry" valign="top" headers="d26815e3393 ">The service component that implements the load balancer. Currently only
                  "ip-cluster" (ha-proxy) is supported. Future releases will provide support for
                  external load balancers.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">roles</td>

                <td class="entry" valign="top" headers="d26815e3393 ">The list of endpoint roles that this load balancer provides (see below).
                  Valid roles are "public", "internal", and "admin'. To ensure separation of
                  concerns, the role "public" cannot be combined with any other role. See <a class="xref" href="#input_model__loadbalancers">Load Balancers</a> for an example of how
                  the role provides endpoint separation.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">components (optional)</td>

                <td class="entry" valign="top" headers="d26815e3393 ">The list of <span class="ph uicontrol">service-components</span> for which the load
                  balancer provides a non-encrypted virtual IP address for.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">tls-components (optional)</td>

                <td class="entry" valign="top" headers="d26815e3393 ">The list of <span class="ph uicontrol">service-components</span> for which the load
                  balancer provides TLS-terminated virtual IP addresses for. In HPE Helion OpenStack
                  2.0 TLS is only supported for public endpoints.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">external-name (optional)</td>

                <td class="entry" valign="top" headers="d26815e3393 ">The name to be registered in Keystone for the publicURL. If not specified,
                  the virtual IP address will be registered. Note that this value cannot be changed
                  after the initial deployment.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3390 ">cert-file (optional)</td>

                <td class="entry" valign="top" headers="d26815e3393 ">The name of the certificate file to be used for public endpoints.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_networktags"><h2 class="title sectiontitle">Network Tags</h2>
      <p class="p">HPE Helion OpenStack supports a small number of network tags which may be used to convey
        information between the input model and the service components (currently only Neutron uses
        network tags). A network tag consists minimally of a tag name; but some network tags have
        additional attributes.</p>

      <p class="p"><strong class="ph b">neutron.networks.vxlan</strong></p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__neutron_networks_vxlan" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3504">Tag</th>

                <th class="entry" valign="top" id="d26815e3507">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3504 ">neutron.networks.vxlan</td>

                <td class="entry" valign="top" headers="d26815e3507 ">This tag causes Neutron to be configured to use VxLAN as the underlay for
                  tenant networks. The associated network group will carry the VxLAN
                  traffic.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3504 ">tenant-vxlan-id-range (optional)</td>

                <td class="entry" valign="top" headers="d26815e3507 ">Used to specify the VxLAN identifier range in the format
                  “&lt;min-id&gt;:&lt;max-id&gt;”. The default range is “1001:65535”. Enclose the
                  range in quotation marks.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <div class="p">Example using the default ID range:
        <pre class="pre codeblock">
  tags:
    - neutron.networks.vxlan</pre>
</div>

      <div class="p">Example using a user-defined ID range:
        <pre class="pre codeblock">
  tags:
    - neutron.networks.vxlan:
        tenant-vxlan-id-range: “1:20000”</pre>
</div>

      <p class="p" id="input_model__neutron.networks.vlan"><strong class="ph b">neutron.networks.vlan</strong></p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__neutron_networks_vlan" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3565">Tag</th>

                <th class="entry" valign="top" id="d26815e3568">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3565 ">neutron.networks.vlan</td>

                <td class="entry" valign="top" headers="d26815e3568 ">
                  <p class="p">This tag causes Neutron to be configured for provider VLAN networks, and
                    optionally to use VLAN as the underlay for tenant networks. The associated
                    network group will carry the VLAN traffic. This tag can be specified on multiple
                    network groups.</p>

                  <p class="p">NOTE: this tag does not cause any Neutron networks to be created, that must be
                    done in Neutron after the cloud is deployed.</p>
</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3565 ">provider-physical-network</td>

                <td class="entry" valign="top" headers="d26815e3568 ">The provider network name. This is the name to be used in the Neutron API for
                  the <em class="ph i">provider:physical_network</em> parameter of network objects.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3565 ">tenant-vlan-id-range (optional)</td>

                <td class="entry" valign="top" headers="d26815e3568 ">This attribute causes Neutron to use VLAN for tenant networks; omit this
                  attribute if you are using provider VLANs only. It specifies the VLAN ID range for
                  tenant networks, in the format “&lt;min-id&gt;:&lt;max-id&gt;”. Enclose the range
                  in quotation marks.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <div class="p">Example using a provider vlan only (may be used with tenant VxLAN:
        <pre class="pre codeblock">
  tags:
    - neutron.networks.vlan:
        provider-physical-network: physnet1</pre>
</div>

      <div class="p">Example using a tenant and provider VLAN:
        <pre class="pre codeblock">
  tags:
    - neutron.networks.vlan:
        provider-physical-network: physnet1
        tenant-vlan-id-range: “100:200”</pre>
</div>

      <p class="p"><strong class="ph b">neutron.networks.flat</strong></p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__neutron_networks_flat" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3642">Tag</th>

                <th class="entry" valign="top" id="d26815e3645">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3642 ">neutron.networks.flat</td>

                <td class="entry" valign="top" headers="d26815e3645 ">
                  <p class="p">This tag causes Neutron to be configured for provider flat networks. The
                    associated network group will carry the traffic. This tag can be specified on
                    multiple network groups.</p>

                  <p class="p">NOTE: this tag does not cause any Neutron networks to be created, that must be
                    done in Neutron after the cloud is deployed.</p>

                </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3642 ">provider-physical-network</td>

                <td class="entry" valign="top" headers="d26815e3645 ">The provider network name. This is the name to be used in the Neutron API for
                  the <em class="ph i">provider:physical_network</em> parameter of network objects. When specified
                  on multiple network groups, the name must be unique for each network
                  group.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <div class="p">Example using a provider flat network:
        <pre class="pre codeblock">
  tags:
    - neutron.networks.flat:
         provider-physical-network: flatnet1</pre>
</div>

      <p class="p"><strong class="ph b">neutron.l3_agent.external_network_bridge</strong></p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__neutron_l3_agent" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3707">Tag</th>

                <th class="entry" valign="top" id="d26815e3710">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3707 ">neutron.l3_agent.external_network_bridge</td>

                <td class="entry" valign="top" headers="d26815e3710 ">
                  <p class="p">This tag causes the Neutron L3 Agent to be configured to use the associated
                    network group as the Neutron external network for floating IP addresses. A CIDR
                      <strong class="ph b">should not</strong> be defined for the associated physical network, as that will
                    cause addresses from that network to be configured in the hypervisor. When this
                    tag is used, provider networks cannot be used as external networks.</p>

                  <p class="p">NOTE: this tag does not cause a Neutron external networks to be created, that
                    must be done in Neutron after the cloud is deployed.</p>

                </td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <div class="p">Example using neutron.l3_agent.external_network_bridge:
        <pre class="pre codeblock">
  tags:
    - neutron.l3_agent.external_network_bridge</pre>
</div>

    </div>

    <div class="section" id="input_model__co_networks"><h2 class="title sectiontitle">Networks</h2>
      <p class="p">A network definition represents a physical L3 network used by the cloud infrastructure.
        Note that these are different from the network definitions that are created/configured in
        Neutron, although some of the networks may be used by Neutron.</p>

      <pre class="pre codeblock">---
   product:
     version: 2
        
   networks:
     - name: NET_EXTERNAL_VM
       vlanid: 102
       tagged-vlan: true
       network-group: EXTERNAL_VM
        
     - name: NET_GUEST
       vlanid: 103
       tagged-vlan: true
       cidr: 10.1.1.0/24
       gateway-ip: 10.1.1.1
       network-group: GUEST
        
     - name: NET_MGMT
       vlanid: 100
       tagged-vlan: false
       cidr: 10.2.1.0/24
       start-address: 10.2.1.10
       end-address: 10.2.1.40
       gateway-ip: 10.2.1.1
       network-group: MGMT</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__tb_networks" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3769">Key</th>

                <th class="entry" valign="top" id="d26815e3772">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">name</td>

                <td class="entry" valign="top" headers="d26815e3772 ">The name of this network. The network <em class="ph i">name</em> may be used in a
                  server-group definition (see <a class="xref" href="#input_model__co_servergroups">Server
                    Groups</a>) to specify a particular network from within a network-group to be
                  associated with a set of servers.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">network-group</td>

                <td class="entry" valign="top" headers="d26815e3772 ">The name of the associated network group.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">vlanid (optional)</td>

                <td class="entry" valign="top" headers="d26815e3772 ">The IEEE 802.1Q VLAN Identifier, a value in the range 1 through 4094. A
                    <em class="ph i">vlanid</em> must be specified when <em class="ph i">tagged-vlan</em> is true.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">tagged-vlan (optional)</td>

                <td class="entry" valign="top" headers="d26815e3772 ">May be set to “true” or “false”. If true, packets for this network carry the
                    <em class="ph i">vlanid </em>in the packet header; such packets are referred to as VLAN-tagged
                  frames in IEEE 802.1Q.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">cidr (optional)</td>

                <td class="entry" valign="top" headers="d26815e3772 ">The IP subnet associated with this network.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">start-address (optional)</td>

                <td class="entry" valign="top" headers="d26815e3772 ">An IP address within the <em class="ph i">CIDR</em> which will be used as the start of the
                  range of IP addresses from which server addresses may be allocated. The default
                  value is the first host address within the <em class="ph i">CIDR</em> (e.g. the .1
                  address).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">end-address (optional)</td>

                <td class="entry" valign="top" headers="d26815e3772 ">An IP address within the <em class="ph i">CIDR</em> which will be used as the end of the
                  range of IP addresses from which server addresses may be allocated. The default
                  value is the last host address within the <em class="ph i">CIDR</em> (e.g. the .254 address of a
                  /24).</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3769 ">gateway-ip (optional)</td>

                <td class="entry" valign="top" headers="d26815e3772 ">The IP address of the gateway for this network. Gateway addresses must be
                  specified if the associated <span class="ph uicontrol">network-group</span> provides
                  routes.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_firewallrules"><h2 class="title sectiontitle">Firewall Rules</h2>
      
      <p class="p">The Configuration Processor will automatically generate "allow" firewall rules for each
        server based on the services deployed and block all other ports. The firewall rules in the
        input model allow the customer to define additional rules for each network group.</p>

      <p class="p">Administrator-defined rules are applied after all rules generated by the Configuration
        Processor.</p>

      <pre class="pre codeblock">---
  product:
     version: 2
        
  firewall-rules:
        
     - name: PING
       network-groups:
       - MANAGEMENT
       - GUEST
       - EXTERNAL-API
       rules:
       # open ICMP echo request (ping)
       - type: allow
         remote-ip-prefix:  0.0.0.0/0
         # icmp type
         port-range-min: 8
         # icmp code
         port-range-max: 0
         protocol: icmp</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__table_zxz_yrk_tt" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e3916">Key</th>

                <th class="entry" valign="top" id="d26815e3919">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3916 ">name</td>

                <td class="entry" valign="top" headers="d26815e3919 ">An administrator-defined name for the group of rules.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3916 ">network-groups</td>

                <td class="entry" valign="top" headers="d26815e3919 ">A list of <span class="ph uicontrol">network-group</span> names that the rules apply to.
                  A value of "all" matches all network-groups.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3916 ">final (optional)</td>

                <td class="entry" valign="top" headers="d26815e3919 ">If "true", these rules are applied at the end of any other user-defined
                  rules. If not specified, this defaults to <strong class="ph b">false</strong>. The deny-all rule, which
                  turns the firewall on, must have this value set to true.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e3916 ">rules</td>

                <td class="entry" valign="top" headers="d26815e3919 ">A list of rules. Rules are applied in the order in which they appear in the
                  list, apart from the control provided by the "final" option (see above). The order
                  between sets of rules is indeterminate.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>

    <div class="section" id="input_model__co_rule"><h2 class="title sectiontitle">Rule</h2>
      
      <p class="p">Each rule in the list takes the following parameters (which match the parameters of a
        Neutron security group rule):</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__table_uvr_lsk_tt" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" id="d26815e3993">Key</th>

              <th class="entry" valign="top" id="d26815e3996">Value Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3993 ">type</td>

              <td class="entry" valign="top" headers="d26815e3996 ">Must be one of "allow" or "deny"</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3993 ">remote-ip-prefix</td>

              <td class="entry" valign="top" headers="d26815e3996 ">Range of remote addresses in CIDR format that this rule applies to.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3993 ">port-range-min<p class="p">port-range-max</p>
</td>

              <td class="entry" valign="top" headers="d26815e3996 ">Defines the range of ports covered by the rule. Note that if the protocol is
                "icmp" then port-range-min is the ICMP type and port-range-max is the ICMP
                code.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e3993 ">protocol</td>

              <td class="entry" valign="top" headers="d26815e3996 ">Must be one of "tcp", "udp", or "icmp".</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>

    <div class="section" id="input_model__passthrough"><h2 class="title sectiontitle">Pass Through</h2>
      <p class="p">Through pass_through definitions, certain configuration values can be assigned and
        used.</p>

      <pre class="pre codeblock">product:
  version: 2
  pass-through:
  global:
  esx_cloud: true
  servers:
      data:
      vmware:
      cert_check: false
      vcenter_cluster: Cluster1
      vcenter_id: BC9DED4E-1639-481D-B190-2B54A2BF5674
      vcenter_ip: 10.1.200.41
      vcenter_port: 443
      vcenter_username: administrator@vsphere.local
      id: 7d8c415b541ca9ecf9608b35b32261e6c0bf275a</pre>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__table_dnf_c5f_pt" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" id="d26815e4070">Key</th>

                <th class="entry" valign="top" id="d26815e4073">Value Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" headers="d26815e4070 ">global</td>

                <td class="entry" valign="top" headers="d26815e4073 ">These values will be used at the cloud level.</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" headers="d26815e4070 ">servers </td>

                <td class="entry" valign="top" headers="d26815e4073 ">These values will be assigned to a specific server(s) using the
                  server-id.</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

    </div>



    <div class="section" id="input_model__othertopics"><h2 class="title sectiontitle">Other Topics</h2></div>

    <div class="section" id="input_model__namegeneration"><h2 class="title sectiontitle">Name Generation</h2>
      <p class="p">Names are generated by the Configuration Processor for all allocated IP addresses. A server
        connected to multiple networks will have multiple names associated with it. One of these may
        be assigned as the hostname for a server via the network-group configuration (see <a class="xref" href="#input_model__co_nicmappings">NIC Mappings</a>). Names are generated from data
        taken from various parts of the input model as described in the following sections.</p>

    </div>

    <div class="section" id="input_model__o_clusters"><h2 class="title sectiontitle">Clusters</h2>
      <p class="p">Names generated for servers in a cluster have the following form:</p>

      <div class="p"><pre class="pre codeblock">&lt;cloud&gt;-&lt;control-plane&gt;-&lt;cluster&gt;&lt;member-prefix&gt;&lt;member_id&gt;-&lt;network&gt;</pre>
</div>

      <p class="p">Example: <samp class="ph codeph">helion-cp1-core-m1-mgmt</samp></p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__cluster_node_names" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="50%" id="d26815e4147">Name</th>

              <th class="entry" valign="top" width="50%" id="d26815e4150">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4147 ">&lt;cloud&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4150 ">Comes from the hostname-data section of the <span class="ph uicontrol">cloud</span> object
                (see <a class="xref" href="#input_model__co_cloud">Cloud</a>)</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4147 ">&lt;control-plane&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4150 ">is the <span class="ph uicontrol">control-plane</span> prefix or name (see <a class="xref" href="#input_model__co_controlplane">Control Plane</a>)</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4147 ">&lt;cluster&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4150 ">is the <span class="ph uicontrol">cluster-prefix</span> name (see <a class="xref" href="#input_model__clusters">Clusters</a>)</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4147 ">&lt;member-prefix&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4150 ">comes from the hostname-data section of the <span class="ph uicontrol">cloud</span> object
                (see <a class="xref" href="#input_model__co_cloud">Cloud</a>)</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4147 ">&lt;member_id&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4150 ">is the ordinal within the cluster, generated by the Configuration Processor as
                servers are allocated to the cluster</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4147 ">&lt;network&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4150 ">comes from the <span class="ph uicontrol">hostname-suffix</span> of the network group to
                which the network belongs (see <a class="xref" href="#input_model__co_nicmappings">NIC
                  Mappings</a>).</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>




    <div class="section" id="input_model__o_resourcenodes"><h2 class="title sectiontitle">Resource Nodes</h2>
      <p class="p">Names generated for servers in a resource group have the following form:</p>

      <div class="p"><pre class="pre codeblock">&lt;cloud&gt;-&lt;control-plane&gt;-&lt;resource-prefix&gt;&lt;member_id&gt;-&lt;network&gt;</pre>
</div>

      <p class="p">Example: <samp class="ph codeph">helion-cp1-comp0001-mgmt</samp></p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__resource_node_names" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="50%" id="d26815e4279">Name</th>

              <th class="entry" valign="top" width="50%" id="d26815e4282">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4279 ">&lt;cloud&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4282 ">Comes from the hostname-data section of the <span class="ph uicontrol">cloud</span> object
                (see <a class="xref" href="#input_model__co_cloud">Cloud</a>).</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4279 ">&lt;control-plane&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4282 ">is the <span class="ph uicontrol">control-plane</span> prefix or name (see <a class="xref" href="#input_model__co_controlplane">Control Plane</a>).</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4279 ">&lt;resource-prefix&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4282 ">is the <span class="ph uicontrol">resource-prefix</span> value name (see <a class="xref" href="#input_model__co_resources">Resources</a>).</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4279 ">&lt;member_id&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4282 ">is the ordinal within the cluster, generated by the Configuration Processor as
                servers are allocated to the cluster, padded with leading zeroes to four
                digits.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="50%" headers="d26815e4279 ">&lt;network&gt;</td>

              <td class="entry" valign="top" width="50%" headers="d26815e4282 ">comes from the <span class="ph uicontrol">hostname-suffix</span> of the network group to
                which the network belongs to (see <a class="xref" href="#input_model__co_nicmappings">NIC
                  Mappings</a>)</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>






    <div class="section" id="input_model__persisteddata"><h2 class="title sectiontitle">Persisted Data</h2>
      <p class="p">The Configuration Processor is making allocation decisions on servers and needs to remember
        IP addresses between successive runs so that if new servers are added to the input model
        they don’t disrupt the previously deployed allocations.</p>

      <p class="p">To allow users to make multiple iterations of the input model before deployment HPE Helion
        OpenStack will only persist data when the administrator confirms that they are about to
        deploy the results via the "ready-deployment" operation. To under this better, consider the
        following example:</p>

      <p class="p">Imagine you have completed your HPE Helion OpenStack deployment with servers A, B, and C
        and you want to add two new compute nodes by adding servers D and E to the input model.</p>

      <p class="p">When you add these to the input model and re-run the Configuration Processor it will read
        the persisted data for A, B, and C and allocate D and E as new servers. The Configuration
        Processor now has allocation data for A, B, C, D, and E –- which it keeps in a staging area
        (actually a special branch in git) until we get confirmation that the Configuration
        Processor has done what you intended and you are ready to deploy the revised
        configuration.</p>

      <p class="p">If you noticed that the role of E was wrong and it became a Swift node instead of a Nova
        node you need to be able to change the input mode and re-run the Configuration Processor.
        This is fine because the allocations of D and E have not been confirmed, and so the
        Configuration Processor will re-read the data about A, B, C and re-allocate D and E now to
        the correct clusters, updating the persisted data in the staging area.</p>

      <p class="p">You can loop though this as many times as needed. Each time, the Configuration Processor is
        processing the deltas to what is deployed, not the results of the previous run. When you are
        ready to use the results of the Configuration Processor, you run
          <samp class="ph codeph">ready-deployment.yml</samp> which commits the data in the staging area into the
        persisted data. The next run of the Configuration Processor will then start from the
        persisted data for A, B, C, D, and E.</p>

    </div>



    <div class="section" id="input_model__persistedserverallocations"><h2 class="title sectiontitle">Persisted Server Allocations</h2>
      <p class="p">Server allocations are persisted by the administrator-defined server ID (see <a class="xref" href="#input_model__co_servers">Servers</a>), and include the control plane,
        cluster/resource name, and ordinal within the cluster or resource group.</p>

      <p class="p">To guard against data loss, the Configuration Processor persists server allocations even
        when the server ID no longer exists in the input model –- for example, if a server was
        removed accidentally and the Configuration Processor allocated a new server to the same
        ordinal, then it would be very difficult to recover from that situation.</p>

      <p class="p">The following example illustrates the behavior:</p>

      <p class="p">A cloud is deployed with four servers with IDs of A, B, C, and D that can all be used in a
        resource group with <samp class="ph codeph">min-size=0</samp> and <samp class="ph codeph">max-size=3</samp>. At the end
        of this deployment they persisted state is as follows:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__persist_exam_1" class="table" frame="border" border="1" rules="all">
            
            
            
            
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" width="1" id="d26815e4443">ID</th>

                <th class="entry" valign="top" width="1" id="d26815e4446">Control Plane</th>

                <th class="entry" valign="top" width="1" id="d26815e4449">Resource Group</th>

                <th class="entry" valign="top" width="1" id="d26815e4452">Ordinal</th>

                <th class="entry" valign="top" width="1" id="d26815e4455">State</th>

                <th class="entry" valign="top" width="16.666666666666664%" id="d26815e4459">Deployed As</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4443 ">A</td>

                <td class="entry" valign="top" width="1" headers="d26815e4446 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4449 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4452 ">1</td>

                <td class="entry" valign="top" width="1" headers="d26815e4455 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4459 ">mycloud-ccp-comp0001</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4443 ">B</td>

                <td class="entry" valign="top" width="1" headers="d26815e4446 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4449 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4452 ">2</td>

                <td class="entry" valign="top" width="1" headers="d26815e4455 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4459 ">mycloud-ccp-comp0002</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4443 ">C</td>

                <td class="entry" valign="top" width="1" headers="d26815e4446 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4449 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4452 ">3</td>

                <td class="entry" valign="top" width="1" headers="d26815e4455 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4459 ">mycloud-ccp-comp0003</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4443 ">D</td>

                <td class="entry" valign="top" width="1" headers="d26815e4446 "> </td>

                <td class="entry" valign="top" width="1" headers="d26815e4449 "> </td>

                <td class="entry" valign="top" width="1" headers="d26815e4452 "> </td>

                <td class="entry" valign="top" width="1" headers="d26815e4455 ">Available</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4459 "> </td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <p class="p">(In this example server D has not been allocated because the group is at its max size, and
        there are no other groups that required this server)</p>

      <p class="p">If server B is removed from the input model and the Configuration Processor is re-run, the
        state is changed to:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__persist_exam_2" class="table" frame="border" border="1" rules="all">
            
            
            
            
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" width="1" id="d26815e4584">ID</th>

                <th class="entry" valign="top" width="1" id="d26815e4587">Control Plane</th>

                <th class="entry" valign="top" width="1" id="d26815e4590">Resource Group</th>

                <th class="entry" valign="top" width="1" id="d26815e4593">Ordinal</th>

                <th class="entry" valign="top" width="1" id="d26815e4596">State</th>

                <th class="entry" valign="top" width="16.666666666666664%" id="d26815e4600">Deployed As</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4584 ">A</td>

                <td class="entry" valign="top" width="1" headers="d26815e4587 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4590 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4593 ">1</td>

                <td class="entry" valign="top" width="1" headers="d26815e4596 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4600 ">mycloud-ccp-comp0001</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4584 ">B</td>

                <td class="entry" valign="top" width="1" headers="d26815e4587 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4590 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4593 ">2</td>

                <td class="entry" valign="top" width="1" headers="d26815e4596 ">Deleted</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4600 "> </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4584 ">C</td>

                <td class="entry" valign="top" width="1" headers="d26815e4587 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4590 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4593 ">3</td>

                <td class="entry" valign="top" width="1" headers="d26815e4596 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4600 ">mycloud-ccp-comp0003</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4584 ">D</td>

                <td class="entry" valign="top" width="1" headers="d26815e4587 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4590 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4593 ">4</td>

                <td class="entry" valign="top" width="1" headers="d26815e4596 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4600 ">mycloud-ccp-comp0004</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <p class="p">The details associated with server B are still retained, but the Configuration Processor
        will not generate any deployment data for this server. Server D has been added to the group
        to meet the minimum size requirement but has been given a different ordinal and hence will
        get different names and IP addresses than were given to server B.</p>

      <p class="p">If server B is added back into the input model the resulting state will be:</p>

      <div class="p">
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__persist_exam_3" class="table" frame="border" border="1" rules="all">
            
            
            
            
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" width="1" id="d26815e4727">ID</th>

                <th class="entry" valign="top" width="1" id="d26815e4730">Control Plane</th>

                <th class="entry" valign="top" width="1" id="d26815e4733">Resource Group</th>

                <th class="entry" valign="top" width="1" id="d26815e4736">Ordinal</th>

                <th class="entry" valign="top" width="1" id="d26815e4739">State</th>

                <th class="entry" valign="top" width="16.666666666666664%" id="d26815e4743">Deployed As</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4727 ">A</td>

                <td class="entry" valign="top" width="1" headers="d26815e4730 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4733 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4736 ">1</td>

                <td class="entry" valign="top" width="1" headers="d26815e4739 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4743 ">mycloud-ccp-comp0001</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4727 ">B</td>

                <td class="entry" valign="top" width="1" headers="d26815e4730 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4733 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4736 ">2</td>

                <td class="entry" valign="top" width="1" headers="d26815e4739 ">Deleted</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4743 "> </td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4727 ">C</td>

                <td class="entry" valign="top" width="1" headers="d26815e4730 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4733 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4736 ">3</td>

                <td class="entry" valign="top" width="1" headers="d26815e4739 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4743 ">mycloud-ccp-comp0003</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="1" headers="d26815e4727 ">D</td>

                <td class="entry" valign="top" width="1" headers="d26815e4730 ">ccp</td>

                <td class="entry" valign="top" width="1" headers="d26815e4733 ">compute</td>

                <td class="entry" valign="top" width="1" headers="d26815e4736 ">4</td>

                <td class="entry" valign="top" width="1" headers="d26815e4739 ">Allocated</td>

                <td class="entry" valign="top" width="16.666666666666664%" headers="d26815e4743 ">mycloud-ccp-comp0004</td>

              </tr>

            </tbody>

          </table>
</div>

      </div>

      <p class="p">The Configuration Processor will issue a warning that server B cannot be returned to the
        compute group because it would exceed the max-size constraint. However, because the
        Configuration Processor knows that server B is associated with this group it won’t allocate
        it to any other group that could use it, since that might lead to data loss on that
        server.</p>

      <p class="p">If the max-size value of the group was increased, then server B would be allocated back to
        the group, with its previous name and addresses
        (<samp class="ph codeph">mycloud-cp1-compute0002</samp>).</p>

      <p class="p">Note that the Configuration Processor relies on the server ID to identify a physical
        server. If the ID value of a server is changed the Configuration Processor will treat it as
        a new server. Conversely, if a different physical server is added with the same ID as a
        deleted server the Configuration Processor will assume that it is the original server being
        returned to the model.</p>

      <p class="p">You can force the removal of persisted data for server that are no longer in the input
        model by running the Configuration Processor with the
          <samp class="ph codeph">remove_deleted_servers</samp> option, like below:</p>

      <pre class="pre codeblock">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml -e remove_deleted_servers="y"</pre>

    </div>

    <div class="section" id="input_model__persistedaddressallocations"><h2 class="title sectiontitle">Persisted Address Allocations</h2>
      <p class="p">The Configuration Processor persists IP address allocations by the generated name (see
          <a class="xref" href="#input_model__namegeneration">Name Generation</a> for how names are
        generated). As with servers once an address has been allocated, that address will remain
        allocated until the Configuration Processor is explicitly told that it is no longer
        required. The Configuration Processor will generate warnings for addresses that are
        persisted but no longer used.</p>

      <p class="p">You can remove persisted address allocations that are no longer used in the input model by
        running the Configuration Processor with the <samp class="ph codeph">free_unused_addresses</samp> option,
        like below:</p>

      <pre class="pre codeblock">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml -e free_unused_addresses="y"</pre>

    </div>

    <div class="section" id="input_model__serverallocation"><h2 class="title sectiontitle">Server Allocation</h2>
      <p class="p">The Configuration Processor allocates servers to a cluster or resource group in the
        following sequence:</p>

      <ol class="ol">
        <li class="li">Any <span class="ph uicontrol">servers</span> that are persisted with a state of "allocated" are
          first returned to the <span class="ph uicontrol">cluster</span> or <span class="ph uicontrol">resource
            group</span>. Such servers are always allocated even if this contradicts the
          cluster size, failure-zones, or list of server roles since it is assumed that these
          servers are actively deployed.</li>

        <li class="li">If the <span class="ph uicontrol">cluster</span> or <span class="ph uicontrol">resource group</span> is still
          below its minimum size, then any <span class="ph uicontrol">servers</span> that are persisted with a
          state of "deleted", but where the server is now listed in the input model (i.e. the server
          was removed but is now back), are added to the group providing they meet the
            <span class="ph uicontrol">failure-zone</span> and <span class="ph uicontrol">server-role</span> criteria. If
          they do not meet the criteria then a warning is given and the
            <span class="ph uicontrol">server</span> remains in a deleted state (i.e. it is still not allocated
          to any other cluster or group). These <span class="ph uicontrol">servers</span> are not part of the
          current deployment, and so you must resolve any conflicts before they can be
          redeployed.</li>

        <li class="li">If the <span class="ph uicontrol">cluster</span> or <span class="ph uicontrol">resource group</span> is still
          below its minimum size, the Configuration Processor will allocate additional
            <span class="ph uicontrol">servers</span> that meet the <span class="ph uicontrol">failure-zone</span> and
            <span class="ph uicontrol">server-role</span> criteria. If the allocation policy is set to "strict"
          then the failure zones of servers already in the cluster or resource group are not
          considered until an equal number of servers has been allocated from each zone.</li>

      </ol>

    </div>

    <div class="section" id="input_model__servernetworkselection"><h2 class="title sectiontitle">Server Network Selection</h2>
      <p class="p">Once the Configuration Processor has allocated a <span class="ph uicontrol">server</span> to a
          <span class="ph uicontrol">cluster</span> or <span class="ph uicontrol">resource group</span> it uses the
        information in the associated <span class="ph uicontrol">interface-model</span> to determine which
          <span class="ph uicontrol">networks</span> need to be configured. It does this by:</p>

      <ol class="ol">
        <li class="li">Looking at the <span class="ph uicontrol">service-components</span> that are to run on the server
          (from the <span class="ph uicontrol">control-plane</span> definition)</li>

        <li class="li">Looking to see which <span class="ph uicontrol">network-group</span> each of those components is
          attached to (from the <span class="ph uicontrol">network-groups</span> definition)</li>

        <li class="li">Looking to see if there are any <span class="ph uicontrol">network-tags</span> related to a
            <span class="ph uicontrol">service-component</span> running on this server, and if so, adding those
            <span class="ph uicontrol">network-groups</span> to the list (also from the
            <span class="ph uicontrol">network-groups</span> definition)</li>

        <li class="li">Looking to see if there are any <span class="ph uicontrol">network-groups</span> that the
            <span class="ph uicontrol">interface-model</span> says should be forced onto the server</li>

        <li class="li">It then searches the <span class="ph uicontrol">server-group</span> hierarchy (as described in
            <a class="xref" href="#input_model__servergroups_networks">Server Groups and Networks</a>) to
          find a <span class="ph uicontrol">network</span> in each of the <span class="ph uicontrol">network-groups</span>
          it needs to attach to</li>

      </ol>

      <p class="p">If there is no <span class="ph uicontrol">network</span> available to a server, either because the
          <span class="ph uicontrol">interface-model</span> doesn't include the required
          <span class="ph uicontrol">network-group</span>, or there is no <span class="ph uicontrol">network</span> from
        that group in the appropriate part of the <span class="ph uicontrol">server-groups</span> hierarchy,
        then the Configuration Processor will generate an error.</p>

      <p class="p">The Configuration Processor will also generate an error if the
          <span class="ph uicontrol">server</span> address does not match any of the networks it will be
        connected to.</p>

    </div>

    <div class="section" id="input_model__networkroutevalidation"><h2 class="title sectiontitle">Network Route Validation</h2>
      <p class="p">Once the Configuration Processor has allocated all of the required
          <span class="ph uicontrol">servers</span> and matched them to the appropriate
          <span class="ph uicontrol">networks</span>, it validates that all
          <span class="ph uicontrol">service-components</span> have the required network routes to other
          <span class="ph uicontrol">service-components</span>.</p>

      <p class="p">It does this by using the data in the services section of the input model which provides
        details of which <span class="ph uicontrol">service-components</span> need to connect to each other.
        This data is not configurable by the administrator; however, it is provided as part of the
        HPE Helion OpenStack release.</p>

      <p class="p">For each <span class="ph uicontrol">server</span>, the Configuration Processor looks at the list of
          <span class="ph uicontrol">service-components</span> it runs and determines the network addresses of
        every other <span class="ph uicontrol">service-component</span> it needs to connect to (depending on
        the service, this might be a virtual IP address on a load balancer or a set of addresses for
        the service).</p>

      <p class="p">If the target address is on a <span class="ph uicontrol">network</span> that this
          <span class="ph uicontrol">server</span> is connected to, then there is no routing required. If the
        target address is on a different <span class="ph uicontrol">network</span>, then the Configuration
        Processor looks at each <span class="ph uicontrol">network</span> the server is connected to and looks
        at the routes defined in the corresponding <span class="ph uicontrol">network-group</span>. If the
          <span class="ph uicontrol">network-group</span> provides a route to the
          <span class="ph uicontrol">network-group</span> of the target address, then that route is considered
        valid.</p>

      <p class="p"><span class="ph uicontrol">Networks</span> within the same <span class="ph uicontrol">network-group</span> are
        always considered as routed to each other; <span class="ph uicontrol">networks</span> from different
          <span class="ph uicontrol">network-groups</span> must have an explicit entry in the
          <samp class="ph codeph">routes</samp> stanza of the <span class="ph uicontrol">network-group</span> definition.
        Routes to a named <span class="ph uicontrol">network-group</span> are always considered before a
        "default" route.</p>

      <p class="p">A warning is given for any routes which are using the "default" route since it is possible
        that the user did not intend to route this traffic. Such warning can be removed by adding
        the appropriate <span class="ph uicontrol">network-group</span> to the list of routes.</p>

      <p class="p">The Configuration Processor provides details of all routes between networks that it is
        expecting to be configured in the <samp class="ph codeph">info/route_info.yml</samp> file.</p>

      <p class="p">To illustrate how network routing is defined in the input model, consider the following
        example:</p>

      <p class="p">A compute server is configured to run nova-compute which requires access to the Neutron API
        servers and the VSA block storage service. The Neutron API servers have a virtual IP address
        provided by a load balancer in the INTERNAL-API network-group and the VSA service is
        connected to the ISCSI network-group. Nova-compute itself is part of the set of components
        attached by default to the MANAGEMENT network-group. The intention is to have virtual
        machines on the compute server connect to the VSA storage via the ISCSI network.</p>

      <p class="p">The physical network is shown below:</p>

      <p class="p"><img class="image" src="../media/inputmodel/hphelionopenstack_networkroutevalidation.png"></img></p>

      <p class="p"><a class="xref" href="../media/inputmodel/hphelionopenstack_networkroutevalidation_lg.png" target="_blank">Download a high-res version</a></p>

      <p class="p">The corresponding entries in the <span class="ph uicontrol">network-groups</span> are:</p>

      <pre class="pre codeblock">
  - name: INTERNAL-API  
    hostname-suffix: intapi
        
    load-balancers:
       - provider: ip-cluster
         name: lb
         components:
           - default
         roles:
           - internal
           - admin
        
       - name: MANAGEMENT
         hostname-suffix: mgmt
         hostname: true
        
         component-endpoints:
           - default
        
         routes:
           - INTERNAL-API
           - default
        
       - name: ISCSI
         hostname-suffix: iscsi
         
         component-endpoints:
            - vsa</pre>

      <p class="p">And the <span class="ph uicontrol">interface-model</span> for the compute server looks like this:</p>

      <pre class="pre codeblock">
  - name: INTERFACE_SET_COMPUTE
    network-interfaces:
      - name: BOND0
        device:
           name: bond0
        bond-data:
           options:
              mode: active-backup
              miimon: 200
              primary: hed5
           provider: linux
           devices:
              - name: hed4
              - name: hed5
        network-groups:
          - MANAGEMENT
          - ISCSI</pre>

      <p class="p">When validating the route from nova-compute to the Neutron API, the Configuration Processor
        will detect that the target address is on a network in the INTERNAL-API network group, and
        that the MANAGEMENT network (which is connected to the compute server) provides a route to
        this network, and thus considers this route valid.</p>

      <p class="p">When validating the route from nova-compute to VSA, the Configuration Processor will detect
        that the target address is on a network in the ISCSI network group. However, because there
        is no service component on the compute server connected to the ISCSI network (according to
        the network-group definition) the ISCSI network will not have been configured on the compute
        server (see <a class="xref" href="#input_model__servernetworkselection">Server Network
        Selection</a>. The Configuration Processor will detect that the MANAGEMENT network-group
        provides a "default" route and thus considers the route as valid (it is, of course, valid to
        route ISCSI traffic); however, because this is using the default route, a warning will be
        issued:</p>

      <pre class="pre codeblock">#   route-generator-2.0       WRN: Default routing used between networks
The following networks are using a 'default' route rule. To remove this warning 
either add an explicit route in the source network group or force the network to 
attach in the interface model used by the servers.
  MANAGEMENT-NET-RACK1 to ISCSI-NET
    helion-ccp-comp0001
  MANAGEMENT-NET-RACK 2 to ISCSI-NET
    helion-ccp-comp0002
  MANAGEMENT-NET-RACK 3 to SCSI-NET
    helion-ccp-comp0003</pre>

      <p class="p">To remove this warning, you can either add ISCSI to the list of routes in the MANAGEMENT
        network group (routed ISCSI traffic is still a valid configuration) or force the compute
        server to attach to the ISCSI network-group by adding it as a forced-network-group in the
        interface-model, like this:</p>

      <pre class="pre codeblock">
  - name: INTERFACE_SET_COMPUTE
      network-interfaces:
        - name: BOND0
          device:
            name: bond0
          bond-data:
            options:
               mode: active-backup
               miimon: 200
               primary: hed5
            provider: linux
            devices:
               - name: hed4
               - name: hed5
          network-groups:
             - MANAGEMENT
          forced-network-groups:
             - ISCSI</pre>

      <p class="p">With the attachment to the ISCSI network group forced, the Configuration Processor will
        attach the compute server to a network in that group and validate the route as either being
        direct or between networks in the same network-group.</p>

      <p class="p">The generated <samp class="ph codeph">route_info.yml</samp> file will include entries such as the
        following, showing the routes that are still expected to be configured between networks in
        the MANAGEMENT network group and the INTERNAL-API network group.</p>

      <pre class="pre codeblock">
  MANAGEMENT-NET-RACK1:
     INTERNAL-API-NET:
        default: false
        used_by:
           nova-compute:
              neutron-server:
              - helion-ccp-comp0001
   MANAGEMENT-NET-RACK2:
     INTERNAL-API-NET:
        default: false
        used_by:
          nova-compute:
            neutron-server:
            - helion-ccp-comp0003</pre>

    </div>


    <div class="section" id="input_model__configneutronprovidervlans"><h2 class="title sectiontitle">Configuring Neutron Provider VLANs</h2>
      <p class="p">Neutron provider VLANs are networks that map directly to an 802.1Q VLAN in the cloud
        provider’s physical network infrastructure. There are four aspects to a provider VLAN
        configuration:</p>

      <ul class="ul">
        <li class="li">Network infrastructure configuration (e.g. the top-of-rack switch)</li>

        <li class="li">Server networking configuration (for compute nodes and Neutron network nodes)</li>

        <li class="li">Neutron configuration file settings</li>

        <li class="li">Creation of the corresponding network objects in Neutron</li>

      </ul>

      <p class="p">The physical network infrastructure must be configured to convey the provider VLAN traffic
        as tagged VLANs to the cloud compute nodes and Neutron network nodes. Configuration of the
        physical network infrastructure is outside the scope of the HPE Helion OpenStack 2.0
        software.</p>

      <p class="p">HPE Helion OpenStack 2.0 automates the server networking configuration and the Neutron
        configuration based on information in the cloud definition. To configure the system for
        provider VLANs, specify the <samp class="ph codeph">neutron.networks.vlan</samp> tag with a
          <samp class="ph codeph">provider-physical-network</samp> attribute on one or more
          <span class="ph uicontrol">network-groups</span> as described in the <a class="xref" href="#input_model__neutron.networks.vlan">Network Groups</a> section. For example (some
        attributes omitted for brevity):</p>

      <pre class="pre codeblock">
  network-groups:

    - name: NET_GROUP_A
      tags:
        - neutron.networks.vlan:
              provider-physical-network: physnet1
        
    - name: NET_GROUP_B
      tags:
        - neutron.networks.vlan:
              provider-physical-network: physnet2</pre>

      <p class="p">A <span class="ph uicontrol">network-group</span> is associated with a server network interface via an
          <span class="ph uicontrol">interface-model</span> as described in the <a class="xref" href="#input_model__co_interfacemodels">Interface Models</a> section. For example (some
        attributes omitted for brevity):</p>

      <pre class="pre codeblock">
  interface-models:
     - name: INTERFACE_SET_X
       network-interfaces:
        - device:
              name: bond0
          network-groups:
            - NET_GROUP_A
        - device:
              name: hed3
          network-groups:
            - NET_GROUP_B</pre>

      <p class="p">A <span class="ph uicontrol">network-group</span> used for provider VLANs may contain only a single HP
        Helion OpenStack <span class="ph uicontrol">network</span>, because that VLAN must span all compute
        nodes and any Neutron network nodes/controllers (i.e. it is a single L2 segment). The HP
        Helion OpenStack <span class="ph uicontrol">network</span> must be defined with <samp class="ph codeph">tagged-vlan:
          false</samp>, otherwise a linux VLAN network interface will be created. For example:</p>

      <pre class="pre codeblock">
  networks:
     - name: NET_A
       tagged-vlan: false
       network-group: NET_GROUP_A
     - name: NET_B
       tagged-vlan: false
       network-group: NET_GROUP_B</pre>

      <p class="p">When the cloud is deployed, HPE Helion OpenStack 2.0 will create the appropriate bridges on
        the servers, and set the appropriate attributes in the Neutron configuration files (e.g.
        bridge_mappings).</p>

      <p class="p">After the cloud has been deployed, create Neutron network objects for each provider VLAN
        using the Neutron CLI:</p>

      <pre class="pre codeblock">neutron net-create --provider:network_type vlan --provider:physical_network physnet1 --provider:segmentation_id 101 mynet101</pre>

      <pre class="pre codeblock">neutron net-create --provider:network_type vlan --provider:physical_network physnet2 --provider:segmentation_id 234 mynet234</pre>

    </div>

    <div class="section" id="input_model__cpinfofiles"><h2 class="title sectiontitle">Configuration Processor Information Files</h2>
      
      <p class="p">In addition to producing all of the data needed to deploy and configure the cloud, the
        Configuration Processor also creates a number of information files that provide details of
        the resulting configuration.</p>

      <p class="p">These files can be found in <samp class="ph codeph">~/helion/my_cloud/info</samp> after the first
        Configuration Processor run. This directory is also rebuilt each time the Configuration
        Processor is run.</p>

      <p class="p">Most of the files are in YAML format, allowing them to be used in further automation tasks
        if required.</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="input_model__table" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" id="d26815e5351">File</th>

              <th class="entry" valign="top" id="d26815e5354">Provides details of</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">address_info.yml </td>

              <td class="entry" valign="top" headers="d26815e5354 ">IP address assignments on each network</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">net_info.yml </td>

              <td class="entry" valign="top" headers="d26815e5354 ">IP addresses assigned to services. For example, this provides the data needed
                to complete the configuration of VSA clusters.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">server_info.yml</td>

              <td class="entry" valign="top" headers="d26815e5354 ">How servers have been allocated, including their network configuration. Allows
                details of a server to be found from its ID</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">firewall_info.yml </td>

              <td class="entry" valign="top" headers="d26815e5354 ">All ports that are open on each network by the firewall configuration. Can be
                used if you want to configure an additional firewall in front of the API network,
                for example.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">route_info.yml </td>

              <td class="entry" valign="top" headers="d26815e5354 ">Routes that need to be configured between networks. </td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">service_info.yml</td>

              <td class="entry" valign="top" headers="d26815e5354 ">Details of where components of each service are deployed</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">CloudDiagram.txt</td>

              <td class="entry" valign="top" headers="d26815e5354 ">A pictorial representation of the cloud</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d26815e5351 ">explain.txt </td>

              <td class="entry" valign="top" headers="d26815e5354 ">An explanation of the decisions the Configuration Processor has made when
                allocating servers and networks</td>

            </tr>

          </tbody>

        </table>
</div>

      <p class="p">The following examples are taken from the <samp class="ph codeph">entry-scale-kvm-vsa</samp> example:</p>

    </div>

    <div class="section" id="input_model__address_info_yml"><h2 class="title sectiontitle">Address_info.yml</h2>
      <p class="p">This file provides details of all the IP addresses allocated by the Configuration
        Processor:</p>

      <pre class="pre codeblock">
  &lt;Network Groups&gt;
     &lt;List of Networks&gt;
        &lt;IP Address&gt;
           &lt;List of Aliases&gt;</pre>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
  EXTERNAL-API:
     EXTERNAL-API-NET:
        10.0.1.2:
           - helion-cp1-c1-m1-extapi
        10.0.1.3:
           - helion-cp1-c1-m2-extapi
        10.0.1.4:
           - helion-cp1-c1-m3-extapi
        10.0.1.5:
           - helion-cp1-vip-public-SWF-PRX-extapi
           - helion-cp1-vip-public-FRE-API-extapi
           - helion-cp1-vip-public-GLA-API-extapi
           - helion-cp1-vip-public-HEA-ACW-extapi
           - helion-cp1-vip-public-HEA-ACF-extapi
           - helion-cp1-vip-public-NEU-SVR-extapi
           - helion-cp1-vip-public-KEY-API-extapi
           - helion-cp1-vip-public-MON-API-extapi
           - helion-cp1-vip-public-HEA-API-extapi
           - helion-cp1-vip-public-NOV-API-extapi
           - helion-cp1-vip-public-CND-API-extapi
           - helion-cp1-vip-public-CEI-API-extapi
           - helion-cp1-vip-public-SHP-API-extapi
           - helion-cp1-vip-public-OPS-WEB-extapi
           - helion-cp1-vip-public-HZN-WEB-extapi
           - helion-cp1-vip-public-NOV-VNC-extapi
  EXTERNAL-VM:
     EXTERNAL-VM-NET: {}
  GUEST:
     GUEST-NET:
        10.1.1.2:
           - helion-cp1-c1-m1-guest
        10.1.1.3:
           - helion-cp1-c1-m2-guest
        10.1.1.4:
           - helion-cp1-c1-m3-guest
        10.1.1.5:
           - helion-cp1-comp0001-guest
  MANAGEMENT:
  ...</pre>

    </div>

    <div class="section" id="input_model__firewall_info_yml"><h2 class="title sectiontitle">Firewall_info.yml</h2>
      <p class="p">This file provides details of all the network ports that will be opened on the deployed
        cloud. Data is ordered by network. If you want to configure an external firewall in front of
        the External API network, then you would need to open the ports listed in that section.</p>

      <pre class="pre codeblock">
  &lt;Network Name&gt;
     List of:
        &lt;Port&gt;
        &lt;Protocol&gt;
        &lt;List of IP Addresses&gt;
        &lt;List of Components&gt;</pre>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
  EXTERNAL-API:
  -   addresses:
      - 10.0.1.5
      components:
      - horizon
      port: '443'
      protocol: tcp
  -   addresses:
      - 10.0.1.5
      components:
      - keystone-api
      port: '5000'
      protocol: tcp</pre>

      <p class="p"><em class="ph i">Port 443 (tcp) is open on network EXTERNAL-API for address 10.0.1.5 because it is used
          by Horizon</em></p>

      <p class="p"><em class="ph i">Port 5000 (tcp) is open on network EXTERNAL-API for address 10.0.1.5 because it is used
          by Keystone API</em></p>

    </div>

    <div class="section" id="input_model__net_info_yml"><h2 class="title sectiontitle">Net_info.yml</h2>
      <p class="p">This file provides details of IP addresses that have been allocated for a service. This
        data is typically used for service configuration after the initial deployment.</p>

      <pre class="pre codeblock">
   service_ips:
      &lt;Service-Name&gt;
          control_plane:  &lt;Control Plane Name&gt;
          cluster: &lt;Cluster or Resource Name&gt;
          network:  &lt;Network Name&gt;
          cluster_ip:
              hostname:  &lt;Hostname alias of address allocated for the cluster&gt;
              ip_address: &lt;IP address allocated for the cluster&gt;
          hosts: (list)
              hostname:  &lt;Hostname of server in the cluster&gt;
              ip_address: &lt;IP address of server the cluster&gt;</pre>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
   service_ips:
      vsa:
      -   cluster: vsa
          cluster_ip:
              hostname: helion-cp1-vsa-VSA-BLK-mgmt
              ip_address: 192.168.10.7
          control_plane: control-plane-1
          hosts:
          -   hostname: helion-cp1-vsa0001-VSA-BLK-mgmt
              ip_address: 192.168.10.2
          -   hostname: helion-cp1-vsa0002-VSA-BLK-mgmt
              ip_address: 192.168.10.8
          -   hostname: helion-cp1-vsa0003-VSA-BLK-mgmt
              ip_address: 192.168.10.12
          network: MANAGEMENT-NET</pre>

      <p class="p"><em class="ph i">Resource group "vsa" in "control-plane-1" has been allocated 192.168.10.7 on network
          MANAGEMENT-NET as a cluster address and consists of 3 servers with addresses 192.168.10.2,
          192.168.192.8, and 192.168.10.12.</em></p>

    </div>

    <div class="section" id="input_model__route_info_yml"><h2 class="title sectiontitle">Route_info.yml</h2>
      <p class="p">This file provides details of routes between networks that need to be configured. Available
        routes are defined in the input model as part of the <span class="ph uicontrol">network-groups</span>
        data; this file shows which routes will actually be used. HPE Helion OpenStack will
        reconfigure routing rules on the servers, you must configure the corresponding routes within
        your physical network. Routes must be configured to be symmetrical -- only the direction in
        which a connection is initiated is captured in this file.</p>

      <p class="p">Note that simple models may not require any routes, with all servers being attached to
        common L3 networks. The following example is taken from the
          <samp class="ph codeph">tech-preview/mid-scale-kvm-vsa</samp> example.</p>

      <pre class="pre codeblock">
  &lt;Source-Network-Name&gt;
      &lt;Target-Network-Name&gt;
           default:   &lt;true if this is this the result of a "default" route rule&gt;
           used_by:
                &lt;source-service&gt;
                     &lt;target-service&gt;
                     &lt;list of hosts using this route&gt;</pre>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
MANAGEMENT-NET-RACK1:
    INTERNAL-API-NET:
         default: false
         used_by:
            ceilometer-client:
            ceilometer-api:
            - helion-cp1-mtrmon-m1
            keystone-api:
            - helion-cp1-mtrmon-m1
     MANAGEMENT-NET-RACK2:
         default: false
         used_by:
            cinder-backup:
            rabbitmq:
            - helion-cp1-core-m1</pre>

      <p class="p"><em class="ph i">A route is required from network <strong class="ph b">MANAGEMENT-NET-RACK1</strong> to network
            <strong class="ph b">INTERNAL-API-NET</strong> so that <strong class="ph b">ceilometer-client</strong> can connect to
            <strong class="ph b">ceilometer-api</strong> from server <strong class="ph b">helion-cp1-mtrmon-m1</strong> and to <strong class="ph b">keystone-api
          </strong>from the same server.</em></p>

      <p class="p"><em class="ph i">A route is required from network <strong class="ph b">MANAGEMENT-NET-RACK1</strong> to network
            <strong class="ph b">MANAGEMENT-NET-RACK2</strong> so that <strong class="ph b">cinder-backup</strong> can connect to <strong class="ph b">rabbitmq</strong>
          from server <strong class="ph b">helion-cp1-core-m1</strong></em></p>

    </div>

    <div class="section" id="input_model__server_info_yml"><h2 class="title sectiontitle">Server_info.yml</h2>
      <p class="p">This file provides details of how servers have been allocated by the Configuration
        Processor. This provides the easiest way to find where a specific physical server
        (identified by <samp class="ph codeph">server-id</samp>) is being used.</p>

      <pre class="pre codeblock">
   &lt;Server-id&gt;
         failure-zone: &lt;failure zone that the server was allocated from&gt;
         hostname: &lt;hostname of the server&gt;
         net_data: &lt;network configuration&gt;
         state: &lt; "allocated" | "available" &gt;</pre>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
   controller1:
         failure-zone: AZ1
         hostname: helion-cp1-c1-m1-mgmt
         net_data:
              BOND0:
                   EXTERNAL-API-NET:
                       addr: 10.0.1.2
                       tagged-vlan: true
                       vlan-id: 101
                   EXTERNAL-VM-NET:
                       addr: null
                       tagged-vlan: true
                       vlan-id: 102
                   GUEST-NET:
                       addr: 10.1.1.2
                       tagged-vlan: true
                       vlan-id: 103
                   MANAGEMENT-NET:
                       addr: 192.168.10.3
                       tagged-vlan: false
                       vlan-id: 100
         state: allocated</pre>

    </div>

    <div class="section" id="input_model__service_info_yml"><h2 class="title sectiontitle">Service_info.yml</h2>
      <p class="p">This file provides details of how services are distributed across the cloud.</p>

      <pre class="pre codeblock">
  #60;control-plane&gt;
      &lt;service&gt;
          &lt;service component&gt;
               &lt;list of hosts&gt;</pre>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
  control-plane-1:
        neutron:
             neutron-client:
                - helion-cp1-c1-m1-mgmt
                - helion-cp1-c1-m2-mgmt
                - helion-cp1-c1-m3-mgmt
             neutron-dhcp-agent:
                - helion-cp1-c1-m1-mgmt
                - helion-cp1-c1-m2-mgmt
                - helion-cp1-c1-m3-mgmt
             neutron-l3-agent:
                 - helion-cp1-comp0001-mgmt
             neutron-lbaasv2-agent:
                 - helion-cp1-comp0001-mgmt
        ...</pre>

    </div>

    <div class="section" id="input_model__explain_txt"><h2 class="title sectiontitle">Explain.txt</h2>
      <p class="p">This file provides details of the server allocation and network configuration decisions the
        Configuration Processor has made. The sequence of information recorded is:</p>

      <ul class="ul">
        <li class="li">Any service components that are automatically added</li>

        <li class="li">Allocation of servers to clusters and resource groups</li>

        <li class="li">Resolution of the network configuration for each server</li>

        <li class="li">Resolution of the network configuration of each load balancer</li>

      </ul>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
        Add required services to control plane control-plane-1
        ======================================================
        control-plane-1: Added nova-metadata required by nova-api
        control-plane-1: Added swift-common required by swift-proxy
        control-plane-1: Added swift-rsync required by swift-account
        
        Allocate Servers for control plane control-plane-1
        ==================================================
        
        cluster: cluster1
        -----------------
          Persisted allocation for server 'controller1' (AZ1)
          Persisted allocation for server 'controller2' (AZ2)
          Searching for server with role ['CONTROLLER-ROLE'] in zones: set(['AZ3'])
          Allocated server 'controller3' (AZ3)
        
        resource: vsa
        -------------
          Persisted allocation for server 'vsa1' (AZ1)
          Persisted allocation for server 'vsa2' (AZ2)
          Persisted allocation for server 'vsa3' (AZ3)
          Searching for server with role ['VSA-ROLE'] in zones: set(['AZ1', 'AZ2', 'AZ3'])
        
        resource: compute
        -----------------
          Persisted allocation for server 'compute1' (AZ1)
          Searching for server with role ['COMPUTE-ROLE'] in zones: set(['AZ1', 'AZ2', 'AZ3'])
        
        Resolve Networks for Servers
        ============================
        server: helion-cp1-c1-m1
        ------------------------
          add EXTERNAL-API for component ip-cluster
          add MANAGEMENT for component ip-cluster
          add MANAGEMENT for lifecycle-manager (default)
          add MANAGEMENT for ntp-server (default)
          ...
          add MANAGEMENT for swift-rsync (default)
          add GUEST for tag neutron.networks.vxlan (neutron-openvswitch-agent)
          add EXTERNAL-VM for tag neutron.l3_agent.external_network_bridge (neutron-vpn-agent)
          Using persisted address 10.0.1.2 for server helion-cp1-c1-m1 on network EXTERNAL-API-NET
          Using address 192.168.10.3 for server helion-cp1-c1-m1 on network MANAGEMENT-NET
          Using persisted address 10.1.1.2 for server helion-cp1-c1-m1 on network GUEST-NET
        
        …
        Define load balancers
        =====================
        
        Load balancer: extlb
        --------------------
          Using persisted address 10.0.1.5 for vip extlb helion-cp1-vip-extlb-extapi on network EXTERNAL-API-NET
          Add nova-api for roles ['public'] due to 'default'
          Add glance-api for roles ['public'] due to 'default'
          ...
        
        Map load balancers to providers
        ===============================
        
        Network EXTERNAL-API-NET
        ------------------------
          10.0.1.5: ip-cluster nova-api roles: ['public'] vip-port: 8774 host-port: 8774
          10.0.1.5: ip-cluster glance-api roles: ['public'] vip-port: 9292 host-port: 9292
          10.0.1.5: ip-cluster keystone-api roles: ['public'] vip-port: 5000 host-port: 5000
          10.0.1.5: ip-cluster swift-proxy roles: ['public'] vip-port: 8080 host-port: 8080
          10.0.1.5: ip-cluster monasca-api roles: ['public'] vip-port: 8070 host-port: 8070
          10.0.1.5: ip-cluster sherpa-api roles: ['public'] vip-port: 21131 host-port: 21131
          10.0.1.5: ip-cluster heat-api-cfn roles: ['public'] vip-port: 8000 host-port: 8000
          10.0.1.5: ip-cluster ops-console-web roles: ['public'] vip-port: 9095 host-port: 9095
          10.0.1.5: ip-cluster heat-api roles: ['public'] vip-port: 8004 host-port: 8004
          10.0.1.5: ip-cluster nova-novncproxy roles: ['public'] vip-port: 6080 host-port: 6080
          10.0.1.5: ip-cluster neutron-server roles: ['public'] vip-port: 9696 host-port: 9696
          10.0.1.5: ip-cluster heat-api-cloudwatch roles: ['public'] vip-port: 8003 host-port: 8003
          10.0.1.5: ip-cluster ceilometer-api roles: ['public'] vip-port: 8777 host-port: 8777
          10.0.1.5: ip-cluster freezer-api roles: ['public'] vip-port: 9090 host-port: 9090
          10.0.1.5: ip-cluster horizon roles: ['public'] vip-port: 443 host-port: 80
          10.0.1.5: ip-cluster cinder-api roles: ['public'] vip-port: 8776 host-port: 8776</pre>

    </div>

    <div class="section" id="input_model__clouddiagram_txt"><h2 class="title sectiontitle">Cloud_diagram.txt</h2>
      <p class="p">This file provides a pictorial representation of the cloud.</p>

      <p class="p">Example:</p>

      <pre class="pre codeblock">
        +-ControlPlane: region1 (control-plane-1)----------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                                              |
        | +-Cluster cluster1 ()--------------------------------------------------------------------------------------------------------------------------------------+ |
        | |                                                                                                                                                          | |
        | | +-helion-cp1-c1-m1 (192.168.10.3)--------------+    +-helion-cp1-c1-m2 (192.168.10.4)--------------+    +-helion-cp1-c1-m3 (192.168.10.5)--------------+ | |
        | | |                                              |    |                                              |    |                                              | | |
        | | | ceilometer                                   |    | ceilometer                                   |    | ceilometer                                   | | |
        | | |   ceilometer-agent-central                   |    |   ceilometer-agent-central                   |    |   ceilometer-agent-central                   | | |
        | | |   ceilometer-agent-notification              |    |   ceilometer-agent-notification              |    |   ceilometer-agent-notification              | | |
        | | |   ceilometer-api                             |    |   ceilometer-api                             |    |   ceilometer-api                             | | |
        | | |   ceilometer-client                          |    |   ceilometer-client                          |    |   ceilometer-client                          | | |
        | | |   ceilometer-collector                       |    |   ceilometer-collector                       |    |   ceilometer-collector                       | | |
        | | |   ceilometer-common                          |    |   ceilometer-common                          |    |   ceilometer-common                          | | |
        | | |   ceilometer-expirer                         |    |   ceilometer-expirer                         |    |   ceilometer-expirer                         | | |
        | | | cinder                                       |    | cinder                                       |    | cinder                                       | | |
        | | |   cinder-api                                 |    |   cinder-api                                 |    |   cinder-api                                 | | |
        | | |   cinder-backup                              |    |   cinder-backup                              |    |   cinder-backup                              | | |
        | | |   cinder-client                              |    |   cinder-client                              |    |   cinder-client                              | | |
        | | |   cinder-scheduler                           |    |   cinder-scheduler                           |    |   cinder-scheduler                           | | |
        | | |   cinder-volume                              |    |   cinder-volume                              |    |   cinder-volume                              | | |
        | | | foundation                                   |    | foundation                                   |    | foundation                                   | | |
        | | |   apache2                                    |    |   apache2                                    |    |   apache2                                    | | |
        | | |   ip-cluster                                 |    |   ip-cluster                                 |    |   ip-cluster                                 | | |
        | | |   kafka                                      |    |   kafka                                      |    |   kafka                                      | | |
        | | |   memcached                                  |    |   memcached                                  |    |   memcached                                  | | |
        | | |   mysql                                      |    |   mysql                                      |    |   mysql                                      | | |
        | | |   ntp-server                                 |    |   ntp-server                                 |    |   ntp-server                                 | | |
        | | |   openstack-client                           |    |   openstack-client                           |    |   openstack-client                           | | |
        | | |   rabbitmq                                   |    |   rabbitmq                                   |    |   rabbitmq                                   | | |
        | | |   sherpa-api                                 |    |   sherpa-api                                 |    |   sherpa-api                                 | | |
        | | |   storm                                      |    |   storm                                      |    |   storm                                      | | |
        | | |   stunnel                                    |    |   stunnel                                    |    |   stunnel                                    | | |
        | | |   swift-common                               |    |   swift-common                               |    |   swift-common                               | | |
        | | |   swift-rsync                                |    |   swift-rsync                                |    |   swift-rsync                                | | |
        | | |   vertica                                    |    |   vertica                                    |    |   vertica                                    | | |
        | | |   zookeeper                                  |    |   zookeeper                                  |    |   zookeeper                                  | | |
        | | | freezer                                      |    | freezer                                      |    | freezer                                      | | |
        | | |   freezer-agent                              |    |   freezer-agent                              |    |   freezer-agent                              | | |
        | | |   freezer-api                                |    |   freezer-api                                |    |   freezer-api                                | | |
        | | | glance                                       |    | glance                                       |    | glance                                       | | |
        | | |   glance-api                                 |    |   glance-api                                 |    |   glance-api                                 | | |
        | | |   glance-client                              |    |   glance-client                              |    |   glance-client                              | | |
        | | |   glance-registry                            |    |   glance-registry                            |    |   glance-registry                            | | |
        | | | heat                                         |    | heat                                         |    | heat                                         | | |
        | | |   heat-api                                   |    |   heat-api                                   |    |   heat-api                                   | | |
        | | |   heat-api-cfn                               |    |   heat-api-cfn                               |    |   heat-api-cfn                               | | |
        | | |   heat-api-cloudwatch                        |    |   heat-api-cloudwatch                        |    |   heat-api-cloudwatch                        | | |
        | | |   heat-client                                |    |   heat-client                                |    |   heat-client                                | | |
        | | |   heat-engine                                |    |   heat-engine                                |    |   heat-engine                                | | |
        | | | horizon                                      |    | horizon                                      |    | horizon                                      | | |
        | | |   horizon                                    |    |   horizon                                    |    |   horizon                                    | | |
        | | | keystone                                     |    | keystone                                     |    | keystone                                     | | |
        | | |   keystone-api                               |    |   keystone-api                               |    |   keystone-api                               | | |
        | | |   keystone-client                            |    |   keystone-client                            |    |   keystone-client                            | | |
        | | | logging                                      |    | logging                                      |    | logging                                      | | |
        | | |   logging-producer                           |    |   logging-producer                           |    |   logging-producer                           | | |
        | | |   logging-server                             |    |   logging-server                             |    |   logging-server                             | | |
        | | | monasca                                      |    | monasca                                      |    | monasca                                      | | |
        | | |   monasca-agent                              |    |   monasca-agent                              |    |   monasca-agent                              | | |
        | | |   monasca-api                                |    |   monasca-api                                |    |   monasca-api                                | | |
        | | |   monasca-client                             |    |   monasca-client                             |    |   monasca-client                             | | |
        | | |   monasca-notifier                           |    |   monasca-notifier                           |    |   monasca-notifier                           | | |
        | | |   monasca-persister                          |    |   monasca-persister                          |    |   monasca-persister                          | | |
        | | |   monasca-threshold                          |    |   monasca-threshold                          |    |   monasca-threshold                          | | |
        | | | neutron                                      |    | neutron                                      |    | neutron                                      | | |
        | | |   neutron-client                             |    |   neutron-client                             |    |   neutron-client                             | | |
        | | |   neutron-dhcp-agent                         |    |   neutron-dhcp-agent                         |    |   neutron-dhcp-agent                         | | |
        | | |   neutron-metadata-agent                     |    |   neutron-metadata-agent                     |    |   neutron-metadata-agent                     | | |
        | | |   neutron-ml2-plugin                         |    |   neutron-ml2-plugin                         |    |   neutron-ml2-plugin                         | | |
        | | |   neutron-openvswitch-agent                  |    |   neutron-openvswitch-agent                  |    |   neutron-openvswitch-agent                  | | |
        | | |   neutron-server                             |    |   neutron-server                             |    |   neutron-server                             | | |
        | | |   neutron-vpn-agent                          |    |   neutron-vpn-agent                          |    |   neutron-vpn-agent                          | | |
        | | | nova                                         |    | nova                                         |    | nova                                         | | |
        | | |   nova-api                                   |    |   nova-api                                   |    |   nova-api                                   | | |
        | | |   nova-client                                |    |   nova-client                                |    |   nova-client                                | | |
        | | |   nova-conductor                             |    |   nova-conductor                             |    |   nova-conductor                             | | |
        | | |   nova-console-auth                          |    |   nova-console-auth                          |    |   nova-console-auth                          | | |
        | | |   nova-metadata                              |    |   nova-metadata                              |    |   nova-metadata                              | | |
        | | |   nova-novncproxy                            |    |   nova-novncproxy                            |    |   nova-novncproxy                            | | |
        | | |   nova-scheduler                             |    |   nova-scheduler                             |    |   nova-scheduler                             | | |
        | | | operations                                   |    | operations                                   |    | operations                                   | | |
        | | |   lifecycle-manager                          |    |   lifecycle-manager                          |    |   lifecycle-manager                          | | |
        | | |   lifecycle-manager-target                   |    |   lifecycle-manager-target                   |    |   lifecycle-manager-target                   | | |
        | | |   ops-console-monitor                        |    |   ops-console-monitor                        |    |   ops-console-monitor                        | | |
        | | |   ops-console-web                            |    |   ops-console-web                            |    |   ops-console-web                            | | |
        | | | swift                                        |    | swift                                        |    | swift                                        | | |
        | | |   swift-account                              |    |   swift-account                              |    |   swift-account                              | | |
        | | |   swift-client                               |    |   swift-client                               |    |   swift-client                               | | |
        | | |   swift-container                            |    |   swift-container                            |    |   swift-container                            | | |
        | | |   swift-object                               |    |   swift-object                               |    |   swift-object                               | | |
        | | |   swift-proxy                                |    |   swift-proxy                                |    |   swift-proxy                                | | |
        | | |   swift-ring-builder                         |    |   swift-ring-builder                         |    |   swift-ring-builder                         | | |
        | | | vsa-storage                                  |    | vsa-storage                                  |    | vsa-storage                                  | | |
        | | |   cmc-service                                |    |   cmc-service                                |    |   cmc-service                                | | |
        | | |                                              |    |                                              |    |                                              | | |
        | | | -------------------------------------------- |    | -------------------------------------------- |    | -------------------------------------------- | | |
        | | |                                              |    |                                              |    |                                              | | |
        | | | bond0 (hed3, hed4)                           |    | bond0 (hed3, hed4)                           |    | bond0 (hed3, hed4)                           | | |
        | | |   EXTERNAL-API-NET (10.0.1.2)                |    |   EXTERNAL-API-NET (10.0.1.3)                |    |   EXTERNAL-API-NET (10.0.1.4)                | | |
        | | |   EXTERNAL-VM-NET                            |    |   EXTERNAL-VM-NET                            |    |   EXTERNAL-VM-NET                            | | |
        | | |   GUEST-NET (10.1.1.2)                       |    |   GUEST-NET (10.1.1.3)                       |    |   GUEST-NET (10.1.1.4)                       | | |
        | | |   MANAGEMENT-NET (192.168.10.3)              |    |   MANAGEMENT-NET (192.168.10.4)              |    |   MANAGEMENT-NET (192.168.10.5)              | | |
        | | |                                              |    |                                              |    |                                              | | |
        | | +----------------------------------------------+    +----------------------------------------------+    +----------------------------------------------+ | |
        | |                                                                                                                                                          | |
        | +----------------------------------------------------------------------------------------------------------------------------------------------------------+ |
        |                                                                                                                                                              |
        | +-compute------------------------------------------+                                                                                                         |
        | |                                                  |                                                                                                         |
        | | +-COMPUTE-ROLE (AZ1) (1 servers)---------------+ |                                                                                                         |
        | | |                                              | |                                                                                                         |
        | | | foundation                                   | |                                                                                                         |
        | | |   ntp-client                                 | |                                                                                                         |
        | | |   stunnel                                    | |                                                                                                         |
        | | | freezer                                      | |                                                                                                         |
        | | |   freezer-agent                              | |                                                                                                         |
        | | | logging                                      | |                                                                                                         |
        | | |   logging-producer                           | |                                                                                                         |
        | | | monasca                                      | |                                                                                                         |
        | | |   monasca-agent                              | |                                                                                                         |
        | | | neutron                                      | |                                                                                                         |
        | | |   neutron-l3-agent                           | |                                                                                                         |
        | | |   neutron-lbaasv2-agent                      | |                                                                                                         |
        | | |   neutron-metadata-agent                     | |                                                                                                         |
        | | |   neutron-openvswitch-agent                  | |                                                                                                         |
        | | | nova                                         | |                                                                                                         |
        | | |   nova-compute                               | |                                                                                                         |
        | | |   nova-compute-kvm                           | |                                                                                                         |
        | | | operations                                   | |                                                                                                         |
        | | |   lifecycle-manager-target                   | |                                                                                                         |
        | | |                                              | |                                                                                                         |
        | | | -------------------------------------------- | |                                                                                                         |
        | | |                                              | |                                                                                                         |
        | | | bond0 (hed3, hed4)                           | |                                                                                                         |
        | | |   EXTERNAL-VM-NET                            | |                                                                                                         |
        | | |   GUEST-NET (10.1.1.0/24)                    | |                                                                                                         |
        | | |   MANAGEMENT-NET (192.168.10.0/24)           | |                                                                                                         |
        | | |                                              | |                                                                                                         |
        | | +----------------------------------------------+ |                                                                                                         |
        | +--------------------------------------------------+                                                                                                         |
        |                                                                                                                                                              |
        | +-vsa------------------------------------------------------------------------------------------------------------------------------------------------------+ |
        | |                                                                                                                                                          | |
        | | +-VSA-ROLE (AZ1) (1 servers)-------------------+    +-VSA-ROLE (AZ2) (1 servers)-------------------+    +-VSA-ROLE (AZ3) (1 servers)-------------------+ | |
        | | |                                              |    |                                              |    |                                              | | |
        | | | foundation                                   |    | foundation                                   |    | foundation                                   | | |
        | | |   ntp-client                                 |    |   ntp-client                                 |    |   ntp-client                                 | | |
        | | |   stunnel                                    |    |   stunnel                                    |    |   stunnel                                    | | |
        | | | freezer                                      |    | freezer                                      |    | freezer                                      | | |
        | | |   freezer-agent                              |    |   freezer-agent                              |    |   freezer-agent                              | | |
        | | | logging                                      |    | logging                                      |    | logging                                      | | |
        | | |   logging-producer                           |    |   logging-producer                           |    |   logging-producer                           | | |
        | | | monasca                                      |    | monasca                                      |    | monasca                                      | | |
        | | |   monasca-agent                              |    |   monasca-agent                              |    |   monasca-agent                              | | |
        | | | operations                                   |    | operations                                   |    | operations                                   | | |
        | | |   lifecycle-manager-target                   |    |   lifecycle-manager-target                   |    |   lifecycle-manager-target                   | | |
        | | | vsa-storage                                  |    | vsa-storage                                  |    | vsa-storage                                  | | |
        | | |   vsa                                        |    |   vsa                                        |    |   vsa                                        | | |
        | | |                                              |    |                                              |    |                                              | | |
        | | | -------------------------------------------- |    | -------------------------------------------- |    | -------------------------------------------- | | |
        | | |                                              |    |                                              |    |                                              | | |
        | | | bond0 (hed3, hed4)                           |    | bond0 (hed3, hed4)                           |    | bond0 (hed3, hed4)                           | | |
        | | |   MANAGEMENT-NET (192.168.10.0/24)           |    |   MANAGEMENT-NET (192.168.10.0/24)           |    |   MANAGEMENT-NET (192.168.10.0/24)           | | |
        | | |                                              |    |                                              |    |                                              | | |
        | | +----------------------------------------------+    +----------------------------------------------+    +----------------------------------------------+ | |
        | +----------------------------------------------------------------------------------------------------------------------------------------------------------+ |
        |                                                                                                                                                              |
        +--------------------------------------------------------------------------------------------------------------------------------------------------------------+
      </pre>

    </div>

  </div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>