
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The Keystone identity service is a vital part of HPE Helion OpenStack®, and as such it is installed automatically by the HPE Helion OpenStack installer (just after MySQL and RabbitMQ). The recommended ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="topic"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: Configuring the Identity Service"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="topic_qmz_fg3_bt"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: Configuring the Identity Service</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="topic_qmz_fg3_bt">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

  <h1 class="title topictitle1">HPE Helion OpenStack<sup>®</sup> 2.0: Configuring the Identity Service</h1>

  <div class="body">
    <div class="section" id="topic_qmz_fg3_bt__intro"><p class="p">The Keystone identity service is a vital part of HPE Helion OpenStack®, and as such it is
        installed automatically by the HPE Helion OpenStack installer (just after MySQL and
        RabbitMQ). The recommended way of installing the identity service is to allow the installer
        to install it with the default configuration. Once your cloud is up and running, you can
        customize Keystone in a number of ways, including integration with LDAP servers. </p>

    </div>

    <div class="section" id="topic_qmz_fg3_bt__settings"><h2 class="title sectiontitle">Default Settings</h2>
      <strong class="ph b">Identity Service Configuration Settings</strong> The identity service configuration options are
      described in the OpenStack documentation on the <a class="xref" href="http://docs.openstack.org/kilo/config-reference/content/keystone-configuration-file.html" target="_blank">identity service configuration file (for Kilo) page</a> on
      the OpenStack site. <p class="p"> </p>

      <strong class="ph b">Default Domain and Service Accounts</strong><p class="p">The "default" domain is automatically created
        during the installation to contain the various, required OpenStack service accounts
        including the following:</p>
<ul class="ul" id="topic_qmz_fg3_bt__ul_tzb_lpd_bt">
        <li class="li">neutron</li>

        <li class="li">glance</li>

        <li class="li">swift-monitor</li>

        <li class="li">ceilometer</li>

        <li class="li">swift</li>

        <li class="li">monasca-agent</li>

        <li class="li">glance-swift</li>

        <li class="li">swift-demo</li>

        <li class="li">nova</li>

        <li class="li">monascal</li>

        <li class="li">logging</li>

        <li class="li">demo </li>

        <li class="li">heat</li>

        <li class="li">cinder</li>

        <li class="li">admin</li>

      </ul>
<p class="p">These are required accounts and are used by the underlying OpenStack services. These
        accounts should not be removed or reassigned to a different domain. The "default" domain
        should only be used for these service accounts.</p>
<p class="p"></p>
<strong class="ph b">Post-Installation Verification and
        Administration</strong><p class="p">Keystone query and administration tasks can be performed using the
        OpenStack command line utility. The utility is installed by the installer onto the
        deployer/lifecycle-manager node. Also, the installer installs convenient *.osrc files which
        contain exports of environment variables used by OpenStack CLI.</p>
<div class="p">
        <div class="note note"><span class="notetitle">Note:</span> </div>
The identity service administration tasks should be performed by an <em class="ph i">admin</em> user
        with a token scoped to the <em class="ph i">default</em> domain via the Keystone v3 identity API. These
        settings are preconfigured in the <em class="ph i">keystone.osrc</em> file. </div>
</div>


    <div class="section" id="topic_qmz_fg3_bt__examples"> Here are some examples:
      <pre class="pre codeblock">
      
# Set environment variables needed for Keystone administration
stack@hLinux:~$ source keystone.osrc 
 
# List users in the default domain
# These users are created by the installer in the MySQL back end
stack@hLinux:~$ openstack user list
+----------------------------------+---------------+
| ID                               | Name          |
+----------------------------------+---------------+
| 341027a3255a4727950fb927389c3688 | neutron       |
| 39bcb0edc9564d7c9dfa8ed18a34b3a5 | glance        |
| 3e62e6aa950343ad8117523fad19d327 | swift-monitor |
| 409015168eee476e8b98975391fdf7d1 | ceilometer    |
| 4f9ff011e160478db4f8a91cc27d8a87 | swift         |
| 6ce855e41ef74270b222a0a10a7e0106 | monasca-agent |
| 71d65560801b4d21a15f4f68c78a0c82 | glance-swift  |
| 8ec70b8f54f44f70a624db5dbd24903f | swift-demo    |
| 992d44994476476caa9c7ebbc77f1537 | nova          |
| c41e12469cbc43c3adc71807bdb8dbe8 | monasca       |
| c6976c9aa50647d987004ec52daf18a1 | logging       |
| cc81b4961c094ff29d290c096948af62 | demo          |
| d37fe7f76d0f4e63aaaa2c51f927da1e | heat          |
| d4a1a40662cc4757b0d2fc7bcfc1b60f | cinder        |
| fed1c038d9e64392890b6b44c38f5bbb | admin         |
+----------------------------------+---------------+
 
# List domains created by the installer
stack@hLinux:~$ openstack domain list
+----------------------------------+---------+---------+----------------------------------------------------------------------+
| ID                               | Name    | Enabled | Description                                                          |
+----------------------------------+---------+---------+----------------------------------------------------------------------+
| 6740dbf7465a4108a36d6476fc967dbd | heat    | True    | Owns users and projects created by heat                              |
| default                          | Default | True    | Owns users and tenants (i.e. projects) available on Identity API v2. |
+----------------------------------+---------+---------+----------------------------------------------------------------------+
 
# List roles
stack@hLinux:~$ openstack role list
+----------------------------------+-----------------+
| ID                               | Name            |
+----------------------------------+-----------------+
| 3ab2ed4754aa4379af8454937ea5efb4 | swiftoperator   |
| 3af37c0effb74d92adc9cc6cecb148f8 | ResellerAdmin   |
| 7e80806758414c398c8cebbc8044ae33 | KeystoneAdmin   |
| 90dbc08989f94d958eeda44af082cf81 | monasca-agent   |
| 9fe2ff9ee4384b1894a90878d3e92bab | _member_        |
| b398322103504546a070d607d02618ad | admin           |
| c7211fd83ecc4cce960538471e718db3 | Member          |
| cb79abf164c5431797a01bc92791b840 | monasca-user    |
| d76c511534684a9bab2a7038dfb2fd81 | heat_stack_user |
+----------------------------------+-----------------+
 
# List admin user role assignment within default domain
# This indicates that the admin user is assigned the admin role within the default domain
stack@hLinux:~$ openstack role assignment list --user admin --domain default
+----------------------------------+----------------------------------+-------+---------+---------+
| Role                             | User                             | Group | Project | Domain  |
+----------------------------------+----------------------------------+-------+---------+---------+
| b398322103504546a070d607d02618ad | fed1c038d9e64392890b6b44c38f5bbb |       |         | default |
+----------------------------------+----------------------------------+-------+---------+---------+
 
# Create a new user in default domain (MySQL)
stack@hLinux:~$ openstack user create --domain default --password-prompt --email test@example.com --description "Test User" --enable testuser
User Password:
Repeat User Password:
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Test User                        |
| domain_id   | default                          |
| email       | test@example.com                 |
| enabled     | True                             |
| id          | 8aad69acacf0457e9690abf8c557754b |
| name        | testuser                         |
+-------------+----------------------------------+
 
# Assign admin role for testuser within the default domain
# Just for demonstration purposes - do not do this in a production environment!
stack@hLinux:~$ openstack role add admin --user testuser --domain default
stack@hLinux:~$ openstack role assignment list --user testuser --domain default
+----------------------------------+----------------------------------+-------+---------+---------+
| Role                             | User                             | Group | Project | Domain  |
+----------------------------------+----------------------------------+-------+---------+---------+
| b398322103504546a070d607d02618ad | 8aad69acacf0457e9690abf8c557754b |       |         | default |
+----------------------------------+----------------------------------+-------+---------+---------+
 
</pre>

    </div>

    <div class="section"><h2 class="title sectiontitle">Pre-Installed Roles</h2>

<p class="p"> The following are the pre-installed Roles. Additional roles can be created by UIDs with the
        'admin' role. Roles are defined on a per service basis (more information available at: <a class="xref" href="http://docs.openstack.org/user-guide-admin/manage_projects_users_and_roles.html" target="_blank">Manage projects, users, and roles</a> on the OpenStack
        web site.</p>

<ul class="ul"><li class="li">
  Role</li>

  <li class="li"> Description</li>

  <li class="li">admin	 </li>

  <li class="li">_member_	 </li>

</ul>


</div>



  </div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>