
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Horizon does not support Keystone v3 or domains by default. As a result: the admin cannot perform identity management using the Horizon dashboard if the admin creates a user though the CLI using a ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="topic"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: Configuring Horizon for Keystone v3"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="layout" content="default"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="topic1606"></meta><meta name="DC.Language" content="en-us"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: Configuring Horizon for Keystone v3</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="topic1606">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

<h1 class="title topictitle1">HPE Helion OpenStack<sup>Â®</sup> 2.0: Configuring Horizon for Keystone v3</h1>


<div class="body">

<p class="p">Horizon does not support Keystone v3 or domains by default.</p>

<p class="p">As a result:</p>

<ul class="ul">
<li class="li">the admin cannot perform identity management using the Horizon dashboard</li>

<li class="li">if the admin creates a user though the CLI using a Keystone v3 token, the user will not be able
        to log in to the Horizon dashboard. Any user created from within Horizon is able to log into
        Horizon. </li>

  <li class="li">The Keystone v3 endpoint is in the format: http://&lt;host&gt;:&lt;port&gt;/v3 and should be the internal URL. 
    The local_settings.py file will have the endpoint for v2 by default.</li>

</ul>

<p class="p">To use Keystone v3 in Horizon (perhaps to use LDAP), you can manually change the settings (see
      below). When Keystone v3 is enabled, all User, Project, and Domain management must be done via
      the CLI. The Identity panel will not be visible in Horizon.</p>

<p class="p">Steps to switch Horizon from Keystone v2 to Keystone v3:</p>

<ol class="ol">
<li class="li">In each controller node, navigate to the <samp class="ph codeph">local_settings.py</samp> file located in
          <samp class="ph codeph">/opt/stack/service/horizon-20151019T060521Z/etc/local_settings.py </samp>  Note
        change build label from 20151019T060521Z if necessary for your build.</li>

<li class="li">Edit the file as follows:<p class="p">a. Set Keystone version to
          v3:</p>
<pre class="pre codeblock">OPENSTACK_API_VERSIONS = {
"identity": 3,
}</pre>
<p class="p">b. Enable
          Multi-domain
          support:</p>
<pre class="pre codeblock">OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True</pre>
<p class="p">c.
          Point to Keystone v3
        endpoint:</p>
<pre class="pre codeblock">OPENSTACK_KEYSTONE_URL = "http://%s:5000/v3" % OPENSTACK_HOST</pre>
</li>

<li class="li">Restart the Apache server in each controller
        nodes:<pre class="pre codeblock">sudo service apache2 restart</pre>
</li>

</ol>

</div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>