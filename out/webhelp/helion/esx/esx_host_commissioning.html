
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="ESX host commissioning is a functionality provided to a user to add additional ESX hosts to an already-activated cluster. The following steps detail how to commission a new a host to an already ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="topic"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: ESX Host Commissioning"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="topic_nfp_xtf_rt"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: ESX Host Commissioning</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="topic_nfp_xtf_rt">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

  <h1 class="title topictitle1">HPE Helion OpenStack<sup>Â®</sup> 2.0: ESX Host Commissioning</h1>

  <div class="body">
    <p class="p">ESX host commissioning is a functionality provided to a user to add additional ESX hosts to
            an already-activated cluster. </p>

    <div class="p">The following steps detail how to commission a new a host to an already activated cluster.<ol class="ol" id="topic_nfp_xtf_rt__ol_xls_25f_rt">
                <li class="li">List the current state of the cluster using EON python
                        client:<pre class="pre codeblock"># eon cluster-list --vcenter-id &lt;vCenter ID&gt;</pre>
<p class="p">For
                        example:</p>
<pre class="pre codeblock"># eon cluster-list --vcenter-id BC9DED4E-1639-481D-B190-2B54A2BF5674
+------------+------------+-----------------+-----------------+
| MOID       | Name       | Datacenter      | Import Status   |
+------------+------------+-----------------+-----------------+
| domain-c21 | Cluster1   | DC1             | activated       |
+------------+------------+-----------------+-----------------+</pre>
</li>

                <li class="li">Add the host in the maintenance mode to the already activated cluster:<p class="p"><img class="image" id="topic_nfp_xtf_rt__image_it1_3bp_lt" src="../../media/esx/eon_service_host1.png"></img></p>

                    Any host that is in maintenance mode and without OVSvAPP will be considered as a
                    new host to be activated. <div class="note note"><span class="notetitle">Note:</span> You can also activate multiple
                    hosts.</div>
</li>

                <li class="li">Run the following command to import the eon
                        cluster:<pre class="pre codeblock"><samp class="ph codeph"># eon cluster-import --vcenter-id &lt;vCenter ID&gt; --cluster-name &lt;Cluster Name&gt; --cluster-moid &lt;Cluster Moid&gt;</samp></pre>
<p class="p">For
                        example:</p>
<pre class="pre codeblock"># eon cluster-import --vcenter-id BC9DED4E-1639-481D-B190-2B54A2BF5674 --cluster-name Cluster1 --cluster-moid domain-c21
+--------------+-----------+
| Property     | Value     |
+--------------+-----------+
| cpu_free     | 83071.73  |
| cpu_total    | 83072     |
| cpu_used     | 0.27      |
| datacenter   | DC1       |
| disk_free    | 1022.79   |
| disk_total   | 1023.75   |
| errors       | []        |
| memory_free  | 496.82    |
| memory_total | 511.76    |
| memory_used  | 14.94     |
| name         | Cluster1  |
| state        | importing |
| switches     | []        |
+--------------+-----------+</pre>
<p class="p">After
                        successful import the cluster state will change to partially_activated and
                        the hosts would have moved to folder with ovsvapp installed.</p>
</li>

                <li class="li">To view the cluster state, execute the following
                        command:<pre class="pre codeblock"># eon cluster-list --vcenter-id &lt;vCenter ID&gt;</pre>
<p class="p">For
                        example:</p>
<pre class="pre codeblock"># eon cluster-list --vcenter-id BC9DED4E-1639-481D-B190-2B54A2BF5674
+------------+----------+------------+---------------------+
| MOID       | Name     | Datacenter | Import Status       |
+------------+----------+------------+---------------------+
| domain-c21 | Cluster1 | DC1        | partially_activated |
+------------+----------+------------+---------------------+</pre>
<p class="p"><img class="image" id="topic_nfp_xtf_rt__image_ush_nbp_lt" src="../../media/esx/eon_service_host2.png"></img></p>
</li>

                <li class="li">Run the cluster-activate
                        command:<pre class="pre codeblock"><samp class="ph codeph"># eon <samp class="ph codeph">cluster-activate</samp> --vcenter-id &lt;vCenter ID&gt; --cluster-moid &lt;Cluster Moid&gt; </samp></pre>
<p class="p">For
                        example:</p>
<pre class="pre codeblock">eon cluster-activate --vcenter-id BC9DED4E-1639-481D-B190-2B54A2BF5674 --cluster-moid domain-c22</pre>
<p class="p">After
                        successful activation, the cluster state will change to activated.</p>
</li>

                <li class="li">To determine whether the cluster is activate or not, run the following
                        command:<pre class="pre codeblock"># eon cluster-list --vcenter-id &lt;vCenter ID&gt;</pre>
<p class="p">For
                        example:</p>
<pre class="pre codeblock"># eon cluster-list --vcenter-id BC9DED4E-1639-481D-B190-2B54A2BF5674
+------------+----------+------------+---------------------+
| MOID       | Name     | Datacenter | Import Status       |
+------------+----------+------------+---------------------+
| domain-c21 | Cluster1 | DC1        | activated           |
+------------+----------+------------+---------------------+</pre>
</li>

                <li class="li">Commit your cloud deploy configuration to the local Git repository (for
                    instructions, see <a class="xref" href="../installation/using_git.html">HPE Helion OpenStack 2.0: Using Git for Configuration Management</a>):
                    <pre class="pre codeblock">cd ~/helion/hos/ansible
git add -A
git commit -m "My config or other commit message"</pre>
</li>

                <li class="li">Prepare your environment for deployment:
                    <pre class="pre codeblock">ansible-playbook -i hosts/localhost config-processor-run.yml;
ansible-playbook -i hosts/localhost ready-deployment.yml;
cd /home/stack/scratch/ansible/next/hos/ansible;</pre>
</li>

                <li class="li">Run the following
                    playbook:<pre class="pre codeblock">ansible-playbook -i hosts/verb_hosts guard-deployment.yml
ansible-playbook -i hosts/verb_hosts osconfig-run.yml --limit '*esx-ovsvapp'
ansible-playbook -i hosts/verb_hosts hlm-deploy.yml --limit NEU-OVSVAPP</pre>
</li>

            </ol>
</div>

  </div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>