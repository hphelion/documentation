
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="This topic describes how to enable the EON service for centralized logging, and changing the EON log level to DEBUG. To Modify the EON Log Level To change the EON log level to DEBUG, do the following: ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="topic"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: Enabling Debug Logging"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="topic_rq3_mxh_rt"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: Enabling Debug Logging</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="topic_rq3_mxh_rt">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

  <h1 class="title topictitle1">HPE Helion OpenStack<sup>Â®</sup> 2.0: Enabling Debug Logging</h1>

  <div class="body">
    <p class="p">This topic describes how to enable the EON service for centralized logging, and changing the
      EON log level to DEBUG.</p>

    <div class="section"><h2 class="title sectiontitle">To Modify the EON Log Level</h2>
      
      <p class="p">To change the EON log level to DEBUG, do the following:</p>

      <div class="p">
        <ol class="ol" id="topic_rq3_mxh_rt__ol_ydx_4xh_rt">
          <li class="li">Change the directory to:
            <pre class="pre codeblock">cd ~/helion/hos/ansible/roles/eon-common/templates</pre>
</li>

          <li class="li">In the <samp class="ph codeph">logger</samp> section: INFO(default), WARN, DEBUG; set it to default,
            to enable the log.</li>

          <li class="li">Edit the DEFAULT section in
            <samp class="ph codeph">eon.conf.j2</samp>:<pre class="pre codeblock">[DEFAULT]
debug = True</pre>
</li>

          <li class="li">Edit the <strong class="ph b">logger_root</strong> section in
            <samp class="ph codeph">logging.conf.j2</samp>:<pre class="pre codeblock">[logger_root]
qualname: root
handlers: watchedfile, logstash
level: DEBUG</pre>
</li>

          <li class="li">Commit your configuration:
            <pre class="pre codeblock">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</pre>
</li>

          <li class="li">Run the configuration processor as follows:
            <pre class="pre codeblock">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</pre>
</li>

          <li class="li">Prepare your environment for
            deployment:<pre class="pre codeblock">ansible-playbook -i hosts/localhost ready-deployment.yml;</pre>
</li>

          <li class="li">Execute EON reconfigure
            playbook<pre class="pre codeblock">cd /home/stack/scratch/ansible/next/hos/ansible;
ansible-playbook -i hosts/verb_hosts eon-reconfigure.yml</pre>
</li>

        </ol>

      </div>

    </div>

    <div class="section" id="topic_rq3_mxh_rt__enable-eon-service-centralized-logging"><strong class="ph b"> To Enable EON Service for Centralized
        Logging</strong>
      <p class="p">To enable EON Service for centralized logging, do the following:</p>
<ol class="ol">
        <li class="li">Change the directory
          to:<pre class="pre codeblock">~/helion/my_cloud/config/logging/vars</pre>
</li>

        <li class="li">Edit the <samp class="ph codeph">eon-api-clr.yml</samp> and <samp class="ph codeph">eon-conductor-clr.yml</samp>
          files to set the value of <samp class="ph codeph">centralized_logging</samp> to <strong class="ph b">true</strong> as shown in
          the following
          sample:<pre class="pre codeblock">logr_services:
  eon-conductor:
    logging_options:
      - centralized_logging:
        <strong class="ph b">enabled: true</strong>
        format: json
files:
- /var/log/eon/eon-conductor.log
log_rotate:
  - daily
  - compress
  - missingok
  - notifempty
  - copytruncate
  - maxsize 45M
  - rotate 7
  - create 640 eon eon
  - centralized_logging:
      <strong class="ph b">enabled: true</strong>
      format: rawjson</pre>
</li>

        <li class="li">Commit your
          configuration:<pre class="pre codeblock">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</pre>
</li>

        <li class="li">Run the configuration
          processor:<pre class="pre codeblock">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</pre>
</li>

        <li class="li">Prepare your environment for
          deployment:<pre class="pre codeblock">ansible-playbook -i hosts/localhost ready-deployment.yml;</pre>
</li>

        <li class="li">Run the EON reconfigure
          playbook:<pre class="pre codeblock">cd /home/stack/scratch/ansible/next/hos/ansible;
ansible-playbook -i hosts/verb_hosts eon-reconfigure.yml</pre>
</li>

      </ol>
</div>

    <div class="note note"><span class="notetitle">Note:</span> To disable the centralized logging, set the value of <samp class="ph codeph">centralized_logging</samp>
      to <strong class="ph b">False</strong> (See Step <strong class="ph b">2</strong>).</div>

    <div class="section"><h2 class="title sectiontitle">To Modify the OVSVAPP VM Log Level</h2>
      
      <div class="p">To change the OVSVAPP log level to DEBUG, do the following:<ol class="ol" id="topic_rq3_mxh_rt__ol_alb_vnj_vt">
          <li class="li">Change the directory
            to:<pre class="pre codeblock">cd ~/helion/hos/ansible/roles/neutron-common/templates</pre>
</li>

          <li class="li">Edit the <strong class="ph b">logger_root</strong> section in
            <samp class="ph codeph">ovsvapp-agent-logging.conf.j2</samp>:<pre class="pre codeblock">[logger_root]
qualname: root
handlers: watchedfile, logstash
level: DEBUG</pre>
</li>

          <li class="li">Commit your
            configuration:<pre class="pre codeblock">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</pre>
</li>

          <li class="li">Run the configuration
            processor:<pre class="pre codeblock">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</pre>
</li>

          <li class="li">Prepare your environment for
            deployment:<pre class="pre codeblock">ansible-playbook -i hosts/localhost ready-deployment.yml;</pre>
</li>

          <li class="li">Run the Neutron reconfigure
            playbook:<pre class="pre codeblock">cd /home/stack/scratch/ansible/next/hos/ansible;
ansible-playbook -i hosts/verb_hosts neutron-reconfigure.yml</pre>
</li>

        </ol>
</div>

    </div>

    <div class="section">
      <p class="p"><strong class="ph b">To Enable OVSVAPP Service for Centralized Logging</strong></p>

      <div class="p">To enable OVSVAPP Service for centralized logging:<ol class="ol" id="topic_rq3_mxh_rt__ol_zzb_z4j_vt">
          <li class="li">Change the directory
            to:<pre class="pre codeblock">~/helion/my_cloud/config/logging/vars</pre>
</li>

          <li class="li">Edit the <samp class="ph codeph">neutron-ovsvapp-clr.yml</samp> file to set the value of
              <samp class="ph codeph">centralized_logging</samp> to <strong class="ph b">true</strong> as shown in the following
            sample:<pre class="pre codeblock">logr_services:
  neutron-ovsvapp:
    logging_options:
    - centralized_logging:
        enabled: <strong class="ph b">true</strong>
        format: json
      files:
     - /var/log/neutron/ovsvapp-agent/ovsvapp_agent.log
     log_rotate:
     - daily
     - compress
     - missingok
     - notifempty
     - copytruncate
     - maxsize 45M
     - rotate 7
     - create 640 eon eon
   - centralized_logging:
       enabled: true
        format: rawjson
    files:
    -/var/log/neutron/ovsvapp-agent/ovsvapp_agent-json.log</pre>
</li>

          <li class="li">Commit your
            configuration:<pre class="pre codeblock">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</pre>
</li>

          <li class="li">Run the configuration processor:
            <pre class="pre codeblock">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</pre>
</li>

          <li class="li">Prepare your environment for
            deployment:<pre class="pre codeblock">ansible-playbook -i hosts/localhost ready-deployment.yml;</pre>
</li>

          <li class="li">Run the Neutron reconfigure playbook:<pre class="pre codeblock">cd /home/stack/scratch/ansible/next/hos/ansible;
ansible-playbook -i hosts/verb_hosts neutron-reconfigure.yml --limit NEU-OVSVAPP</pre>
<div class="p">
              <div class="note note"><span class="notetitle">Note:</span> To disable the centralized logging, set the value of
                  <samp class="ph codeph">centralized_logging</samp> to <strong class="ph b">False</strong> (See Step <strong class="ph b">2</strong>).</div>

            </div>
</li>

        </ol>
</div>

    </div>

  </div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>