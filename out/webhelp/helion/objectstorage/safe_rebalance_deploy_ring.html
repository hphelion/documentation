
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Before deploying a new ring, you must be sure the change that has been applied to the last ring is complete (i.e., all the partitions are in their correct location). There are three aspects to this: ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="topic"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: Determining When to Rebalance and Deploy a New Ring"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="topic_ohx_j1t_4t"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: Determining When to Rebalance and Deploy a New Ring</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="topic_ohx_j1t_4t">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

  <h1 class="title topictitle1">HPE Helion OpenStack<sup>Â®</sup> 2.0: Determining When to Rebalance and Deploy a
    New Ring</h1>

  <div class="body">
    <p class="p">Before deploying a new ring, you must be sure the change that has been applied to the last
      ring is complete (i.e., all the partitions are in their correct location). There are three
      aspects to this:</p>

    <ul class="ul" id="topic_ohx_j1t_4t__ul_dnm_m1t_4t">
      <li class="li">
        <p class="p">Is the replication system busy? </p>

        <div class="p">You might want to postpone a ring change until after replication has finished. If the
          replication system is busy repairing a failed drive, a ring change will place additional
          load on the system. To check that replication has finished, use the
            <samp class="ph codeph">swift-recon</samp> command with the <strong class="ph b">--replication</strong> argument. (For more
          information, see <a class="xref" href="validating_swift_recon.html">HPE Helion OpenStack 2.0: Gathering Swift Data</a>.) The oldest completion time
          can indicate that the replication process is very busy. If it is more than 15 or 20
          minutes then the object replication process are probably still very busy. The following
          example indicates that the oldest completion is 120 seconds, so that the replication
          process is probably not
          busy:<pre class="pre codeblock">$ sudo swift-recon --replication
===============================================================================
--&gt; Starting reconnaissance on 3 hosts
===============================================================================
[2015-10-02 15:31:45] Checking on replication
[replication_time] low: 0, high: 0, avg: 0.0, total: 0, Failed: 0.0%, no_result: 0, reported: 3
Oldest completion was 2015-10-02 15:31:32 (120 seconds ago) by 192.168.245.4:6000.
Most recent completion was 2015-10-02 15:31:43 (10 seconds ago) by 192.168.245.3:6000.
===============================================================================</pre>
</div>

      </li>

    </ul>

    <div class="p">
      <ul class="ul" id="topic_ohx_j1t_4t__ul_k2d_2dt_4t">
        <li class="li">
          <p class="p">Are there drive or server failures? </p>

          <p class="p">A drive failure does not preclude deploying a new ring. In principal, there should be
            two copies elsewhere. However, another drive failure in the middle of replication might
            make data temporary unavailable. If possible, postpone ring changes until all servers
            and drives are operating normally.</p>

        </li>

        <li class="li">Has <samp class="ph codeph">min-part-time</samp> elapsed? <p class="p">The <samp class="ph codeph">swift-ring-builder</samp>
            will refuse to build a new ring until <samp class="ph codeph">min-part-time</samp> hours has elapsed
            since the last time it built rings. You must postpone changes until this time has
            elapsed. Alternatively you can change the value of min-part-time. (For instructions, see
              <a class="xref" href="how_to_change_min_part_time.html#topic_ybt_mhb_kt">HPE Helion OpenStack 2.0: Changing min-part-time in Swift</a>).</p>
</li>

      </ul>

    </div>

  </div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>