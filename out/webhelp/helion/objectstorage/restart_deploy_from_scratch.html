
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="This page describes the various operational procedures performed by Swift. To Restart the Swift Object Storage Deployment The structure of ring is built in an incremental stages. When you modify a ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="DC.Type" content="topic"></meta><meta name="DC.Title" content="HPE Helion OpenStack 2.0: Restarting the Object Storage Deployment"></meta><meta name="prodname" content="HPE Helion"></meta><meta name="version" content="4.1.0"></meta><meta name="copyright" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Rights.Owner" content="HPE Helion 2015" type="primary"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="topic_enj_cms_mt"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>HPE Helion OpenStack 2.0: Restarting the Object Storage Deployment</title><!--  Generated with Oxygen version 17.0, build number 2015072912.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "../../index.html";
          
          --></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="topic_enj_cms_mt">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>

  <h1 class="title topictitle1">HPE Helion OpenStack<sup>Â®</sup> 2.0: Restarting the Object Storage Deployment</h1>

  <div class="body">
    <p class="p">This page describes the various operational procedures performed by Swift.</p>

    <div class="section"><h2 class="title sectiontitle">To Restart the Swift Object Storage Deployment </h2>
      
      <p class="p">The structure of ring is built in an incremental stages. When you modify a ring, the new
        ring uses the state of the old ring as a basis for the new ring. Rings are stored in the
        builder file. The <samp class="ph codeph">swiftlm-ring-supervisor</samp> stores builder files in the
          <samp class="ph codeph">/etc/swiftlm/builder_dir/region-&lt;region-name&gt;</samp> directory on the
        Ring-Builder node. The builder files are named &lt;ring-name&gt; builder. Prior versions of the
        builder files are stored in the
          <samp class="ph codeph">/etc/swiftlm/builder_dir/region-&lt;region-name&gt;/backups</samp> directory.</p>

      <p class="p">Generally, you use an existing builder file as the basis for changes to a ring. However, at
        initial deployment, when you create a ring there will be no builder file. Instead, the first
        step in the process is to build a builder file. The deploy playbook does this as a part of
        the deployment process. If you have successfully deployed some of the system, the ring
        builder files will exist. </p>

      <p class="p">If you change your input model (for example, by adding servers) now, the process assumes
        you are <em class="ph i">modifying</em> a ring and behaves differently than while creating a ring from
        scratch. In this case, the ring is not balanced. So, if the cloud model contains an error or
        you decide to make substantive changes, it is a best practice to start from scratch and
        build rings using the steps in "To Reset Builder Files" below.</p>

      
    </div>

    
    <div class="section"><h2 class="title sectiontitle">To Reset Builder Files</h2>
      
      <div class="note note"><span class="notetitle">Note:</span> 
        <p class="p">You must reset the builder files during the initial deployment process (only). This
          process should be used only when you want to restart a deployment from scratch. If you
          reset the builder files after completing your initial deployment, then you are at a risk
          of losing critical system data.</p>

        <div class="p">To reset the builder files from scratch, do the following:<ol class="ol" id="topic_enj_cms_mt__ul_otm_stz_4t">
            <li class="li">You must know your Keystone region name. Each distinct Swift system uses a different
              Keystone region. If you have several Keystone regions and you are trying to return to
              the start state for region2, you should not delete the builder files of region1 as
              this is presumably running normally.</li>

            <li class="li">Delete the builder files in the
                <samp class="ph codeph">/etc/swiftlm/builder-dir/region-&lt;region-name&gt;/</samp> directory. For
              example, for the region2 Keystone region, do the
                following:<pre class="pre codeblock">sudo rm /etc/swiftlm/builder_dir/region-region2/*.builder</pre>
<div class="note note"><span class="notetitle">Note:</span> If
                you have successfully deployed a system and accidentally delete the builder files,
                you can recover to the correct state. For instructions, see <a class="xref" href="recovering_builder_file.html#topic_gbz_13t_mt">HPE Helion OpenStack 2.0: Recovering Swift Builder Files</a>.</div>
</li>

          </ol>
</div>

      </div>

    </div>

  </div>

<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>